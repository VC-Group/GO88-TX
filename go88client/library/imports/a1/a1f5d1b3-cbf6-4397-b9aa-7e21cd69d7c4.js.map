{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\TaiXiu\\TaiXiuMain/assets\\Script\\Game\\TaiXiu\\TaiXiuMain\\TaiXiuMain.js"],"names":["TX_Board","require","TX_Chat","BrowserUtil","helper","TaiXiu_efScale","cc","Class","extends","Component","properties","background","Node","bg_Dice","Animation","bg_efDice","inputL","inputR","inputLTxt","Label","inputRTxt","inputLeft","EditBox","inputRight","totalLeft","totalRight","myLeft","myRight","playerLeft","playerRight","nodeKetQua","labelKetQua","timeWait","nodeTimeWait","timeCuoc","timePopup","nodeTimePopup","labelPhien","diaNan","dice","default","type","Sprite","diceSF","SpriteFrame","dotLogs","diceAnimation","efTai","efXiu","efTaiColor","efXiuColor","frameNan","spriteNan","dot_black","dot_white","dot_yellow","notice","fontCong","BitmapFont","fontTru","WIN_HT","WIN_DN","LOST_HT","LOST_DN","taixiu","btnLTxt","btnRTxt","audioWin","AudioSource","DiaNan","dataLogs","active","diemSo","node","play","_results","win","isNan","status","init","obj","RedT","setting","data","du_day","util","getLogs","children","map","dot","temp","getComponent","mod","reverse","onDiceAnimationFinish","event","setDice","console","log","position","time_remain","nextRealTime","reLoadGame","onLoad","self","ttOffset","editboxs","keyHandle","t","keyCode","macro","KEY","tab","changeNextFocusEditBox","preventDefault","enter","focusGame","onCuocClick","on","bet","getOnlyNumberInString","input","string","parseInt","board","isNaN","instantiate","prefabMiniNotice","noticeComponent","text","addChild","send","cuoc","select","inputOld","onEnable","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","sys","isBrowser","addEvent","inputAddEvent","updateValue","onDisable","off","removeEvent","clean","IS_LOGIN","inputRemoveEvent","e","value","numberWithCommas","getHTMLElementByEditBox","addEventListener","bind","removeEventListener","i","length","checkEditBoxFocus","focusEditBox","onChangerNan","spriteFrame","regTimeOut2","setTimeout","onDuDay","onDataTaiXiu","setPhien","setTop","v2","touch","getLocationX","x","getLocationY","y","parent","insertChild","onSelectInput","onChangerInput","phien","logs","bool","sprite","forEach","index","onData","get_phien","TX_LichSuPhien","err","Object","assign","get_top","TX_Top","chat","get_log","TX_LichSu","playTime","finish","timeInterval","clearInterval","unshift","dices","pop","activeInHierarchy","efStop","stop","setInterval","_animator","isPlaying","time","numberPad","color","state","getAnimationState","_defaultClip","name","speed","playState","_anims","array","reset","Color","WHITE","red_tai","red_xiu","red_me_tai","red_me_xiu","red_player_tai","red_player_xiu","tLineWinRedH","tLineWinRed","tLineLostRedH","tLineLostRed","point","line_dice1","line_dice2","line_dice3","line_tong","tmp_DS","tmp_arrA","tmp_arrB","c_tai","c_xiu","sliced","slice","TX_ThongKe","lineAc","dice1","dice2","dice3","tong","draw","dice1_line","dice1_dots","dice2_line","dice2_dots","dice3_line","dice3_dots","draw_Tong","tong_line","KetQua","Promise","all","KetQuaDot","resolve","reject","newArr","newDS","push","then","newData","values","KetQuaLeft","filter","KetQuaRight","DiemSoCel","current","data_Cel","fromHEX","BLACK","DiemSoLeft","DiemSoRight","setDefautl","clearTimeout","regTimeOut","addComponent","font","lineHeight","fontSize","runAction","sequence","moveTo","callFunc","destroy","thuong","fontEffect","get_new"],"mappings":"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","file":"TaiXiuMain.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\TaiXiu\\TaiXiuMain","sourcesContent":["\r\nvar TX_Board    = require('TaiXiuBoard'),\r\n\tTX_Chat     = require('TaiXiuChat'),\r\n\tBrowserUtil = require('BrowserUtil'),\r\n\thelper      = require('Helper'),\r\n\tTaiXiu_efScale = require('TaiXiu_efScale');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\tproperties: {\r\n\t\tbackground: cc.Node,\r\n\t\tbg_Dice:   cc.Animation,\r\n\t\tbg_efDice: cc.Node,\r\n\t\tinputL: cc.Node,\r\n\t\tinputR: cc.Node,\r\n\t\tinputLTxt: cc.Label,\r\n\t\tinputRTxt: cc.Label,\r\n\t\tinputLeft: cc.EditBox,\r\n\t\tinputRight: cc.EditBox,\r\n\t\ttotalLeft: cc.Label,\r\n\t\ttotalRight: cc.Label,\r\n\t\tmyLeft: cc.Label,\r\n\t\tmyRight: cc.Label,\r\n\t\tplayerLeft: cc.Label,\r\n\t\tplayerRight: cc.Label,\r\n\t\tnodeKetQua: cc.Node,\r\n\t\tlabelKetQua: cc.Label,\r\n\t\ttimeWait: cc.Label,\r\n\t\tnodeTimeWait: cc.Node,\r\n\t\ttimeCuoc: cc.Label,\r\n\t\ttimePopup: cc.Label,\r\n\t\tnodeTimePopup: cc.Node,\r\n\t\tlabelPhien: cc.Label,\r\n\t\tdiaNan: cc.Node,\r\n\t\tdice: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype:    cc.Sprite\r\n\t\t},\r\n\t\tdiceSF: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype:    cc.SpriteFrame\r\n\t\t},\r\n\t\tdotLogs: cc.Node,\r\n\t\tdiceAnimation: cc.Animation,\r\n\t\tefTai: TaiXiu_efScale,\r\n\t\tefXiu: TaiXiu_efScale,\r\n\t\tefTaiColor: TaiXiu_efScale,\r\n\t\tefXiuColor: TaiXiu_efScale,\r\n\t\tframeNan: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype:    cc.SpriteFrame\r\n\t\t},\r\n\t\tspriteNan: cc.Sprite,\r\n\t\tdot_black: cc.SpriteFrame,\r\n\t\tdot_white: cc.SpriteFrame,\r\n\t\tdot_yellow: cc.SpriteFrame,\r\n\t\tnotice: cc.Node,\r\n\t\tfontCong: cc.BitmapFont,\r\n\t\tfontTru: cc.BitmapFont,\r\n\t\tWIN_HT: cc.Label,\r\n\t\tWIN_DN: cc.Label,\r\n\t\tLOST_HT: cc.Label,\r\n\t\tLOST_DN: cc.Label,\r\n\t\tTX_Chat: TX_Chat,\r\n\t\tTX_Board: TX_Board,\r\n\t\ttaixiu: true,\r\n\t\tbtnLTxt: cc.Node,\r\n\t\tbtnRTxt: cc.Node,\r\n\t\taudioWin:cc.AudioSource\r\n\t},\r\n\tDiaNan:function(){\r\n\t\tthis.dataLogs();\r\n\t\t\r\n\t\tthis.nodeKetQua.active = true;\r\n\t\tif (this.diemSo > 10) {\r\n\t\t\tthis.efTaiColor.node.active = true;\r\n\t\t\tthis.efTai.node.active = false;\r\n\t\r\n\t\t\tthis.efTaiColor.play();\r\n\t\t}else{\r\n\t\t\tthis.efXiuColor.node.active = true;\r\n\t\t\tthis.efXiu.node.active = false;\r\n\t\t\tthis.efXiuColor.play();\r\n\t\t}\r\n\r\n\t\tif(void 0 !== this._results.win && this._results.win){\r\n\t\t\tthis.audioWin.play();\r\n\t\t\tif (this.isNan) {\r\n\t\t\t\tthis.status();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t},\r\n\tinit: function(obj) {\r\n\t\tthis.RedT = obj;\r\n\t\tcc.RedT.setting.taixiu.data = cc.RedT.setting.taixiu.data || {taixiu:{},du_day:{}};\r\n\t\tthis.isNan = false;\r\n\t\tif (void 0 === cc.RedT.util.fontCong) {\r\n\t\t\tcc.RedT.util.fontCong = this.fontCong;\r\n\t\t\tcc.RedT.util.fontTru  = this.fontTru;\r\n\t\t}\r\n\t\tif (void 0 === cc.RedT.setting.taixiu.getLogs) {\r\n\t\t\tcc.RedT.setting.taixiu.getLogs = false;\r\n\t\t}\r\n\t\tif (void 0 === cc.RedT.setting.taixiu.isNan) {\r\n\t\t\tcc.RedT.setting.taixiu.isNan = false;\r\n\t\t}\r\n\r\n\t\tthis.dotLogs = this.dotLogs.children.map(function(dot){\r\n\t\t\tlet temp = dot.getComponent(cc.Sprite);\r\n\t\t\ttemp.mod = dot.getComponent('TaiXiuMain_logTips');\r\n\t\t\treturn temp;\r\n\t\t});\r\n\t\tthis.dotLogs.reverse();\r\n\r\n\t\tthis.onDiceAnimationFinish = function(event){\r\n\t\t\tthis.setDice(true);\r\n\r\n\t\t\tif (this.isNan) {\r\n\t\t\t\tconsole.log(\"onDiceAnimationFinish\")\t;\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.DiaNan();\r\n\t\t\t\t// this.dataLogs();\r\n\t\t\t\t// this.nodeKetQua.active = true;\r\n\t\t\t\t// if (this.diemSo > 10) {\r\n\t\t\t\t// \tthis.efTaiColor.play()\r\n\t\t\t\t// }else{\r\n\t\t\t\t// \tthis.efXiuColor.play()\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t\tthis.diceAnimation.node.active = false;\r\n\t\t}\r\n\t\tif (void 0 !== cc.RedT.setting.taixiu.position) {\r\n\t\t\tthis.node.position = cc.RedT.setting.taixiu.position;\r\n\t\t}\r\n\t\tif (cc.RedT.setting.taixiu.getLogs) {\r\n\t\t\tif (void 0 !== cc.RedT.setting.taixiu.time_remain) {\r\n\t\t\t\tcc.RedT.setting.taixiu.time_remain++;\r\n\t\t\t\tthis.nextRealTime();\r\n\t\t\t}\r\n\t\t\tthis.reLoadGame();\r\n\t\t}\r\n\t},\r\n\tonLoad () {\r\n\t\tlet self      = this;\r\n\t\tthis.ttOffset = null;\r\n\t\tthis.editboxs = [this.inputLeft, this.inputRight];\r\n\t\tthis.TX_Board.init(this);\r\n\t\tthis.TX_Chat.init(this);\r\n\t\tthis._results = {};\r\n\t\tthis.diaNan.getComponent('TaiXiu_DiaNan').init(this);\r\n\r\n\t\tthis.keyHandle = function(t) {\r\n\t\t\treturn t.keyCode === cc.macro.KEY.tab ? (this.changeNextFocusEditBox(),\r\n\t\t\t\tt.preventDefault && t.preventDefault(),\r\n\t\t\t\t!1) : t.keyCode === cc.macro.KEY.enter ? (BrowserUtil.focusGame(), this.onCuocClick(),\r\n\t\t\t\tt.preventDefault && t.preventDefault(),\r\n\t\t\t\t!1) : void 0\r\n\t\t}\r\n\r\n\t\tthis.diceAnimation.on('finished', this.onDiceAnimationFinish, this);\r\n\t\tthis.onCuocClick = function(){\r\n\t\t\tlet bet = helper.getOnlyNumberInString(this.input.string);\r\n\t\t\tbet = parseInt(bet);\r\n\t\t\tif (this.RedT.board) {\r\n\t\t\t\tthis.input.string = '';\r\n\t\t\t}else{\r\n\t\t\t\tthis.input.string = '0';\r\n\t\t\t}\r\n\t\t\tthis.TX_Board.node.active = false;\r\n\t\t\tif (isNaN(bet) || bet < 1000) {\r\n\t\t\t\tlet notice = cc.instantiate(this.RedT.RedT.prefabMiniNotice);\r\n\t\t\t\tlet noticeComponent = notice.getComponent('mini_warning');\r\n\t\t\t\tnoticeComponent.text.string = 'Tiền cược phải lớn hơn 1.000 Vinh';\r\n\t\t\t\tthis.notice.addChild(notice);\r\n\t\t\t}else{\r\n\t\t\t\tcc.RedT.send({taixiu:{cuoc:{select:(this.inputOld == 'left'), bet:bet}}});\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (this.RedT.board) {\r\n\t\t\tthis.inputL.active = this.inputR.active = false;\r\n\t\t\tthis.inputLeft.node.active = this.inputRight.node.active = true;\r\n\t\t}\r\n\t},\r\n\tonEnable: function () {\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t//this.background.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\r\n\t\tthis.RedT.board && cc.sys.isBrowser && this.addEvent();\r\n\t\tthis.nodeTimePopup.active = false;\r\n\r\n\t\tif (this.RedT.board) {\r\n\t\t\tBrowserUtil.inputAddEvent(this.inputLeft, 'input', this.updateValue);\r\n\t\t\tBrowserUtil.inputAddEvent(this.inputRight, 'input', this.updateValue);\r\n\t\t}\r\n\t},\r\n\tonDisable: function () {\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t//\tthis.background.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\r\n\t\tthis.RedT.board && cc.sys.isBrowser && this.removeEvent();\r\n\t\tthis.clean();\r\n\t\t!!cc.RedT.IS_LOGIN && (this.nodeTimePopup.active = true);\r\n\r\n\t\tif (this.RedT.board) {\r\n\t\t\tBrowserUtil.inputRemoveEvent(this.inputLeft, 'input', this.updateValue);\r\n\t\t\tBrowserUtil.inputRemoveEvent(this.inputRight, 'input', this.updateValue);\r\n\t\t}\r\n\t},\r\n\tupdateValue: function(e){\r\n\t\tlet value = helper.numberWithCommas(helper.getOnlyNumberInString(this.value));\r\n\t\tthis.value = value == '0' ? '' : value;\r\n\t},\r\n\taddEvent: function() {\r\n\t\tfor (let t in this.editboxs) {\r\n\t\t\tBrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).addEventListener('keydown', this.keyHandle.bind(this), !1);\r\n\t\t}\r\n\t},\r\n\tremoveEvent: function() {\r\n\t\tfor (let t in this.editboxs) {\r\n\t\t\tBrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener('keydown', this.keyHandle.bind(this), !1);\r\n\t\t}\r\n\t},\r\n\tchangeNextFocusEditBox: function() {\r\n\t\tfor (var t = !1, e = 0, i = this.editboxs.length; e < i; e++){\r\n\t\t\tif (BrowserUtil.checkEditBoxFocus(this.editboxs[e])) {\r\n\t\t\t\tBrowserUtil.focusEditBox(this.editboxs[e]);\r\n\t\t\t\tt = !0;\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\t!t && 0 < this.editboxs.length && BrowserUtil.focusEditBox(this.editboxs[1]);\r\n\t},\r\n\tclean: function(){\r\n\t\tthis.inputLeft.string = this.inputRight.string = '';\r\n\t},\r\n\tonChangerNan: function(){\r\n\t\tcc.RedT.setting.taixiu.isNan = this.isNan = !this.isNan;\r\n\t\tthis.spriteNan.spriteFrame   = this.isNan ? this.frameNan[1] : this.frameNan[0];\r\n\t},\r\n\treLoadGame: function(){\r\n\t\tthis.regTimeOut2 = setTimeout(function(){\r\n\t\t\tthis.dataLogs();\r\n\t\t\tif (cc.RedT.setting.taixiu.isNan != this.isNan) {\r\n\t\t\t\tthis.onChangerNan();\r\n\t\t\t}\r\n\t\t\tthis.onDuDay(cc.RedT.setting.taixiu.data.du_day);\r\n\t\t\tthis.onDataTaiXiu(cc.RedT.setting.taixiu.data.taixiu);\r\n\t\t}\r\n\t\t.bind(this), 50);\r\n\t\tthis.setPhien();\r\n\t},\r\n\teventStart: function(e){\r\n\t\tthis.setTop();\r\n\t\tthis.ttOffset  = cc.v2(e.touch.getLocationX() - this.node.position.x, e.touch.getLocationY() - this.node.position.y);\r\n\t},\r\n\teventMove: function(e){\r\n\t\tthis.node.position = cc.v2(e.touch.getLocationX() - this.ttOffset.x, e.touch.getLocationY() - this.ttOffset.y);\r\n\t},\r\n\teventEnd: function(){\r\n\t\tcc.RedT.setting.taixiu.position = this.node.position;\r\n\t},\r\n\tsetTop: function(){\r\n\t\tthis.node.parent.insertChild(this.node);\r\n\t\tthis.RedT.setTop();\r\n\t},\r\n\tonSelectInput: function(event, select){\r\n\t\tthis.TX_Board.node.active = true;\r\n\t\tthis.inputOld = select;\r\n\t\tswitch(select) {\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis.input = this.RedT.board ? this.inputRight : this.inputRTxt;\r\n\t\t\t\tthis.btnRTxt.active = false;\r\n\t\t\t\tthis.btnLTxt.active = true;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'left':\r\n\t\t\t\tthis.input = this.RedT.board ? this.inputLeft : this.inputLTxt;\r\n\t\t\t\tthis.btnLTxt.active = false;\r\n\t\t\t\tthis.btnRTxt.active = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\tonChangerInput: function(){\r\n\t\tvar value = helper.numberWithCommas(helper.getOnlyNumberInString(this.input.string));\r\n\t\tthis.input.string = value == '0' ? '' : value;\r\n\t},\r\n\tsetPhien:function(){\r\n\t\tvar phien = cc.RedT.setting.taixiu.logs[0].phien+1;\r\n\t\tthis.labelPhien.string = '#' + phien;\r\n\t},\r\n\tsetDice: function(bool = false, sprite = true){\r\n\t\tvar self = this;\r\n\t\tthis.dice.forEach(function(dice, index){\r\n\t\t\tsprite && (dice.spriteFrame = self.diceSF[cc.RedT.setting.taixiu.logs[0].dice[index]-1]);\r\n\t\t\tdice.node.active = bool;\r\n\t\t});\r\n\t},\r\n\tonData: function(data){\r\n\t \r\n\t\tif (void 0 !== data.get_phien) {\r\n\t\t\tthis.RedT.TX_LichSuPhien.onData(data.get_phien);\r\n\t\t}\r\n\t\tif(void 0 !== data.err){\r\n\t\t\tvar notice = cc.instantiate(this.RedT.RedT.prefabMiniNotice)\r\n\t\t\tvar noticeComponent = notice.getComponent('mini_warning')\r\n\t\t\tnoticeComponent.text.string = data.err;\r\n\t\t\tthis.notice.addChild(notice);\r\n\t\t}\r\n\t\tif (void 0 !== data.du_day) {\r\n\t\t\tObject.assign(cc.RedT.setting.taixiu.data.du_day, data.du_day);\r\n\t\t\tthis.onDuDay(data.du_day);\r\n\t\t}\r\n\t\tif (void 0 !== data.taixiu) {\r\n\t\t\tObject.assign(cc.RedT.setting.taixiu.data.taixiu, data.taixiu);\r\n\t\t\tthis.onDataTaiXiu(data.taixiu);\r\n\t\t}\r\n\t\tif(void 0 !== data.get_top){\r\n\t\t\tthis.RedT.TX_Top.onData(data.get_top);\r\n\t\t}\r\n\t\tif(void 0 !== data.chat){\r\n\t\t\tthis.TX_Chat.onData(data.chat);\r\n\t\t}\r\n\t\tif(void 0 !== data.status){\r\n\t\t\tthis.status(data.status)\r\n\t\t}\r\n\t\tif(void 0 !== data.get_log){\r\n\t\t\tthis.RedT.TX_LichSu.onData(data.get_log);\r\n\t\t}\r\n\t\tif(void 0 !== data.logs){\r\n\t\t\tcc.RedT.setting.taixiu.logs   = data.logs;\r\n\t\t\tthis.dataLogs();\r\n\t\t\tthis.setPhien();\r\n\t\t\tif(cc.RedT.setting.taixiu.time_remain > 60){//60\r\n\t\t\t\tthis.setDice(!0);\r\n\t\t\t\tthis.nodeTimeWait.active  = true;\r\n\t\t\t\tthis.timeCuoc.node.active = false;\r\n\t\t\t}\r\n\t\t\tcc.RedT.setting.taixiu.getLogs = true;\r\n\t\t}\r\n\t\tif(void 0 !== data.time_remain){\r\n\t\t\tcc.RedT.setting.taixiu.time_remain = data.time_remain;\r\n\t\t\tthis.playTime();\r\n\t\t}\r\n\t\tif(void 0 !== data.finish){\r\n\t\t\tif (cc.RedT.setting.taixiu.getLogs) {\r\n\t\t\t\t// Huỷ đếm\r\n\t\t\t\tvoid 0 !== this.timeInterval && clearInterval(this.timeInterval);\r\n\t\t\t\t// Thêm kết quả\r\n\t\t\t\tcc.RedT.setting.taixiu.logs.unshift({dice: [data.finish.dices[0], data.finish.dices[1], data.finish.dices[2]], phien: data.finish.phien});\r\n\t\t\t\tcc.RedT.setting.taixiu.logs.length > 120 && cc.RedT.setting.taixiu.logs.pop();\r\n\t\t\t\t// Đặt dữ liệu\r\n\t\t\t\tthis.diemSo = data.finish.dices[0]+data.finish.dices[1]+data.finish.dices[2];\r\n\t\t\t\tthis.labelKetQua.string = this.diemSo;\r\n\t\t\t\tif(this.isNan){\r\n\t\t\t\t\tthis.diaNan.active         = true;\r\n\t\t\t\t\tthis.diaNan.position       = cc.v2(0,-8);\r\n\t\t\t\t\tthis.spriteNan.node.active = false;\r\n\t\t\t\t\tthis.onDiceAnimationFinish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.diceAnimation.node.active = true;\r\n\t\t\t\t\tif (this.node.activeInHierarchy) {\r\n\t\t\t\t\t\tthis.diceAnimation.play();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.onDiceAnimationFinish();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.nodeTimeWait.active  = true;\r\n\t\t\t\tthis.timeCuoc.node.active = false;\r\n\t\t\t}\r\n\t\t\tcc.RedT.setting.taixiu.time_remain = 77;\r\n\t\t//\tcc.RedT.setting.taixiu.time_remain = 77;\r\n\t\t\t//cc.RedT.setting.taixiu.time_remain = 82;\r\n\t\t\tthis.playTime();\r\n\t\t}\r\n\t},\r\n\tefStop: function(){\r\n\t\t \r\n\t\tthis.efTaiColor.stop();\r\n\t\tthis.efXiuColor.stop();\r\n\r\n\t\tthis.efTai.node.active = true;\r\n\t\tthis.efXiu.node.active = true;\r\n\t},\r\n\tplayTime: function(){\r\n\t\tvoid 0 !== this.timeInterval && clearInterval(this.timeInterval);\r\n\r\n\t\tthis.audioWin.stop();\r\n\t\tthis._results = {};\r\n\r\n\t\tthis.timeInterval = setInterval(function() {\r\n\t\t\tif (cc.RedT.setting.taixiu.time_remain > 61) {//61\r\n\t\t\t\tif (this.bg_Dice._animator !== null && this.bg_Dice._animator.isPlaying) {\r\n\t\t\t\t\tthis.bg_Dice.stop();\r\n\t\t\t\t}\r\n\t\t\t\tthis.bg_efDice.active = false;\r\n\t\t\t\tvar time = helper.numberPad(cc.RedT.setting.taixiu.time_remain-62, 2);//62\r\n\t\t\t\tthis.timePopup.node.active && (this.timePopup.string = time) && (this.timePopup.node.color = cc.color(255, 0, 0, 255));\r\n\t\t\t\tthis.timeWait.string = '00:' + helper.numberPad(time, 2);\r\n\t\t\t\tif (cc.RedT.setting.taixiu.time_remain < 71) {//71 51\r\n\t\t\t\t\tthis.efStop();\r\n\t\t\t\t}\r\n\t\t\t\tif (cc.RedT.setting.taixiu.time_remain < 66) {//66 46 \r\n\t\t\t\t\tthis.nodeKetQua.active = false;\r\n\t\t\t\t\tthis.isNan && (this.diaNan.active = false);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif (this.bg_Dice._animator !== null && !this.bg_Dice._animator.isPlaying) {\r\n\t\t\t\t\tlet state = this.bg_Dice.getAnimationState(this.bg_Dice._defaultClip.name);\r\n\t\t\t\t\tstate.speed = 1;\r\n\t\t\t\t\tthis.bg_Dice._animator.playState(state);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bg_Dice._animator !== null && this.bg_Dice._animator.isPlaying) {\r\n\t\t\t\t\tif (cc.RedT.setting.taixiu.time_remain < 7) {\r\n\t\t\t\t\t\tthis.bg_Dice._animator._anims.array[0].speed = 10;\r\n\t\t\t\t\t}else if (cc.RedT.setting.taixiu.time_remain < 23) {\r\n\t\t\t\t\t\tthis.bg_Dice._animator._anims.array[0].speed = 6;\r\n\t\t\t\t\t}else if (cc.RedT.setting.taixiu.time_remain < 33) {\r\n\t\t\t\t\t\tthis.bg_Dice._animator._anims.array[0].speed = 3;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.bg_efDice.active = true;\r\n\t\t\t\tif (!!this.dice[0].node.active) {\r\n\t\t\t\t\tthis.setDice(false, false);\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t\tthis.efStop();\r\n\t\t\t\tthis.nodeTimeWait.active  = this.nodeKetQua.active     = this.diaNan.active = false;\r\n\t\t\t\tthis.timeCuoc.node.active = this.spriteNan.node.active = true;\r\n\t\t\t\tif (cc.RedT.setting.taixiu.time_remain > 0) {\r\n\t\t\t\t\tvar time = helper.numberPad(cc.RedT.setting.taixiu.time_remain-1, 2);\r\n\t\t\t\t\tif(cc.RedT.setting.taixiu.getLogs){\r\n\t\t\t\t\t\tthis.timeCuoc.string = + time;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.timePopup.node.active && (this.timePopup.string = time) && (this.timePopup.node.color = cc.color(155, 75, 2, 255))\r\n\t\t\t\t\tif (cc.RedT.setting.taixiu.time_remain <= 10)\r\n\t\t\t\t\t\tthis.timeCuoc.node.color = cc.color(255, 69, 69, 255)\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.timeCuoc.node.color = cc.Color.WHITE\r\n\t\t\t\t}else clearInterval(this.timeInterval);\r\n\t\t\t}\r\n\t\t\tcc.RedT.setting.taixiu.time_remain--;\r\n\t\t}\r\n\t\t.bind(this), 1000)\r\n\t},\r\n\tnextRealTime: function(){\r\n\t\tif (cc.RedT.setting.taixiu.time_remain > 61) {//61\r\n\t\t\tthis.setDice(true);\r\n\t\t\tthis.nodeTimeWait.active  = true;\r\n\t\t\tthis.timeCuoc.node.active = false;\r\n\t\t\tvar time = helper.numberPad(cc.RedT.setting.taixiu.time_remain-62, 2);//62 42\r\n\t\t\tthis.timePopup.node.color = cc.color(255, 0, 0, 255);\r\n\t\t\tthis.timePopup.string     = time;\r\n\t\t\tthis.timeWait.string       = '00:' + helper.numberPad(time, 2);\r\n\t\t}else{\r\n\t\t\tthis.nodeTimeWait.active  = false;\r\n\t\t\tthis.timeCuoc.node.active = true;\r\n\t\t\tif (cc.RedT.setting.taixiu.time_remain > 0) {\r\n\t\t\t\tvar time = helper.numberPad(cc.RedT.setting.taixiu.time_remain-1, 2);\r\n\t\t\t\tif(cc.RedT.setting.taixiu.getLogs){\r\n\t\t\t\t\tthis.timeCuoc.string = '00:' + time;\r\n\t\t\t\t}\r\n\t\t\t\tthis.timePopup.node.color = cc.color(155, 75, 2, 255)\r\n\t\t\t\tthis.timePopup.string     = time;\r\n\t\t\t\tif (cc.RedT.setting.taixiu.time_remain <= 10)\r\n\t\t\t\t\tthis.timeCuoc.node.color = cc.color(255, 69, 69, 255)\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.timeCuoc.node.color = cc.Color.WHITE\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonDataTaiXiu: function(data){\r\n\t\tvoid 0 !== data.red_tai        && (this.totalLeft.string   = helper.numberWithCommas(data.red_tai));\r\n\t\tvoid 0 !== data.red_xiu        && (this.totalRight.string  = helper.numberWithCommas(data.red_xiu));\r\n\t\tvoid 0 !== data.red_me_tai     && (this.myLeft.string      = helper.numberWithCommas(data.red_me_tai));\r\n\t\tvoid 0 !== data.red_me_xiu     && (this.myRight.string     = helper.numberWithCommas(data.red_me_xiu));\r\n\t\tvoid 0 !== data.red_player_tai && (this.playerLeft.string  = helper.numberWithCommas(data.red_player_tai));\r\n\t\tvoid 0 !== data.red_player_xiu && (this.playerRight.string = helper.numberWithCommas(data.red_player_xiu));\r\n\t},\r\n\tonDuDay: function(data){\r\n\t\tthis.WIN_HT.string  = data.tLineWinRedH;\r\n\t\tthis.WIN_DN.string  = data.tLineWinRed;\r\n\t\tthis.LOST_HT.string = data.tLineLostRedH;\r\n\t\tthis.LOST_DN.string = data.tLineLostRed;\r\n\t},\r\n\tdataLogs: function(){\r\n\t\tif (!!cc.RedT.setting.taixiu.logs.length) {\r\n\t\t\tvar self = this;\r\n\t\t\t//Main log\r\n\t\t\tthis.dotLogs.forEach(function(dot, index){\r\n\t\t\t\tlet data = cc.RedT.setting.taixiu.logs[index];\r\n\t\t\t\tif (void 0 !== data) {\r\n\t\t\t\t\tlet point = data.dice[0] + data.dice[1] + data.dice[2];\r\n\t\t\t\t\tdot.node.active = true;\r\n\t\t\t\t\tdot.node.phien = data.phien;\r\n\t\t\t\t\tdot.mod.text.string = data.dice[0] + '-' + data.dice[1] + '-' + data.dice[2];\r\n\t\t\t\t\tdot.spriteFrame = point < 11 ? self.dot_white : self.dot_black;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdot.node.active = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar line_dice1 = [];\r\n\t\t\tvar line_dice2 = [];\r\n\t\t\tvar line_dice3 = [];\r\n\t\t\tvar line_tong  = [];\r\n\r\n\t\t\tvar tmp_DS = -1;\r\n\t\t\tvar tmp_arrA = [];\r\n\t\t\tvar tmp_arrB = [];\r\n\t\t\tvar c_tai = 0;\r\n\t\t\tvar c_xiu = 0;\r\n\r\n\t\t\tvar sliced = cc.RedT.setting.taixiu.logs.slice(0, 19);\r\n\t\t\tsliced.reverse();\r\n\t\t\t// Line paint\r\n\t\t\t//var Paint = new Promise(function(resolve, reject){\r\n\t\t\t\tfor (var i = 0; i < sliced.length; i++) {\r\n\t\t\t\t\tvar data = sliced[i];\r\n\t\t\t\t\tif (void 0 !== data) {\r\n\t\t\t\t\t\tself.RedT.TX_ThongKe.lineAc(i, true);\r\n\t\t\t\t\t\tvar dice1 = sliced[i].dice[0];\r\n\t\t\t\t\t\tvar dice2 = sliced[i].dice[1];\r\n\t\t\t\t\t\tvar dice3 = sliced[i].dice[2];\r\n\t\t\t\t\t\tvar tong = dice1+dice2+dice3;\r\n\r\n\t\t\t\t\t\tline_dice1[i] = {x:i*28, y:dice1*28-28, dice: dice1};\r\n\t\t\t\t\t\tline_dice2[i] = {x:i*28, y:dice2*28-28, dice: dice2};\r\n\t\t\t\t\t\tline_dice3[i] = {x:i*28, y:dice3*28-28, dice: dice3};\r\n\t\t\t\t\t\tline_tong[i]  = {x:i*27.7, y:tong*9.233-27.7, tong: tong}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tself.RedT.TX_ThongKe.lineAc(i, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.RedT.TX_ThongKe.draw(self.RedT.TX_ThongKe.dice1_line, self.RedT.TX_ThongKe.dice1_dots, line_dice1);\r\n\t\t\t\tself.RedT.TX_ThongKe.draw(self.RedT.TX_ThongKe.dice2_line, self.RedT.TX_ThongKe.dice2_dots, line_dice2);\r\n\t\t\t\tself.RedT.TX_ThongKe.draw(self.RedT.TX_ThongKe.dice3_line, self.RedT.TX_ThongKe.dice3_dots, line_dice3);\r\n\t\t\t\tself.RedT.TX_ThongKe.draw_Tong(self.RedT.TX_ThongKe.tong_line, line_tong);\r\n\t\t\t//});\r\n\r\n\t\t\t// Ket Qua\r\n\t\t\tvar KetQua = Promise.all(this.RedT.TX_ThongKe.KetQuaDot.map(function(dot, index){\r\n\t\t\t\tvar data = cc.RedT.setting.taixiu.logs[index];\r\n\t\t\t\tif (void 0 !== data) {\r\n\t\t\t\t\tdot.node.active = true;\r\n\t\t\t\t\tvar point = data.dice[0] + data.dice[1] +data.dice[2];\r\n\t\t\t\t\tdot.spriteFrame = point < 11 ? self.dot_white : self.dot_black;\r\n\t\t\t\t\treturn (point > 10 ? 1 : 0);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdot.node.active = false;\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\t// Diem So\r\n\t\t\tvar diemSo = new Promise((resolve, reject) => {\r\n\t\t\t\tvar newArr = cc.RedT.setting.taixiu.logs.slice();\r\n\t\t\t\tnewArr.reverse();\r\n\t\t\t\tfor (var newDS of newArr) {\r\n\t\t\t\t\tvar point = newDS.dice[0]+newDS.dice[1]+newDS.dice[2];\r\n\t\t\t\t\tvar type  = point > 10 ? 1 : 0;\r\n\t\t\t\t\tif (tmp_DS === -1) {\r\n\t\t\t\t\t\ttmp_DS = type;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type != tmp_DS || tmp_arrB.length > 4) {\r\n\t\t\t\t\t\ttmp_DS = type;\r\n\t\t\t\t\t\ttmp_arrA.push(tmp_arrB);\r\n\t\t\t\t\t\ttmp_arrB = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == tmp_DS) {\r\n\t\t\t\t\t\ttmp_arrB.push(point)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttmp_arrA.push(tmp_arrB);\r\n\t\t\t\tresolve(tmp_arrA);\r\n\t\t\t});\r\n\r\n\t\t\tPromise.all([KetQua, diemSo]).then(values => {\r\n\t\t\t\tvar newData = values[1];\r\n\t\t\t\tnewData.reverse();\r\n\t\t\t\tnewData = newData.slice(0, 20);\r\n\t\t\t\tnewData.reverse();\r\n\t\t\t\tself.RedT.TX_ThongKe.KetQuaLeft.string  = values[0].filter(i => i == 1).length;\r\n\t\t\t\tself.RedT.TX_ThongKe.KetQuaRight.string = values[0].filter(i => i == 0).length;\r\n\t\t\t\tPromise.all(self.RedT.TX_ThongKe.DiemSoCel.map(function(obj, i){\r\n\t\t\t\t\tvar data = newData[i];\r\n\t\t\t\t\tif (void 0 !== data) {\r\n\t\t\t\t\t\tobj.active = true;\r\n\t\t\t\t\t\treturn Promise.all(obj.RedT.map(function(current, index){\r\n\t\t\t\t\t\t\tvar data_Cel = data[index];\r\n\t\t\t\t\t\t\tif (void 0 !== data_Cel) {\r\n\t\t\t\t\t\t\t\tvar type = data_Cel > 10 ? true : false;\r\n\t\t\t\t\t\t\t\tc_tai = type  ? c_tai+1 : c_tai;\r\n\t\t\t\t\t\t\t\tc_xiu = !type ? c_xiu+1 : c_xiu;\r\n\t\t\t\t\t\t\t\tcurrent.node.active = true;\r\n\t\t\t\t\t\t\t\tcurrent.node.color = type ? cc.color().fromHEX('#B3A1A1') : cc.Color.WHITE;\r\n\t\t\t\t\t\t\t\tcurrent.text.string = data_Cel;\r\n\t\t\t\t\t\t\t\tcurrent.text.node.color = type ? cc.Color.WHITE : cc.Color.BLACK;\r\n\t\t\t\t\t\t\t\tcurrent.spriteFrame = type ? self.dot_black : self.dot_white;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tcurrent.node.active = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn void 0;\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tobj.active = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn void 0;\r\n\t\t\t\t})).then(varT => {\r\n\t\t\t\t\tself.RedT.TX_ThongKe.DiemSoLeft.string  = c_tai;\r\n\t\t\t\t\tself.RedT.TX_ThongKe.DiemSoRight.string = c_xiu;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\treset: function(){\r\n\t\tthis.efTaiColor.node.active = false;\r\n\t\tthis.efXiuColor.node.active = false;\r\n\t\tthis.setPhien();\r\n\t\tthis.isNan && this.dataLogs();\r\n\t\tcc.RedT.setting.taixiu.data.taixiu.red_me_tai = cc.RedT.setting.taixiu.data.taixiu.red_me_xiu = cc.RedT.setting.taixiu.data.taixiu.red_player_tai = cc.RedT.setting.taixiu.data.taixiu.red_player_xiu = cc.RedT.setting.taixiu.data.taixiu.red_tai = cc.RedT.setting.taixiu.data.taixiu.red_xiu = this.totalLeft.string = this.totalRight.string = this.myLeft.string = this.myRight.string = this.playerLeft.string = this.playerRight.string = 0;\r\n\t},\r\n\tsetDefautl: function(){\r\n\t\tcc.RedT.setting.taixiu.getLogs = this.nodeTimePopup.active = false;\r\n\t\tvoid 0 !== this.timeInterval && clearInterval(this.timeInterval);\r\n\t\tclearTimeout(this.regTimeOut);\r\n\t\tclearTimeout(this.regTimeOut2);\r\n\t\tthis.TX_Chat.reset();\r\n\t},\r\n\tstatus: function(data){\r\n\t\tvar time = 10;\r\n\t\tvar isNan = this.isNan;\r\n\t\tvar send = true;\r\n\t\tif(void 0 !== data){\r\n\t\t\tthis._results = data;\r\n\t\t\ttime = 2e3;\r\n\t\t\t \r\n\t\t}else{\r\n\t\t\tdata = this._results;\r\n\t\t\ttime = 10;\r\n\t\t\tisNan = false;send = false;\r\n\t\t}\r\n\t\r\n\t\tthis.regTimeOut = setTimeout(function() {\r\n\t\t\tif(!isNan){\r\n\t\t\t\tvar temp = new cc.Node;\r\n\t\t\t\ttemp.addComponent(cc.Label);\r\n\t\t\t\ttemp = temp.getComponent(cc.Label);\r\n\t\t\t\ttemp.string = (data.win ? '+' : '-') + helper.numberWithCommas(data.bet);\r\n\t\t\t\ttemp.font = data.win ? this.fontCong : this.fontTru;\r\n\t\t\t\ttemp.lineHeight = 130;\r\n\t\t\t\ttemp.fontSize   = 22;\r\n\t\t\t\ttemp.node.position = cc.v2(data.select ? -252 : 252, -50);\r\n\t\t\t\tthis.notice.addChild(temp.node);\r\n\t\t\t\ttemp.node.runAction(cc.sequence(cc.moveTo(3, cc.v2(data.select ? -252 : 252, 130)), cc.callFunc(function(){this.node.destroy()}, temp)));\r\n\t\t\t\tif(void 0 !== data.thuong && data.thuong > 0){\r\n\t\t\t\t\tvar thuong = new cc.Node;\r\n\t\t\t\t\tthuong.addComponent(cc.Label);\r\n\t\t\t\t\tthuong = thuong.getComponent(cc.Label);\r\n\t\t\t\t\tthuong.string = (data.win ? '+' : '-') + helper.numberWithCommas(data.thuong);\r\n\t\t\t\t\tthuong.font = cc.RedT.util.fontEffect;\r\n\t\t\t\t\tthuong.lineHeight = 90;\r\n\t\t\t\t\tthuong.fontSize   = 14;\r\n\t\t\t\t\tthis.notice.addChild(thuong.node);\r\n\t\t\t\t\tthuong.node.runAction(cc.sequence(cc.moveTo(3, cc.v2(0, 100)), cc.callFunc(function(){this.node.destroy()}, thuong)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(send) cc.RedT.send({taixiu:{get_new: true}})\r\n\t\t}\r\n\t\t.bind(this), time)\r\n\t},\r\n});\r\n"]}