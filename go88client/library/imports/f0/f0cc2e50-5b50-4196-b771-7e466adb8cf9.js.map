{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\CoTrang\\lines/assets\\Script\\Game\\CoTrang\\lines\\CoTrang_lines.js"],"names":["helper","require","cc","Class","extends","Component","properties","lines","Node","mainLines","init","obj","RedT","self","Promise","all","children","map","line","getComponent","then","result","selectAll","onOpen","node","active","onClose","playClick","data","length","notice","show","title","text","select","e","target","color","_val","Color","WHITE","fromHEX","check","index","filter","labelLine","string","tong","numberWithCommas","getOnlyNumberInString","bet","selectChan","i","selectLe"],"mappings":"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","file":"CoTrang_lines.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\CoTrang\\lines","sourcesContent":["\r\nvar helper = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tlines:     cc.Node,\r\n\t\tmainLines: cc.Node,\r\n\t},\r\n\tinit: function(obj){\r\n\t\tthis.RedT = obj;\r\n\t\tvar self = this;;\r\n\t\tPromise.all(this.mainLines.children.map(function(line){\r\n\t\t\treturn line.getComponent('CoTrang_iline');\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tthis.mainLines = result;\r\n\t\t});\r\n\t\tthis.selectAll(null, \"1\");\r\n\t},\r\n\tonOpen: function(){\r\n\t\tthis.node.active = true;\r\n\t},\r\n\tonClose: function(){\r\n\t\tthis.RedT.playClick();\r\n\t\tif (this.node.active && this.data.length < 1) {\r\n\t\t\tthis.RedT.notice.show({title:'CẢNH BÁO', text:'Chọn ít nhất 1 dòng'});\r\n\t\t}else{\r\n\t\t\tthis.node.active = false;\r\n\t\t}\r\n\t},\r\n\tselect: function(e) {\r\n\t\tthis.RedT.playClick();\r\n\t\tvar node = e.target;\r\n\t\tif (node.color._val != cc.Color.WHITE._val) {\r\n\t\t\tnode.color = cc.Color.WHITE;\r\n\t\t}else{\r\n\t\t\tnode.color = node.color.fromHEX('#8A8A8A');\r\n\t\t}\r\n\t\tthis.check();\r\n\t},\r\n\tcheck: function() {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.lines.children.map(function(line, index){\r\n\t\t\treturn line.color._val == cc.Color.WHITE._val ? index+1 : void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length;\r\n\t\t\t\tthis.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tselectChan: function() {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.lines.children.map(function(line, index){\r\n\t\t\tvar i = index+1;\r\n\t\t\tif (i%2) {\r\n\t\t\t\tline.color = line.color.fromHEX('#8A8A8A');\r\n\t\t\t}else{\r\n\t\t\t\tline.color = cc.Color.WHITE;\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\treturn void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length;\r\n\t\t\t\tthis.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tselectLe: function() {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.lines.children.map(function(line, index){\r\n\t\t\tvar i = index+1;\r\n\t\t\tif (i%2) {\r\n\t\t\t\tline.color = cc.Color.WHITE;\r\n\t\t\t\treturn i;\r\n\t\t\t}else{\r\n\t\t\t\tline.color = line.color.fromHEX('#8A8A8A');\r\n\t\t\t}\r\n\t\t\treturn void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length;\r\n\t\t\t\tthis.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tselectAll: function(e, select) {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.lines.children.map(function(line, index){\r\n\t\t\tvar check = select == \"1\";\r\n\t\t\tline.color = check ? cc.Color.WHITE : line.color.fromHEX('#8A8A8A');\r\n\t\t\treturn check ? index+1 : void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data, index){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length;\r\n\t\t\t\tthis.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n\t\t\t})\r\n\t\t});\r\n\t},\r\n});\r\n"]}