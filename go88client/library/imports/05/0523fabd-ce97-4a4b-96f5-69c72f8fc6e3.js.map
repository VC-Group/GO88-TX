{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\BanCa\\Fish\\EF/assets\\Script\\Game\\BanCa\\Fish\\EF\\fish_EFcoint.js"],"names":["cc","Class","extends","Component","properties","coint","dragonBones","ArmatureDisplay","init","player","fish","data","on","EventObject","LOOP_COMPLETE","COMPLETE","node","x","Math","floor","random","y","RedT","Game","nodeCoint","addChild","position","iconCoint","parent","convertToWorldSpaceAR","convertToNodeSpaceAR","changer","playAnimation","dist","sub","mag","runAction","sequence","spawn","scaleTo","moveTo","callFunc","destroy"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACRC,UAASF,GAAGG,SADJ;;AAGRC,aAAY;AACXC,SAAOC,YAAYC;AADR,EAHJ;AAMRC,OAAM,cAASC,MAAT,EAAiBC,IAAjB,EAAuBC,IAAvB,EAA6B;AAClC,OAAKN,KAAL,CAAWO,EAAX,CAAcN,YAAYO,WAAZ,CAAwBC,aAAtC,EAAqD,KAAKC,QAA1D,EAAoE,IAApE;;AAEA,OAAKC,IAAL,CAAUC,CAAV,GAAcP,KAAKO,CAAL,GAASC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAeT,KAAKM,CAAL,GAAO,CAAP,GAAS,CAAxB,CAAX,CAAT,GAAgDN,KAAKM,CAAnE;AACA,OAAKD,IAAL,CAAUK,CAAV,GAAcX,KAAKW,CAAL,GAASH,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAeT,KAAKU,CAAL,GAAO,CAAP,GAAS,CAAxB,CAAX,CAAT,GAAgDV,KAAKU,CAAnE;;AAEAZ,SAAOa,IAAP,CAAYC,IAAZ,CAAiBC,SAAjB,CAA2BC,QAA3B,CAAoC,KAAKT,IAAzC;AACAL,SAAO,IAAP;;AAEA,MAAIe,WAAWjB,OAAOkB,SAAP,CAAiBX,IAAjB,CAAsBY,MAAtB,CAA6BC,qBAA7B,CAAmDpB,OAAOkB,SAAP,CAAiBX,IAAjB,CAAsBU,QAAzE,CAAf;AACA,OAAKA,QAAL,GAAgB,KAAKV,IAAL,CAAUY,MAAV,CAAiBE,oBAAjB,CAAsCJ,QAAtC,CAAhB;AACA,OAAKK,OAAL,GAAe,KAAf;AACA,EAlBO;AAmBRhB,WAAS,oBAAU;AAClB,MAAI,KAAKgB,OAAL,KAAiB,KAArB,EAA4B;AAC3B,QAAK1B,KAAL,CAAW2B,aAAX,CAAyB,UAAzB,EAAqC,CAArC;AACA,OAAIC,OAAO,KAAKjB,IAAL,CAAUU,QAAV,CAAmBQ,GAAnB,CAAuB,KAAKR,QAA5B,EAAsCS,GAAtC,EAAX;AACAF,UAAOA,OAAK,GAAZ;AACA,QAAKjB,IAAL,CAAUoB,SAAV,CAAoBpC,GAAGqC,QAAH,CAAYrC,GAAGsC,KAAH,CAAStC,GAAGuC,OAAH,CAAWN,IAAX,EAAiB,GAAjB,CAAT,EAAgCjC,GAAGwC,MAAH,CAAUP,IAAV,EAAgB,KAAKP,QAArB,CAAhC,CAAZ,EAA6E1B,GAAGyC,QAAH,CAAY,YAAU;AACtH,SAAKzB,IAAL,CAAU0B,OAAV;AACA,IAFgG,EAE9F,IAF8F,CAA7E,CAApB;AAGA;AACD,OAAKX,OAAL,GAAe,IAAf;AACA;AA7BO,CAAT","file":"fish_EFcoint.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\BanCa\\Fish\\EF","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tcoint: dragonBones.ArmatureDisplay,\r\n\t},\r\n\tinit: function(player, fish, data) {\r\n\t\tthis.coint.on(dragonBones.EventObject.LOOP_COMPLETE, this.COMPLETE, this);\r\n\r\n\t\tthis.node.x = fish.x + Math.floor(Math.random()*(data.x*2+1))-data.x;\r\n\t\tthis.node.y = fish.y + Math.floor(Math.random()*(data.y*2+1))-data.y;\r\n\r\n\t\tplayer.RedT.Game.nodeCoint.addChild(this.node);\r\n\t\tdata = null;\r\n\r\n\t\tlet position = player.iconCoint.node.parent.convertToWorldSpaceAR(player.iconCoint.node.position);\r\n\t\tthis.position = this.node.parent.convertToNodeSpaceAR(position);\r\n\t\tthis.changer = false;\r\n\t},\r\n\tCOMPLETE:function(){\r\n\t\tif (this.changer === false) {\r\n\t\t\tthis.coint.playAnimation('rotation', 0);\r\n\t\t\tlet dist = this.node.position.sub(this.position).mag();\r\n\t\t\tdist = dist/800;\r\n\t\t\tthis.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(dist, 0.4), cc.moveTo(dist, this.position)), cc.callFunc(function(){\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t}, this)));\r\n\t\t}\r\n\t\tthis.changer = true;\r\n\t},\r\n});\r\n"]}