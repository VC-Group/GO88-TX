{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MegaJackpot/assets\\Script\\Game\\MegaJackpot\\MegaJ_history.js"],"names":["Helper","require","cc","Class","extends","Component","properties","page","Prefab","header","Node","body","quay","nhanve","select","init","obj","RedT","onLoad","instantiate","y","node","addChild","getComponent","children","map","headSelect","event","target","name","forEach","head","unselect","bind","active","get_data","onEnable","isSpin","data","send","g","megaj","history","onData","quayData","nhanveData","onSet","kmess","total","i","dataT","bg","time","string","getStringDateByTime","game","room","kq","numberWithCommas","win","thuong","nameGame","to","sl","status","temp","color","fromHEX"],"mappings":"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","file":"MegaJ_history.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MegaJackpot","sourcesContent":["\r\nvar Helper = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tpage:    cc.Prefab,\r\n\t\theader:  cc.Node,\r\n\t\tbody:    cc.Node,\r\n\t\tquay:    cc.Node,\r\n\t\tnhanve:  cc.Node,\r\n\t\tselect:  '',\r\n\t},\r\n\tinit: function(obj){\r\n\t\tthis.RedT = obj;\r\n\t},\r\n\tonLoad () {\r\n\t\tthis.page = cc.instantiate(this.page);\r\n\t\tthis.page.y = -238;\r\n\t\tthis.node.addChild(this.page);\r\n\t\tthis.page = this.page.getComponent('Pagination');\r\n\r\n\t\tthis.quay = this.quay.children.map(function(obj){\r\n\t\t\treturn obj.getComponent('MegaJ_history_item');\r\n\t\t});\r\n\r\n\t\tthis.nhanve = this.nhanve.children.map(function(obj){\r\n\t\t\treturn obj.getComponent('MegaJ_top_item');\r\n\t\t});\r\n\r\n\t\tthis.header = this.header.children.map(function(obj){\r\n\t\t\treturn obj.getComponent('itemContentMenu');\r\n\t\t});\r\n\r\n\t\tthis.page.init(this);\r\n\t},\r\n\theadSelect: function(event) {\r\n\t\tthis.select = event.target.name;\r\n\r\n\t\tthis.header.forEach(function(head){\r\n\t\t\tif (head.node.name === this.select) {\r\n\t\t\t\thead.select();\r\n\t\t\t}else{\r\n\t\t\t\thead.unselect();\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\r\n\t\tthis.body.children.forEach(function(body){\r\n\t\t\tif (body.name === this.select) {\r\n\t\t\t\tbody.active = true;\r\n\t\t\t}else{\r\n\t\t\t\tbody.active = false;\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\r\n\t\tthis.get_data();\r\n\t},\r\n\tonEnable: function() {\r\n\t\tthis.get_data();\r\n\t},\r\n\tget_data: function(page = 1){\r\n\t\tif (!this.RedT.isSpin) {\r\n\t\t\tlet data = {};\r\n\t\t\tdata[this.select] = page;\r\n\t\t\tcc.RedT.send({g:{megaj:{history:data}}});\r\n\t\t}\r\n\t},\r\n\tonData: function(data){\r\n\t\tif (!!data.quay) {\r\n\t\t\tthis.quayData(data.quay);\r\n\t\t}\r\n\t\tif (!!data.nhanve) {\r\n\t\t\tthis.nhanveData(data.nhanve);\r\n\t\t}\r\n\t},\r\n\tquayData: function(data){\r\n        this.page.onSet(data.page, data.kmess, data.total);\r\n\r\n        this.quay.forEach(function(obj, i){\r\n        \tlet dataT = data.data[i];\r\n        \tif (void 0 !== dataT) {\r\n        \t\tobj.node.active = true;\r\n        \t\tobj.bg.active = i%2;\r\n        \t\tobj.time.string   = Helper.getStringDateByTime(dataT.time);\r\n        \t\tobj.game.string   = dataT.room === 100 ? 'Thanh đồng' : (dataT.room === 100 ? 'Bạch kim' : 'Hoàng kim');\r\n        \t\tobj.kq.string     = dataT.kq === 5 ? 'Thêm lượt' : (dataT.kq === 7 ? '50%' : Helper.numberWithCommas(dataT.win));\r\n        \t\tobj.thuong.string = Helper.numberWithCommas(dataT.win);\r\n        \t}else{\r\n        \t\tobj.node.active = false;\r\n        \t}\r\n        }.bind(this));\r\n\t},\r\n\tnhanveData: function(data){\r\n\t\tthis.page.onSet(data.page, data.kmess, data.total);\r\n\r\n        this.nhanve.forEach(function(obj, i){\r\n        \tlet dataT = data.data[i];\r\n        \tif (void 0 !== dataT) {\r\n        \t\tobj.node.active   = true;\r\n        \t\tobj.bg.active     = i%2;\r\n        \t\tobj.time.string   = Helper.getStringDateByTime(dataT.time);\r\n        \t\tobj.game.string   = this.nameGame(dataT.to);\r\n        \t\tobj.room.string   = dataT.room === 100 ? 'Thanh đồng' : (dataT.room === 100 ? 'Bạch kim' : 'Hoàng kim');\r\n        \t\tobj.sl.string     = dataT.sl;\r\n        \t\tobj.status.string = dataT.status ? 'Đã nhận': 'Chưa nhận';\r\n        \t\tlet temp = obj.status.node;\r\n                if (dataT.status) {\r\n                    temp.color = temp.color.fromHEX('#248A0A');\r\n                }else{\r\n                    temp.color = temp.color.fromHEX('#BB0B0B');\r\n                }\r\n        \t}else{\r\n        \t\tobj.node.active = false;\r\n        \t}\r\n        }.bind(this));\r\n\t},\r\n\tnameGame: function(data){\r\n\t\tswitch(data) {\r\n\t\t  \tcase 100:\r\n\t\t  \t\treturn 'PUBG';\r\n\t\t    \tbreak;\r\n\t\t  \tcase 101:\r\n\t\t  \t\treturn 'Candy';\r\n\t\t    \tbreak;\r\n\t\t  \tcase 102:\r\n\t\t  \t\treturn 'Panda';\r\n\t\t    \tbreak;\r\n\t\t  \tcase 103:\r\n\t\t  \t\treturn 'Đập Hũ';\r\n\t\t    \tbreak;\r\n\t\t  \tcase 104:\r\n\t\t  \t\treturn 'Mini 3Cây';\r\n\t\t    \tbreak;\r\n\t\t  \tcase 105:\r\n\t\t  \t\treturn 'Ngộ Không';\r\n\t\t    \tbreak;\r\n\t\t  \tcase 106:\r\n\t\t  \t\treturn 'Mini Poker';\r\n\t\t    \tbreak;\r\n\t\t}\r\n\t},\r\n});\r\n"]}