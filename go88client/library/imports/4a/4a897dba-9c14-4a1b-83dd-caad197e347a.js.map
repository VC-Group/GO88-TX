{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MegaJackpot/assets\\Script\\Game\\MegaJackpot\\MegaJackpot.js"],"names":["helper","require","cc","Class","extends","Component","properties","background","sp","Skeleton","bg_move","Node","menuGame","bgVQ","imgVQ","Sprite","vqthanhdong","SpriteFrame","vqbachkim","vqhoangkim","hu","Label","luot","notice","spinNode","spinSprite","spinOn","spinOff","isSpin","init","obj","RedT","setting","MegaJackpot","scale","users","game","bgAnim","check","localStorage","getItem","node","active","changerGame","position","onLoad","Dialog","MegaJ_history","MegaJ_top","onEnable","onGetHu","regUpdate","on","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","onDisable","off","e","setTop","ttOffset","v2","touch","getLocationX","x","getLocationY","y","parent","insertChild","setAnimation","spriteFrame","string","children","forEach","item","name","pauseSystemEvents","resumeSystemEvents","openGame","audio","playClick","IS_LOGIN","setItem","inGame","dialog","showSignIn","closeGame","spin","send","g","megaj","onData","data","status","updateStatus","addNotice","info","history","top","oldData","action","rotateTo","easing","easeQuinticActionOut","action2","p2","callFunc","angle","stopAllActions","updateKQ","runAction","sequence","kq","temp","addComponent","getComponent","numberWithCommas","thuong","font","util","fontCong","lineHeight","fontSize","addChild","moveTo","destroy","update","text","instantiate","prefabMiniNotice","noticeComponent","topHu","self","filter","type","s","getOnlyNumberInString","bet","numberTo"],"mappings":"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","file":"MegaJackpot.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MegaJackpot","sourcesContent":["\r\nvar helper = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tbackground:  sp.Skeleton,\r\n\t\tbg_move:     cc.Node,\r\n\t\tmenuGame:    cc.Node,\r\n\r\n\t\tbgVQ:        cc.Node,\r\n\t\timgVQ:       cc.Sprite,\r\n\r\n\t\tvqthanhdong: cc.SpriteFrame,\r\n\t\tvqbachkim:   cc.SpriteFrame,\r\n\t\tvqhoangkim:  cc.SpriteFrame,\r\n\r\n\t\thu:          cc.Label,\r\n\t\tluot:        cc.Label,\r\n\r\n\t\tnotice:       cc.Node,\r\n\r\n\t\tspinNode:     cc.Node,\r\n\t\tspinSprite:   cc.Sprite,\r\n\t\tspinOn:       cc.SpriteFrame,\r\n\t\tspinOff:      cc.SpriteFrame,\r\n\t\tisSpin:       false,\r\n\t},\r\n\tinit: function(obj){\r\n\t\tthis.RedT = obj;\r\n\t\tcc.RedT.setting.MegaJackpot = cc.RedT.setting.MegaJackpot || {scale:1, users:{100:0, 1000:0, 10000:0}};\r\n\t\tthis.game = 100;\r\n\t\tthis.bgAnim = {100:\"thanhdong\", 1000:\"bachkim\", 10000:\"hoangkim\"};\r\n\r\n\t\tlet check = localStorage.getItem('MegaJackpot');\r\n\t\tif (check == \"true\") {\r\n\t\t\tthis.node.active = true;\r\n\t\t}\r\n\r\n\t\tif (void 0 !== cc.RedT.setting.MegaJackpot.game) {\r\n\t\t\tif (cc.RedT.setting.MegaJackpot.game !== this.game) {\r\n\t\t\t\tthis.changerGame(null, cc.RedT.setting.MegaJackpot.game);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcc.RedT.setting.MegaJackpot.game = this.game = '100';\r\n\t\t}\r\n\t\tif (void 0 !== cc.RedT.setting.MegaJackpot.position) {\r\n\t\t\tthis.node.position = cc.RedT.setting.MegaJackpot.position;\r\n\t\t}\r\n\t},\r\n\tonLoad () {\r\n\t\tthis.RedT.Dialog.MegaJ_history.init(this);\r\n\t\tthis.RedT.Dialog.MegaJ_top.init(this);\r\n\t},\r\n\tonEnable: function() {\r\n\t\tthis.onGetHu();\r\n\t\tthis.regUpdate();\r\n\t\tthis.bg_move.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.bg_move.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.bg_move.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.bg_move.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t// this.bg_move.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\t},\r\n\tonDisable: function() {\r\n\t\tthis.bg_move.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.bg_move.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.bg_move.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.bg_move.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t// this.bg_move.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\t},\r\n\teventStart: function(e){\r\n\t\tthis.setTop();\r\n\t\tthis.ttOffset = cc.v2(e.touch.getLocationX() - this.node.position.x, e.touch.getLocationY() - this.node.position.y);\r\n\t},\r\n\teventMove: function(e){\r\n\t\tthis.node.position = cc.v2(e.touch.getLocationX() - this.ttOffset.x, e.touch.getLocationY() - this.ttOffset.y);\r\n\t},\r\n\teventEnd: function(){\r\n\t\tcc.RedT.setting.MegaJackpot.position = this.node.position;\r\n\t},\r\n\tsetTop:function(){\r\n\t\tcc.RedT.setting.MegaJackpot.scale = 1;\r\n\t\tthis.node.parent.insertChild(this.node);\r\n\t\tthis.RedT.setTop(this.node);\r\n\t},\r\n\tchangerGame:function(e, game){\r\n\t\tcc.RedT.setting.MegaJackpot.game = this.game = game;\r\n\t\tif (this.bgAnim[game]) {\r\n\t\t\tthis.background.setAnimation(0, this.bgAnim[game], true);\r\n\t\t\tthis.imgVQ.spriteFrame = this['vq'+this.bgAnim[game]];\r\n\t\t}\r\n\t\tthis.luot.string = cc.RedT.setting.MegaJackpot.users[game] + ' Lượt';\r\n\t\tthis.menuGame.children.forEach(function(item){\r\n\t\t\tif (item.name === game) {\r\n\t\t\t\titem.pauseSystemEvents();\r\n\t\t\t\titem.children[0].active = false;\r\n\t\t\t\titem.children[1].active = true;\r\n\t\t\t}else{\r\n\t\t\t\titem.resumeSystemEvents();\r\n\t\t\t\titem.children[0].active = true;\r\n\t\t\t\titem.children[1].active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.onGetHu();\r\n\t},\r\n\topenGame: function (game = null) {\r\n\t\tcc.RedT.audio.playClick();\r\n\t\tif (cc.RedT.IS_LOGIN){\r\n\t\t\tthis.node.active = !0;\r\n\t\t\tlocalStorage.setItem('MegaJackpot', true);\r\n\t\t\tthis.setTop();\r\n\t\t\tif (!!game) {\r\n\t\t\t\tthis.changerGame(null, game);\r\n\t\t\t}\r\n\t\t} else cc.RedT.inGame.dialog.showSignIn();\r\n\t},\r\n\tcloseGame:function(){\r\n\t\tthis.node.active = !1;\r\n\t\tlocalStorage.setItem('MegaJackpot', false);\r\n\t},\r\n\tspin: function(){\r\n\t\tthis.spinNode.pauseSystemEvents();\r\n\t\tthis.spinSprite.spriteFrame = this.spinOff;\r\n\t\tif (!this.isSpin) {\r\n\t\t\tcc.RedT.send({g:{megaj:{spin:this.game}}});\r\n\t\t}\r\n\t},\r\n\tonData: function(data){\r\n\t\tif (!!data.status) {\r\n\t\t\tthis.updateStatus(data.status);\r\n\t\t}\r\n\t\tif (!!data.notice) {\r\n\t\t\tthis.addNotice(data.notice);\r\n\t\t}\r\n\t\tif (!!data.info) {\r\n\t\t\tthis.info(data.info);\r\n\t\t}\r\n\t\tif (!!data.history) {\r\n\t\t\tthis.RedT.Dialog.MegaJ_history.onData(data.history);\r\n\t\t}\r\n\t\tif (!!data.top) {\r\n\t\t\tthis.RedT.Dialog.MegaJ_top.onData(data.top);\r\n\t\t}\r\n\t},\r\n\tinfo: function(data){\r\n\t\tcc.RedT.setting.MegaJackpot.users[100]   = data[100];\r\n\t\tcc.RedT.setting.MegaJackpot.users[1000]  = data[1000];\r\n\t\tcc.RedT.setting.MegaJackpot.users[10000] = data[10000];\r\n\t\tthis.luot.string = data[this.game] + ' Lượt';\r\n\t},\r\n\tupdateStatus: function(data){\r\n\t\tif (data.status === true) {\r\n\t\t\tthis.isSpin = true;\r\n\t\t\tthis.oldData = data;\r\n\t\t\tlet action = cc.rotateTo(10,  -((360*7)+data.data.position)).easing(cc.easeQuinticActionOut());\r\n\t\t\tlet action2 = cc.rotateTo(10, -((360*7)+data.data.position)).easing(cc.easeQuinticActionOut());\r\n\r\n\t\t\tvar p2 = cc.callFunc(function() {\r\n\t\t\t\tthis.bgVQ.angle       = -this.oldData.data.position;\r\n\t\t\t\tthis.imgVQ.node.angle = -this.oldData.data.position;\r\n\r\n\t\t\t\tthis.isSpin = false;\r\n\t\t\t\tthis.spinNode.resumeSystemEvents();\r\n\t\t\t\tthis.spinSprite.spriteFrame = this.spinOn;\r\n\r\n\t\t\t\tthis.bgVQ.stopAllActions();\r\n\t\t\t\tthis.imgVQ.node.stopAllActions();\r\n\t\t\t\tthis.updateKQ();\r\n\t\t\t}, this);\r\n\r\n\t\t\tthis.bgVQ.runAction(action);\r\n\t\t\tthis.imgVQ.node.runAction(cc.sequence(action2, p2));\r\n\r\n\t\t}else{\r\n\t\t\tthis.isSpin = false;\r\n\t\t\tthis.spinNode.resumeSystemEvents();\r\n\t\t\tthis.spinSprite.spriteFrame = this.spinOn;\r\n\t\t}\r\n\t},\r\n\tupdateKQ: function(){\r\n\t\tif (this.oldData.kq === 5) {\r\n\t\t\t// Thêm lượt\r\n\t\t}else if (this.oldData.kq === 12) {\r\n\t\t\t// Nổ hũ\r\n\t\t}else{\r\n\t\t\t/**\r\n\t\t\tif (this.oldData.data.thuong >= this.oldData.game*1000) {\r\n\t\t\t\t// Thắng lớn\r\n\t\t\t}else{\r\n\t\t\t\t// Thắng thường\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tvar temp = new cc.Node;\r\n\t\t\ttemp.addComponent(cc.Label);\r\n\t\t\ttemp = temp.getComponent(cc.Label);\r\n\t\t\ttemp.string = helper.numberWithCommas(this.oldData.data.thuong);\r\n\t\t\ttemp.font = cc.RedT.util.fontCong;\r\n\t\t\ttemp.lineHeight = 130;\r\n\t\t\ttemp.fontSize   = 20;\r\n\t\t\ttemp.node.position = cc.v2(0, 30);\r\n\t\t\tthis.notice.addChild(temp.node);\r\n\t\t\ttemp.node.runAction(cc.sequence(cc.moveTo(2.5, cc.v2(0, 150)), cc.callFunc(function(){\r\n\t\t\t\ttemp.node.destroy();\r\n\t\t\t}, this)));\r\n\t\t}\r\n\t},\r\n\tregUpdate: function(){\r\n\t\tcc.RedT.send({g:{megaj:{update:true}}});\r\n\t},\r\n\taddNotice:function(text){\r\n\t\tvar notice = cc.instantiate(this.RedT.prefabMiniNotice);\r\n\t\tvar noticeComponent = notice.getComponent('mini_warning');\r\n\t\tnoticeComponent.text.string = text;\r\n\t\tthis.notice.addChild(notice);\r\n\t},\r\n\tonGetHu: function(){\r\n\t\tif (void 0 !== cc.RedT.setting.topHu.data && this.node.active) {\r\n\t\t\tvar self = this;\r\n\t\t\tlet data = cc.RedT.setting.topHu.data['megaj'].filter(function(temp){\r\n\t\t\t\treturn temp.type == self.game;\r\n\t\t\t});\r\n\t\t\tvar s = helper.getOnlyNumberInString(this.hu.string);\r\n\t\t\tvar bet = data[0].bet;\r\n\t\t\tif (s-bet !== 0){\r\n\t\t\t\thelper.numberTo(this.hu, s, bet, 2000, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n});\r\n"]}