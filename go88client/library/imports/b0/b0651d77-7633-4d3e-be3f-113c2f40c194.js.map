{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Poker/assets\\Script\\Game\\Poker\\PokerTo.js"],"names":["Helper","require","cc","Class","extends","Component","properties","touch","Node","mask","labelBet","Label","labelMin","labelMax","onEnable","player","RedT","inGame","meMap","mainBet","getOnlyNumberInString","string","PBet","bet","PBalans","balans","debit","betMax","node","active","btm_to","labelRoom","betMin","h","numberWithCommas","on","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","onDisable","off","height","position","v2","e","runAction","scaleTo","offsetY","localY","getLocationY","y","onOkClick","send","g","poker","to"],"mappings":"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","file":"PokerTo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Poker","sourcesContent":["\r\nvar Helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        touch:    cc.Node,\r\n        mask:     cc.Node,\r\n        labelBet: cc.Label,\r\n        labelMin: cc.Label,\r\n        labelMax: cc.Label,\r\n    },\r\n    onEnable: function() {\r\n        let player  = cc.RedT.inGame.player[cc.RedT.inGame.meMap];\r\n        let mainBet = Helper.getOnlyNumberInString(cc.RedT.inGame.mainBet.string);\r\n        let PBet    = Helper.getOnlyNumberInString(player.bet.string);\r\n        let PBalans = Helper.getOnlyNumberInString(player.balans.string);\r\n        let debit   = mainBet-PBet;\r\n        this.betMax = PBalans-debit;\r\n        if (this.betMax < 1) {\r\n            this.node.active = false;\r\n            cc.RedT.inGame.btm_to.active = false;\r\n            return void 0;\r\n        }\r\n\r\n        let bet     = Helper.getOnlyNumberInString(cc.RedT.inGame.labelRoom.string);\r\n        this.betMin = bet>>0;\r\n        this.h      = this.betMin <= 100 ? 50 : (this.betMin <= 1000 ? 500 : (this.betMin <= 10000 ? 1000 : (this.betMin <= 100000 ? 10000 : 1000000)));\r\n\r\n        this.labelMin.string = this.labelBet.string = Helper.numberWithCommas(this.betMin);\r\n        this.labelMax.string = Helper.numberWithCommas(this.betMax);\r\n        this.betMin = this.betMin/this.h;\r\n        this.betMax = this.betMax/this.h;\r\n\r\n        this.touch.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n        this.touch.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n        this.touch.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n        this.touch.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n    },\r\n    onDisable: function() {\r\n        this.touch.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n        this.touch.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n        this.touch.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n        this.touch.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\r\n        this.mask.height     = 0;\r\n        this.touch.position = cc.v2(0, 0);\r\n    },\r\n    eventStart: function(e){\r\n        this.touch.runAction(cc.scaleTo(0.1, 1.18));\r\n        this.offsetY = {localY:e.touch.getLocationY(), y:this.touch.position.y};\r\n    },\r\n    eventMove: function(e){\r\n        let y = e.touch.getLocationY()-this.offsetY.localY+this.offsetY.y;\r\n        if (y < 0) {\r\n            y = 0;\r\n        }else if(y > 287){\r\n            y = 287;\r\n        }\r\n        this.mask.height = y;\r\n        this.touch.position = cc.v2(0, y);\r\n        let bet = (((y/287)*(this.betMax-this.betMin))+this.betMin)>>0;\r\n        this.labelBet.string = Helper.numberWithCommas(bet*this.h);\r\n    },\r\n    eventEnd: function(){\r\n        this.touch.runAction(cc.scaleTo(0.1, 1));\r\n    },\r\n    onOkClick: function(){\r\n        cc.RedT.send({g:{poker:{to:Helper.getOnlyNumberInString(this.labelBet.string)}}});\r\n    },\r\n});\r\n"]}