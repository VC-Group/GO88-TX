{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\DEvent/assets\\Script\\Model\\Dialog\\DEvent\\EventTaiXiu.js"],"names":["helper","require","cc","Class","extends","Component","properties","menu","Node","content","HQmenu","HQcontent","HQcontentDay","item","Prefab","itemDay","contentHQLeft","contentHQRight","LabelDate","Label","nodeDateMore","dataOld","onLoad","dateTop","Date","setDate","getDate","stringTime","numberPad","getMonth","getFullYear","string","i","dateH","instantiate","getComponent","RedT","bg","active","day","addChild","node","selectEvent","event","target","name","onGetTop","onGetHomQua","children","forEach","color","fromHEX","pauseSystemEvents","Color","BLACK","resumeSystemEvents","selectHeadHQ","send","taixiu","getTop","getTopHQ","dateToggle","dateView","obj","onData","data","topHQ","destroyAllChildren","win","reverse","lost","user","index","top","users","line","date","gift","numberWithCommas","reward","bind"],"mappings":"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","file":"EventTaiXiu.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\DEvent","sourcesContent":["\r\nvar helper = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tmenu:    cc.Node,\r\n\t\tcontent: cc.Node,\r\n\r\n\t\tHQmenu:       cc.Node,\r\n\t\tHQcontent:    cc.Node,\r\n\t\tHQcontentDay: cc.Node,\r\n\r\n\t\titem:           cc.Prefab,\r\n\t\titemDay:        cc.Prefab,\r\n\t\tcontentHQLeft:  cc.Node,\r\n\t\tcontentHQRight: cc.Node,\r\n\r\n\t\tLabelDate:    cc.Label,\r\n\t\tnodeDateMore: cc.Node,\r\n\t\tdataOld:      false,\r\n\t},\r\n\tonLoad: function () {\r\n\t\tthis.dateTop = new Date();\r\n\t\tthis.dateTop.setDate(this.dateTop.getDate()-1);\r\n\t\tlet stringTime = helper.numberPad(this.dateTop.getDate(), 2) + '/' + helper.numberPad(this.dateTop.getMonth()+1, 2) + '/' + this.dateTop.getFullYear();\r\n\t\tthis.LabelDate.string = stringTime;\r\n\r\n\t\tfor (let i = 0; i <11; i++) {\r\n\t\t\tlet dateH = new Date();\r\n\t\t\tdateH.setDate(dateH.getDate()-1-i);\r\n\t\t\tlet item = cc.instantiate(this.itemDay);\r\n\t\t\titem = item.getComponent('EventTaiXiu_itemDay');\r\n\t\t\titem.RedT         = this;\r\n\t\t\titem.bg.active    = i%2;\r\n\t\t\titem.day.string   = helper.numberPad(dateH.getDate(), 2) + '/' + helper.numberPad(dateH.getMonth()+1, 2) + '/' + dateH.getFullYear();\r\n\t\t\tthis.HQcontentDay.addChild(item.node);\r\n\t\t}\r\n\t},\r\n\tselectEvent: function(event) {\r\n\t\tthis.nodeDateMore.active = false;\r\n\t\tif (event.target.name == \"top\") {\r\n\t\t\tthis.onGetTop();\r\n\t\t}else if (event.target.name == \"homqua\") {\r\n\t\t\tthis.onGetHomQua();\r\n\t\t}\r\n\t\tthis.menu.children.forEach(function(menu){\r\n\t\t\tif (menu.name === event.target.name) {\r\n\t\t\t\tmenu.children[0].active = false;\r\n\t\t\t\tmenu.children[1].active = true;\r\n\t\t\t\tmenu.children[2].color  = cc.color().fromHEX('FAF578');\r\n\t\t\t\tmenu.pauseSystemEvents();\r\n\t\t\t}else{\r\n\t\t\t\tmenu.children[0].active = true;\r\n\t\t\t\tmenu.children[1].active = false;\r\n\t\t\t\tmenu.children[2].color  = cc.Color.BLACK;\r\n\t\t\t\tmenu.resumeSystemEvents();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.content.children.forEach(function(content){\r\n\t\t\tif (content.name === event.target.name) {\r\n\t\t\t\tcontent.active = true;\r\n\t\t\t}else{\r\n\t\t\t\tcontent.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tselectHeadHQ: function(event) {\r\n\t\tthis.HQmenu.children.forEach(function(menu){\r\n\t\t\tif (menu.name === event.target.name) {\r\n\t\t\t\tmenu.children[0].active = false;\r\n\t\t\t\tmenu.children[1].active = true;\r\n\t\t\t}else{\r\n\t\t\t\tmenu.children[0].active = true;\r\n\t\t\t\tmenu.children[1].active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.HQcontent.children.forEach(function(content){\r\n\t\t\tif (content.name === event.target.name) {\r\n\t\t\t\tcontent.active = true;\r\n\t\t\t}else{\r\n\t\t\t\tcontent.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tonGetTop: function(){\r\n\t\tcc.RedT.send({event:{taixiu:{getTop:true}}});\r\n\t},\r\n\tonGetHomQua: function(){\r\n\t\t!this.dataOld && cc.RedT.send({event:{taixiu:{getTopHQ:this.LabelDate.string}}});\r\n\t},\r\n\tdateToggle: function(){\r\n\t\tthis.nodeDateMore.active = !this.nodeDateMore.active;\r\n\t},\r\n\tdateView: function(obj){\r\n\t\tif (obj.string != this.LabelDate.string) {\r\n\t\t\tthis.dataOld = false;\r\n\t\t\tthis.LabelDate.string = obj.string;\r\n\t\t\tthis.onGetHomQua();\r\n\t\t}\r\n\t\tthis.nodeDateMore.active = false;\r\n\t},\r\n\tonData: function(data){\r\n\t\tif (!!data.topHQ) {\r\n\t\t\tthis.dataOld = true;\r\n\t\t\tthis.topHQ(data.topHQ);\r\n\t\t}\r\n\t},\r\n\ttopHQ: function(data){\r\n\t\tthis.contentHQLeft.destroyAllChildren();\r\n\t\tthis.contentHQRight.destroyAllChildren();\r\n\r\n\t\tdata.win.reverse();\r\n\t\tdata.lost.reverse();\r\n\r\n\t\tdata.win.forEach(function(user, index){\r\n\t\t\tlet item = cc.instantiate(this.item);\r\n\t\t\titem = item.getComponent('EventTaiXiu_item');\r\n\t\t\titem.bg.active    = index%2;\r\n\t\t\titem.top.string   = user.top;\r\n\t\t\titem.users.string = user.name;\r\n\t\t\titem.day.string   = user.line;\r\n\t\t\titem.date.string  = this.LabelDate.string;\r\n\t\t\titem.gift.string  = helper.numberWithCommas(user.reward);\r\n\t\t\titem.node.children[0].active = !(index&1);\r\n\t\t\tthis.contentHQLeft.addChild(item.node);\r\n\t\t}.bind(this));\r\n\r\n\t\tdata.lost.forEach(function(user, index){\r\n\t\t\tlet item = cc.instantiate(this.item);\r\n\t\t\titem = item.getComponent('EventTaiXiu_item');\r\n\t\t\t\r\n\t\t\titem.bg.active    = index%2;\r\n\t\t\titem.top.string   = user.top;\r\n\t\t\titem.users.string = user.name;\r\n\t\t\titem.day.string   = user.line;\r\n\t\t\titem.date.string  = this.LabelDate.string;\r\n\t\t\titem.gift.string  = helper.numberWithCommas(user.reward);\r\n\t\t\titem.node.children[0].active = !(index&1);\r\n\t\t\tthis.contentHQRight.addChild(item.node);\r\n\t\t}.bind(this));\r\n\t},\r\n});\r\n"]}