{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\MiniPanel\\popup/assets\\Script\\Model\\MiniPanel\\popup\\popupEvent.js"],"names":["cc","Class","extends","Component","onLoad","RedT","setting","popupEvent","ttOffset","ttOffset2","position","node","onEnable","on","Node","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","onDisable","off","e","setTop","v2","touch","getLocationX","x","getLocationY","y","Math","abs","inGame","width","height","xChanger","yChanger","show","parent","insertChild","IS_LOGIN","MiniPanel","Dialog","showVipPoint","dialog","showSignIn"],"mappings":"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","file":"popupEvent.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\MiniPanel\\popup","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    onLoad () {\r\n        cc.RedT.setting.popupEvent = cc.RedT.setting.popupEvent || {};\r\n        this.ttOffset     = null;\r\n        this.ttOffset2    = null;\r\n        if (void 0 !== cc.RedT.setting.popupEvent.position) {\r\n            this.node.position = cc.RedT.setting.popupEvent.position;\r\n        }\r\n    },\r\n    onEnable: function () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n    //    this.node.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n    },\r\n    onDisable: function () {\r\n        this.node.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n    //    this.node.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n    },\r\n    eventStart: function(e){\r\n        this.setTop();\r\n        this.ttOffset  = cc.v2(e.touch.getLocationX()-this.node.position.x, e.touch.getLocationY()-this.node.position.y)\r\n        this.ttOffset2 = cc.v2(e.touch.getLocationX()-(e.touch.getLocationX()-this.node.position.x), e.touch.getLocationY()-(e.touch.getLocationY()-this.node.position.y))\r\n    },\r\n    eventMove: function(e){\r\n        let x = e.touch.getLocationX()-this.ttOffset.x;\r\n        let y = e.touch.getLocationY()-this.ttOffset.y;\r\n        if (Math.abs(x) > cc.RedT.inGame.node.width/2-100) {\r\n            x = x < 0 ? (-cc.RedT.inGame.node.width/2)+100 : (cc.RedT.inGame.node.width/2)-100;\r\n        }\r\n        if (Math.abs(y) > cc.RedT.inGame.node.height/2-50) {\r\n            y = y < 0 ? (-cc.RedT.inGame.node.height/2)+50 : (cc.RedT.inGame.node.height/2)-50;\r\n        }\r\n        this.node.position = cc.v2(x, y);\r\n    },\r\n    eventEnd: function(e){\r\n        cc.RedT.setting.popupEvent.position = this.node.position;\r\n        this.xChanger = this.ttOffset2.x-(e.touch.getLocationX()-this.ttOffset.x)\r\n        this.yChanger = this.ttOffset2.y-(e.touch.getLocationY()-this.ttOffset.y)\r\n        if (this.xChanger <  5 &&\r\n            this.xChanger > -5 &&\r\n            this.yChanger <  5 &&\r\n            this.yChanger > -5) {\r\n            this.show();\r\n        }\r\n    },\r\n    setTop: function(){\r\n        this.node.parent.insertChild(this.node);\r\n    },\r\n    show: function(){\r\n        if (cc.RedT.IS_LOGIN){\r\n            cc.RedT.MiniPanel.Dialog.showVipPoint();\r\n        }else{\r\n            cc.RedT.inGame.dialog.showSignIn();\r\n        }\r\n    },\r\n});\r\n"]}