{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\XocXoc/assets\\Script\\Game\\XocXoc\\XocXoc_history.js"],"names":["Helper","require","cc","Class","extends","Component","properties","page","Prefab","content","Node","cointRed","cointXu","iconRed","SpriteFrame","iconWhite","red","onLoad","instantiate","y","node","addChild","getComponent","Promise","all","children","map","obj","then","tab","init","onEnable","get_data","RedT","send","g","xocxoc","log","changerCoint","active","onData","data","self","onSet","kmess","total","i","dataT","bg","time","string","getStringDateByTime","phien","numb","kq","forEach","dot","kqSprite","spriteFrame","kqLabel","chan","numberWithCommas","le","red3","red4","white3","white4","win","betwin","color","Color","YELLOW","WHITE"],"mappings":"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","file":"XocXoc_history.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\XocXoc","sourcesContent":["\r\nlet Helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        page:     cc.Prefab,\r\n        content:  cc.Node,\r\n        cointRed: cc.Node,\r\n        cointXu:  cc.Node,\r\n\r\n        iconRed:   cc.SpriteFrame,\r\n        iconWhite: cc.SpriteFrame,\r\n\r\n        red:      true,\r\n    },\r\n    onLoad () {\r\n        let page = cc.instantiate(this.page);\r\n        page.y = -263;\r\n        this.node.addChild(page);\r\n        this.page = page.getComponent('Pagination');\r\n        Promise.all(this.content.children.map(function(obj){\r\n            return obj.getComponent('XocXoc_history_item');\r\n        }))\r\n        .then(tab => {\r\n            this.content = tab;\r\n        })\r\n        this.page.init(this);\r\n    },\r\n    onEnable: function() {\r\n        this.get_data();\r\n    },\r\n    get_data: function(page = 1){\r\n        cc.RedT.send({g:{xocxoc:{log:{red:this.red, page:page}}}});\r\n    },\r\n    changerCoint: function(){\r\n        this.red             = !this.red;\r\n        this.cointRed.active = !this.cointRed.active;\r\n        this.cointXu.active  = !this.cointXu.active;\r\n        this.get_data();\r\n    },\r\n    onData: function(data){\r\n        let self = this;\r\n        this.page.onSet(data.page, data.kmess, data.total);\r\n\r\n        Promise.all(this.content.map(function(obj, i){\r\n            let dataT = data.data[i];\r\n            if (void 0 !== dataT) {\r\n                obj.node.active  = true;\r\n\r\n                obj.bg.active    = i%2;\r\n\r\n                obj.time.string  = Helper.getStringDateByTime(dataT.time);\r\n                obj.phien.string = dataT.phien;\r\n\r\n                let numb  = 0;\r\n                dataT.kq.forEach(function(dot){\r\n                    if (dot) {\r\n                        numb++;\r\n                    }\r\n                });\r\n                obj.kqSprite.spriteFrame = numb === 0 ? self.iconRed : (!(numb%2) ? self.iconWhite : self.iconRed);\r\n                obj.kqLabel.string = numb === 0 ? 4 : numb;\r\n\r\n                obj.chan.string   = Helper.numberWithCommas(dataT.chan);\r\n                obj.le.string     = Helper.numberWithCommas(dataT.le);\r\n                obj.red3.string   = Helper.numberWithCommas(dataT.red3);\r\n                obj.red4.string   = Helper.numberWithCommas(dataT.red4);\r\n                obj.white3.string = Helper.numberWithCommas(dataT.white3);\r\n                obj.white4.string = Helper.numberWithCommas(dataT.white4);\r\n                obj.win.string    = Helper.numberWithCommas(dataT.betwin);\r\n\r\n                if (!(numb%2)) {\r\n                    obj.chan.node.color = cc.Color.YELLOW;\r\n                    obj.le.node.color = cc.Color.WHITE;\r\n                }else{\r\n                    obj.le.node.color = cc.Color.YELLOW;\r\n                    obj.chan.node.color = cc.Color.WHITE;\r\n                }\r\n\r\n                if (numb === 0) {\r\n                    obj.white4.node.color = cc.Color.YELLOW;\r\n                }else{\r\n                    obj.white4.node.color = cc.Color.WHITE;\r\n                }\r\n                if (numb === 1) {\r\n                    obj.white3.node.color = cc.Color.YELLOW;\r\n                }else{\r\n                    obj.white3.node.color = cc.Color.WHITE;\r\n                }\r\n                if (numb === 3) {\r\n                    obj.red3.node.color = cc.Color.YELLOW;\r\n                }else{\r\n                    obj.red3.node.color = cc.Color.WHITE;\r\n                }\r\n                if (numb === 4) {\r\n                    obj.red4.node.color = cc.Color.YELLOW;\r\n                }else{\r\n                    obj.red4.node.color = cc.Color.WHITE;\r\n                }\r\n            }else{\r\n                obj.node.active = false;\r\n            }\r\n        }))\r\n    },\r\n});\r\n"]}