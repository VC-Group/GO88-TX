{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MegaJackpot/assets\\Script\\Game\\MegaJackpot\\MegaJ_top.js"],"names":["Helper","require","cc","Class","extends","Component","properties","page","Prefab","content","Node","init","obj","RedT","onLoad","instantiate","y","node","addChild","getComponent","Promise","all","children","map","then","result","onEnable","get_data","isSpin","send","g","megaj","top","onData","data","onSet","kmess","total","forEach","i","dataT","active","bg","time","string","getStringDateByTime","game","name","kq","room","thuong","numberWithCommas","win","bind"],"mappings":";;;;;;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAASL,GAAGM,MADJ;AAERC,iBAASP,GAAGQ;AAFJ,KAHP;AAOLC,UAAM,cAASC,GAAT,EAAa;AACf,aAAKC,IAAL,GAAYD,GAAZ;AACH,KATI;AAULE,UAVK,oBAUK;AAAA;;AACN,aAAKP,IAAL,GAAYL,GAAGa,WAAH,CAAe,KAAKR,IAApB,CAAZ;AACA,aAAKA,IAAL,CAAUS,CAAV,GAAc,CAAC,GAAf;AACA,aAAKC,IAAL,CAAUC,QAAV,CAAmB,KAAKX,IAAxB;AACA,aAAKA,IAAL,GAAY,KAAKA,IAAL,CAAUY,YAAV,CAAuB,YAAvB,CAAZ;;AAEAC,gBAAQC,GAAR,CAAY,KAAKZ,OAAL,CAAaa,QAAb,CAAsBC,GAAtB,CAA0B,UAASX,GAAT,EAAa;AAC/C,mBAAOA,IAAIO,YAAJ,CAAiB,oBAAjB,CAAP;AACH,SAFW,CAAZ,EAGCK,IAHD,CAGM,kBAAU;AACZ,kBAAKf,OAAL,GAAegB,MAAf;AACH,SALD;;AAOA,aAAKlB,IAAL,CAAUI,IAAV,CAAe,IAAf;AACH,KAxBI;;AAyBLe,cAAU,oBAAW;AACjB,aAAKC,QAAL;AACH,KA3BI;AA4BLA,cAAU,oBAAkB;AAAA,YAATpB,IAAS,uEAAF,CAAE;;AACxB,YAAI,CAAC,KAAKM,IAAL,CAAUe,MAAf,EAAuB;AACnB1B,eAAGW,IAAH,CAAQgB,IAAR,CAAa,EAACC,GAAE,EAACC,OAAM,EAACC,KAAIzB,IAAL,EAAP,EAAH,EAAb;AACH;AACJ,KAhCI;AAiCL0B,YAAQ,gBAASC,IAAT,EAAc;AAClB,aAAK3B,IAAL,CAAU4B,KAAV,CAAgBD,KAAK3B,IAArB,EAA2B2B,KAAKE,KAAhC,EAAuCF,KAAKG,KAA5C;;AAEA,aAAK5B,OAAL,CAAa6B,OAAb,CAAqB,UAAS1B,GAAT,EAAc2B,CAAd,EAAgB;AACjC,gBAAIC,QAAQN,KAAKA,IAAL,CAAUK,CAAV,CAAZ;AACA,gBAAI,KAAK,CAAL,KAAWC,KAAf,EAAsB;AAClB5B,oBAAIK,IAAJ,CAASwB,MAAT,GAAkB,IAAlB;AACA7B,oBAAI8B,EAAJ,CAAOD,MAAP,GAAoBF,IAAE,CAAtB;AACA3B,oBAAI+B,IAAJ,CAASC,MAAT,GAAoB5C,OAAO6C,mBAAP,CAA2BL,MAAMG,IAAjC,CAApB;AACA/B,oBAAIkC,IAAJ,CAASF,MAAT,GAAoBJ,MAAMO,IAA1B;AACAnC,oBAAIoC,EAAJ,CAAOJ,MAAP,GAAoBJ,MAAMS,IAAN,KAAe,GAAf,GAAqB,YAArB,GAAqCT,MAAMS,IAAN,KAAe,GAAf,GAAqB,UAArB,GAAkC,WAA3F;AACArC,oBAAIsC,MAAJ,CAAWN,MAAX,GAAoB5C,OAAOmD,gBAAP,CAAwBX,MAAMY,GAA9B,CAApB;AACH,aAPD,MAOK;AACDxC,oBAAIK,IAAJ,CAASwB,MAAT,GAAkB,KAAlB;AACH;AACJ,SAZoB,CAYnBY,IAZmB,CAYd,IAZc,CAArB;AAaH;AAjDI,CAAT","file":"MegaJ_top.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MegaJackpot","sourcesContent":["\r\nvar Helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        page:    cc.Prefab,\r\n        content: cc.Node,\r\n    },\r\n    init: function(obj){\r\n        this.RedT = obj;\r\n    },\r\n    onLoad () {\r\n        this.page = cc.instantiate(this.page);\r\n        this.page.y = -245;\r\n        this.node.addChild(this.page);\r\n        this.page = this.page.getComponent('Pagination');\r\n\r\n        Promise.all(this.content.children.map(function(obj){\r\n            return obj.getComponent('MegaJ_history_item');\r\n        }))\r\n        .then(result => {\r\n            this.content = result;\r\n        });\r\n\r\n        this.page.init(this);\r\n    },\r\n    onEnable: function() {\r\n        this.get_data();\r\n    },\r\n    get_data: function(page = 1){\r\n        if (!this.RedT.isSpin) {\r\n            cc.RedT.send({g:{megaj:{top:page}}});\r\n        }\r\n    },\r\n    onData: function(data){\r\n        this.page.onSet(data.page, data.kmess, data.total);\r\n\r\n        this.content.forEach(function(obj, i){\r\n            let dataT = data.data[i];\r\n            if (void 0 !== dataT) {\r\n                obj.node.active = true;\r\n                obj.bg.active     = i%2;\r\n                obj.time.string   = Helper.getStringDateByTime(dataT.time);\r\n                obj.game.string   = dataT.name;\r\n                obj.kq.string     = dataT.room === 100 ? 'Thanh đồng' : (dataT.room === 100 ? 'Bạch kim' : 'Hoàng kim');\r\n                obj.thuong.string = Helper.numberWithCommas(dataT.win)\r\n            }else{\r\n                obj.node.active = false;\r\n            }\r\n        }.bind(this));\r\n    },\r\n});\r\n"]}