{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\BanCa\\Fish/assets\\Script\\Game\\BanCa\\Fish\\Fish_player.js"],"names":["helper","require","cc","Class","extends","Component","properties","nick","Label","balans","bet","iconCoint","Sprite","typeBet","nodeChangerbet","Node","canhs","default","type","dragonBones","ArmatureDisplay","canh","sungs","sung","nodeCanh","nodeSung","isFire","isLock","sungFix","map","money","init","obj","RedT","fish","bullet","onInfo","data","string","name","numberWithCommas","regGame","onTypeBet","forEach","index","node","active","insertChild","funcCanhEvent1","playAnimation","anim_canh","off","EventObject","LOOP_COMPLETE","on","funcSungEvent1","anim_sung","onChangerTypeBet","self","funcCanhEvent2","funcSungEvent2","onFire","point","checkBet","dialog","showNap","Game","isAuto","onClickAuto","instantiate","getComponent","position","lock","ID","bulletID","getPoint","changerAngle","ponit","send","g","id","f","stop","PhaHuy","shubiao","x","y","isMe","copy","audioFire","AudioSource","volume","volumeHieuUng","nodeAudio","addChild","play","nodeDan","setTimeout","bind","bulletSpeed","otherBullet","v2","angle","positionUser","convertToWorldSpaceAR","position1_1","convertToNodeSpaceAR","misc","radiansToDegrees","Math","atan2","sungFixD","reset"],"mappings":"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","file":"Fish_player.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\BanCa\\Fish","sourcesContent":["\r\nvar helper = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tnick:           cc.Label,\r\n\t\tbalans:         cc.Label,\r\n\t\tbet:            cc.Label,\r\n\t\ticonCoint:      cc.Sprite,\r\n\t\ttypeBet:        0,\r\n\t\tnodeChangerbet: cc.Node,\r\n\t\tcanhs: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype: dragonBones.ArmatureDisplay,\r\n\t\t},\r\n\t\tcanh: dragonBones.ArmatureDisplay,\r\n\r\n\t\tsungs: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype: dragonBones.ArmatureDisplay,\r\n\t\t},\r\n\t\tsung: dragonBones.ArmatureDisplay,\r\n\r\n\t\tnodeCanh:  cc.Node,\r\n\t\tnodeSung:  cc.Node,\r\n\t\tisFire: false,\r\n\t\tisLock: false,\r\n\t\tsungFix: 2,\r\n\t\tmap: 0,\r\n\t\tmoney: 0,\r\n\t},\r\n\tinit: function(obj) {\r\n\t\tthis.RedT = obj;\r\n\t\tthis.fish = null;\r\n\t\tthis.bullet = {};\r\n\t},\r\n\tonInfo: function(data){\r\n\t\tthis.nick.string   = data.name;\r\n\t\tthis.balans.string = helper.numberWithCommas(data.balans);\r\n\t\tthis.money         = data.balans;\r\n\t\tthis.bet.string    = helper.numberWithCommas(this.RedT['typeBet'+this.RedT.regGame][data.typeBet]);\r\n\t\tthis.typeBet       = data.typeBet;\r\n\t\tthis.onTypeBet(data.typeBet);\r\n\t},\r\n\tonTypeBet: function(type){\r\n\t\tthis.canhs.forEach(function(canh, index){\r\n\t\t\tif (type === index) {\r\n\t\t\t\tcanh.node.active = true;\r\n\t\t\t}else{\r\n\t\t\t\tcanh.node.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.sungs.forEach(function(sung, index){\r\n\t\t\tif (type === index) {\r\n\t\t\t\tsung.node.active = true;\r\n\t\t\t}else{\r\n\t\t\t\tsung.node.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.canh = this.canhs[type];\r\n\t\tthis.sung = this.sungs[type];\r\n\t\tthis.sung.node.insertChild(this.bet.node);\r\n\r\n\t\tlet funcCanhEvent1 = function(){\r\n\t\t\tthis.canh.playAnimation(this.RedT.anim_canh[1], 0);\r\n\t\t\tthis.canh.off(dragonBones.EventObject.LOOP_COMPLETE, funcCanhEvent1, this);\r\n\t\t};\r\n\t\tthis.canh.on(dragonBones.EventObject.LOOP_COMPLETE, funcCanhEvent1, this);\r\n\t\tthis.canh.playAnimation(this.RedT.anim_canh[0], 1);\r\n\r\n\t\tlet funcSungEvent1 = function(){\r\n\t\t\tthis.sung.off(dragonBones.EventObject.LOOP_COMPLETE, funcSungEvent1, this);\r\n\t\t};\r\n\t\tthis.sung.on(dragonBones.EventObject.LOOP_COMPLETE, funcSungEvent1, this);\r\n\t\tthis.sung.playAnimation(this.RedT.anim_sung[1], 1);\r\n\t},\r\n\tonChangerTypeBet: function(type){\r\n\t\tlet self = this;\r\n\t\tlet funcCanhEvent1 = function(){\r\n\t\t\tthis.canh.playAnimation(this.RedT.anim_canh[1], 0);\r\n\t\t\tthis.canh.off(dragonBones.EventObject.LOOP_COMPLETE, funcCanhEvent1, this);\r\n\t\t};\r\n\r\n\t\tlet funcCanhEvent2 = function(){\r\n\t\t\tthis.off(dragonBones.EventObject.LOOP_COMPLETE, funcCanhEvent2, this);\r\n\r\n\t\t\tself.canh.node.active = true;\r\n\t\t\tself.canh.on(dragonBones.EventObject.LOOP_COMPLETE, funcCanhEvent1, self);\r\n\t\t\tself.canh.playAnimation(self.RedT.anim_canh[0], 1);\r\n\t\t};\r\n\t\tthis.canh.on(dragonBones.EventObject.LOOP_COMPLETE, funcCanhEvent2, this.canh);\r\n\t\tthis.canh.playAnimation(this.RedT.anim_canh[2], 1);\r\n\r\n\t\tthis.canh = this.canhs[type];\r\n\r\n\t\tlet funcSungEvent1 = function(){\r\n\t\t\tthis.sung.off(dragonBones.EventObject.LOOP_COMPLETE, funcSungEvent1, this);\r\n\t\t};\r\n\r\n\t\tlet funcSungEvent2 = function(){\r\n\t\t\tthis.off(dragonBones.EventObject.LOOP_COMPLETE, funcSungEvent2, this);\r\n\r\n\t\t\tself.sung.node.active = true;\r\n\t\t\tself.sung.on(dragonBones.EventObject.LOOP_COMPLETE, funcSungEvent1, self);\r\n\t\t\tself.sung.playAnimation(self.RedT.anim_sung[1], 1);\r\n\t\t};\r\n\t\tthis.sung.on(dragonBones.EventObject.LOOP_COMPLETE, funcSungEvent2, this.sung);\r\n\t\tthis.sung.playAnimation(this.RedT.anim_sung[2], 1);\r\n\r\n\t\tthis.sung = this.sungs[type];\r\n\t\tthis.sung.node.insertChild(this.bet.node);\r\n\r\n\t\tthis.bet.string = helper.numberWithCommas(this.RedT['typeBet'+this.RedT.regGame][type]);\r\n\t\tthis.typeBet    = type;\r\n\t},\r\n\tonFire: function(point = null){\r\n\t\tlet checkBet = this.RedT['typeBet'+this.RedT.regGame][this.typeBet];\r\n\t\tcheckBet = this.money-checkBet;\r\n\t\tif (checkBet < 0) {\r\n\t\t\tthis.RedT.dialog.showNap(true);\r\n\t\t\tif (this.RedT.Game.isAuto) {\r\n\t\t\t\tthis.RedT.Game.onClickAuto();\r\n\t\t\t}\r\n\t\t\tthis.RedT.Game.isFire = false;\r\n\t\t\tthis.isLock = false;\r\n\t\t}else{\r\n\t\t\tif ((this.RedT.Game.isAuto || this.RedT.Game.isFire || this.isLock) && !this.isFire) {\r\n\t\t\t\tthis.money = checkBet;\r\n\t\t\t\tthis.balans.string = helper.numberWithCommas(checkBet);\r\n\t\t\t\tthis.isFire = true;\r\n\t\t\t\tlet bullet = cc.instantiate(this.RedT.Game.bullet[this.typeBet]);\r\n\t\t\t\tbullet = bullet.getComponent('Fish_bullet');\r\n\t\t\t\tlet position = null;\r\n\t\t\t\tlet lock     = false;\r\n\t\t\t\tlet ID = this.RedT.Game.bulletID++;\r\n\r\n\t\t\t\tthis.bullet[ID] = bullet;\r\n\t\t\t\tif (!!point && !this.isLock) {\r\n\t\t\t\t\tposition = point;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (this.isLock && !!this.fish) {\r\n\t\t\t\t\t\tlock = true;\r\n\t\t\t\t\t\tlet getPoint = this.fish.getPoint();\r\n\t\t\t\t\t\tposition = getPoint.position;\r\n\t\t\t\t\t\tthis.changerAngle(position);\r\n\t\t\t\t\t\tbullet.isLock = true;\r\n\t\t\t\t\t\tthis.fish['bullet'+this.map][ID] = bullet;\r\n\t\t\t\t\t\tthis.RedT.Game.ponit = position;\r\n\t\t\t\t\t\tcc.RedT.send({g:{fish:{bullet:{id:ID, f:this.fish.id}}}});\r\n\t\t\t\t\t\tif (getPoint.stop === true) {\r\n\t\t\t\t\t\t\tthis.fish.PhaHuy(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tposition = this.RedT.Game.shubiao.node.position;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t!lock && cc.RedT.send({g:{fish:{bullet:{id:ID, x:position.x, y:position.y}}}});\r\n\t\t\t\tbullet.id = ID;\r\n\t\t\t\tbullet.isMe = true;\r\n\t\t\t\tbullet.bullet = this.typeBet;\r\n\t\t\t\tbullet.init(this, position);\r\n\r\n\t\t\t\t// Audio\r\n\t\t\t\tlet copy = cc.instantiate(this.RedT.audioFire.node);\r\n\t\t\t\tcopy = copy.getComponent(cc.AudioSource);\r\n\t\t\t\tcopy.volume = this.RedT.volumeHieuUng;\r\n\t\t\t\tthis.RedT.Game.nodeAudio.addChild(copy.node);\r\n\t\t\t\tcopy.play();\r\n\r\n\t\t\t\tthis.RedT.Game.nodeDan.addChild(bullet.node);\r\n\t\t\t\tthis.sung.playAnimation('fire', 1);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tthis.isFire = false;\r\n\t\t\t\t\tthis.onFire();\r\n\t\t\t\t}.bind(this), this.RedT.Game.bulletSpeed);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\totherBullet: function(data){\r\n\t\tthis.balans.string = helper.numberWithCommas(data.money);\r\n\t\tlet position = null;\r\n\t\tlet ID = this.RedT.Game.bulletID++;\r\n\t\tlet bullet = cc.instantiate(this.RedT.Game.bullet[this.typeBet]);\r\n\t\tbullet = bullet.getComponent('Fish_bullet');\r\n\r\n\t\tif (void 0 !== data.f) {\r\n\t\t\tlet fish = this.RedT.Game.fish[data.f];\r\n\t\t\tif (void 0 === fish) {\r\n\t\t\t\treturn void 0;\r\n\t\t\t}\r\n\t\t\tlet getPoint = fish.getPoint();\r\n\t\t\tposition = getPoint.position;\r\n\t\t\tbullet.isLock = true;\r\n\t\t\tfish['bullet'+this.map][ID] = bullet;\r\n\t\t\tif (getPoint.stop === true) {\r\n\t\t\t\tfish.PhaHuy(false);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tposition = cc.v2(data.x, data.y);\r\n\t\t}\r\n\r\n\t\tbullet.init(this, position);\r\n\t\tbullet.bullet = this.typeBet;\r\n\r\n\t\tthis.changerAngle(position);\r\n\r\n\t\tthis.RedT.Game.nodeDan.addChild(bullet.node);\r\n\t\tthis.sung.playAnimation('fire', 1);\r\n\t},\r\n\tchangerAngle: function(angle){\r\n\t\tlet positionUser = this.RedT.Game.node.convertToWorldSpaceAR(angle);\r\n\t\tlet position1_1 = this.node.convertToNodeSpaceAR(positionUser);\r\n\t\tposition1_1 = cc.misc.radiansToDegrees(Math.atan2(position1_1.x*this.RedT.Game.sungFixD[this.sungFix].x, position1_1.y*this.RedT.Game.sungFixD[this.sungFix].y));\r\n\t\t///**\r\n\t\tif(position1_1 > 90){\r\n\t\t\t//position1_1 = 90;\r\n\t\t\tthis.isLock = this.isFire = false;\r\n\t\t}\r\n\t\tif(position1_1 < -90){\r\n\t\t\t//position1_1 = -90;\r\n\t\t\tthis.isLock = this.isFire = false;\r\n\t\t}\r\n\t\tthis.nodeSung.angle = position1_1;\r\n\t\tthis.nodeCanh.angle = this.nodeSung.angle;\r\n\t},\r\n\treset: function(){\r\n\r\n\t},\r\n});\r\n"]}