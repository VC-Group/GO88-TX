{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MiniPoker/assets\\Script\\Game\\MiniPoker\\MiniPoker.js"],"names":["helper","require","MiniPoker_reel","cc","Class","extends","Component","properties","background","Node","buttonSpin","buttonAuto","buttonSpeed","buttonStop","reels","default","type","font","BitmapFont","bet","notice","card","Prefab","cardf","phien","Label","hu","cuoc","isAuto","isSpeed","isSpin","init","obj","RedT","Top","Dialog","MiniPoker_Top","LichSu","MiniPoker_LichSu","setting","minipoker","scale","node","runScale","data","getComponent","config","check","localStorage","getItem","active","util","fontEffect","position","intChangerBet","onClickSpeed","onClickAuto","onLoad","self","ttOffset","forEach","reel","onEnable","onGetHu","on","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","onDisable","off","onCloseGame","e","setTop","v2","touch","getLocationX","x","getLocationY","y","openGame","audio","playClick","IS_LOGIN","setItem","inGame","dialog","showSignIn","closeGame","playUnClick","random","newG","autoSpin","index","spin","onSpin","pauseSystemEvents","children","offSpin","resumeSystemEvents","event","onGetSpin","color","Color","WHITE","onClickStop","name","bind","changerBet","target","speed","onData","status","win","winT","text","winC","code","spriteFrame","getCard","string","log","top","addNotice","instantiate","prefabMiniNotice","noticeComponent","addChild","parent","insertChild","hieuUng","nohu","PrefabNoHu","Animation","Play","huong","callFunc","playEf","numberTo","runAction","sequence","delayTime","Finish","destroy","nodeEfect","play","BigWin","prefabBigWin","BigWinFinish","temp","addComponent","numberWithCommas","fontCong","lineHeight","fontSize","moveTo","timeOut","setTimeout","topHu","result","filter","s","getOnlyNumberInString","send","g","mini_poker","stop","clearTimeout"],"mappings":"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","file":"MiniPoker.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MiniPoker","sourcesContent":["\r\nvar helper         = require('Helper');\r\nvar MiniPoker_reel = require('MiniPoker_reel');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tbackground:     cc.Node,\r\n\t\tbuttonSpin:     cc.Node,\r\n\t\tbuttonAuto:     cc.Node,\r\n\t\tbuttonSpeed:    cc.Node,\r\n\t\tbuttonStop:     cc.Node,\r\n\t\treels: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype: MiniPoker_reel,\r\n\t\t},\r\n\t\tfont: cc.BitmapFont,\r\n\t\tbet: cc.Node,\r\n\t\tnotice: cc.Node,\r\n\t\tcard:  cc.Prefab,\r\n\t\tcardf: cc.Prefab,\r\n\t\tphien: cc.Label,\r\n\t\thu:    cc.Label,\r\n\t\tcuoc:  \"\",\r\n\t\tisAuto:  false,\r\n\t\tisSpeed: false,\r\n\t\tisSpin:  false,\r\n\t},\r\n\tinit(obj){\r\n\t\tthis.RedT = obj;\r\n\t\tthis.Top    = obj.Dialog.MiniPoker_Top;\r\n\t\tthis.LichSu = obj.Dialog.MiniPoker_LichSu;\r\n\t\tcc.RedT.setting.minipoker = cc.RedT.setting.minipoker || {scale:1, bet: this.cuoc};\r\n\r\n\t\tthis.node.runScale = false;\r\n\r\n\t\tthis.card.data.getComponent('Card')\r\n\t\t.config();\r\n\r\n\t\tvar check = localStorage.getItem('minipoker');\r\n\t\tif (check == \"true\") {\r\n\t\t\tthis.node.active = true;\r\n\t\t}\r\n\r\n\t\tif (void 0 === cc.RedT.util.fontEffect) {\r\n\t\t\tcc.RedT.util.fontEffect = this.font;\r\n\t\t}\r\n\t\tif (void 0 !== cc.RedT.setting.minipoker.position) {\r\n\t\t\tthis.node.position = cc.RedT.setting.minipoker.position;\r\n\t\t}\r\n\r\n\t\tif (void 0 !== cc.RedT.setting.minipoker.bet && cc.RedT.setting.minipoker.bet != this.cuoc) {\r\n\t\t\tthis.intChangerBet();\r\n\t\t}\r\n\t\tif (void 0 !== cc.RedT.setting.minipoker.isSpeed && this.isSpeed != cc.RedT.setting.minipoker.isSpeed) {\r\n\t\t\tthis.onClickSpeed();\r\n\t\t}\r\n\t\tif (void 0 !== cc.RedT.setting.minipoker.isAuto && this.isAuto != cc.RedT.setting.minipoker.isAuto) {\r\n\t\t\tthis.onClickAuto();\r\n\t\t}\r\n\t},\r\n\tonLoad () {\r\n\t\tvar self = this;\r\n\t\tthis.data     = null;\r\n\t\tthis.ttOffset = null;\r\n\r\n\t\tthis.reels.forEach(function(reel){\r\n\t\t\treel.init(self);\r\n\t\t});\r\n\t},\r\n\tonEnable: function() {\r\n\t\tthis.onGetHu();\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.background.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t// this.background.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\t},\r\n\tonDisable: function() {\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.background.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t// this.background.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\t\tthis.onCloseGame();\r\n\t},\r\n\teventStart: function(e){\r\n\t\tthis.setTop();\r\n\t\tthis.ttOffset  = cc.v2(e.touch.getLocationX() - this.node.position.x, e.touch.getLocationY() - this.node.position.y)\r\n\t},\r\n\teventMove: function(e){\r\n\t\tthis.node.position = cc.v2(e.touch.getLocationX() - this.ttOffset.x, e.touch.getLocationY() - this.ttOffset.y)\r\n\t},\r\n\teventEnd: function(){\r\n\t\tcc.RedT.setting.minipoker.position = this.node.position;\r\n\t},\r\n\topenGame:function(){\r\n\t\tcc.RedT.audio.playClick();\r\n\t\tif (cc.RedT.IS_LOGIN){\r\n\t\t\tthis.node.active = !0;\r\n\t\t\tlocalStorage.setItem('minipoker', true);\r\n\t\t\tthis.setTop();\r\n\t\t}\r\n\t\telse\r\n\t\t\tcc.RedT.inGame.dialog.showSignIn();\r\n\t},\r\n\tcloseGame:function(){\r\n\t\tcc.RedT.audio.playUnClick();\r\n\t\tthis.node.active = !1;\r\n\t\tlocalStorage.setItem('minipoker', false);\r\n\t},\r\n\trandom: function(newG = false){\r\n\t\tthis.reels.forEach(function(reel) {\r\n\t\t\treel.random(newG);\r\n\t\t});\r\n\t},\r\n\tautoSpin: function(){\r\n\t\tthis.random();\r\n\t\tthis.reels.forEach(function(reel, index) {\r\n\t\t\treel.spin(index);\r\n\t\t});\r\n\t},\r\n\tonSpin: function(){\r\n\t\tthis.buttonSpin.pauseSystemEvents();\r\n\t\tthis.bet.children.forEach(function(bet){\r\n\t    \tbet.pauseSystemEvents();\r\n\t    });\r\n\t},\r\n\toffSpin: function(){\r\n\t\tthis.isSpin = false;\r\n\t\tthis.buttonStop.active = this.isSpin ? (this.isAuto ? true : false) : false;\r\n\t\tthis.buttonSpin.resumeSystemEvents();\r\n\t\tthis.bet.children.forEach(function(bet){\r\n\t\t\tif(bet.children[0].active){\r\n\t\t\t\tbet.resumeSystemEvents();\r\n\t\t\t}\r\n    \t});\r\n\t},\r\n\tspin: function(event){\r\n\t\tif (!this.isSpin) {\r\n\t\t\tthis.isSpin = true;\r\n\t\t\tthis.onSpin();\r\n\t\t\tthis.onGetSpin();\r\n\t\t}\r\n\t},\r\n\tonClickSpeed: function(){\r\n\t\tthis.isSpeed               = cc.RedT.setting.minipoker.isSpeed = !this.isSpeed;\r\n\t\tthis.buttonSpeed.color     = this.isSpeed ? cc.Color.WHITE : cc.color(136,136,136);\r\n\t},\r\n\tonClickAuto: function(){\r\n\t\tthis.isAuto               = cc.RedT.setting.minipoker.isAuto = !this.isAuto;\r\n\t\tthis.buttonAuto.color     = this.isAuto ? cc.Color.WHITE : cc.color(136,136,136);\r\n\t\tthis.buttonStop.active    = this.isSpin ? (this.isAuto ? true : false) : false;\r\n\t},\r\n\tonClickStop: function(){\r\n        this.onClickAuto();\r\n        this.buttonStop.active = false;\r\n    },\r\n\tintChangerBet: function(){\r\n\t\tthis.bet.children.forEach(function(obj){\r\n\t\t\tif (obj.name === cc.RedT.setting.minipoker.bet) {\r\n\t\t\t\tthis.cuoc = obj.name;\r\n\t\t\t\tobj.children[0].active = false;\r\n\t\t\t\tobj.children[1].active = true;\r\n\t\t\t\tobj.pauseSystemEvents();\r\n\t\t\t}else{\r\n\t\t\t\tobj.children[0].active = true;\r\n\t\t\t\tobj.children[1].active = false;\r\n\t\t\t\tobj.resumeSystemEvents();\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\t},\r\n\tchangerBet: function(event, bet){\r\n\t\tthis.cuoc = cc.RedT.setting.minipoker.bet = event.target.name;\r\n\t\tthis.bet.children.forEach(function(obj){\r\n\t\t\tif (obj.name === this.cuoc) {\r\n\t\t\t\tobj.children[0].active = false;\r\n\t\t\t\tobj.children[1].active = true;\r\n\t\t\t\tobj.pauseSystemEvents();\r\n\t\t\t}else{\r\n\t\t\t\tobj.children[0].active = true;\r\n\t\t\t\tobj.children[1].active = false;\r\n\t\t\t\tobj.resumeSystemEvents();\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\t\tthis.onGetHu();\r\n\t},\r\n\tspeed: function(){\r\n\t\treturn this.isSpeed ? 1.2 : 2.5;\r\n\t},\r\n\tonData: function(data){\r\n\t\tvar self = this;\r\n\t\tif (void 0 !== data.status) {\r\n\t\t\tif (data.status === 1) {\r\n\t\t\t\tthis.buttonStop.active = this.isAuto ? true : false;\r\n\t\t\t\tthis.win   = data.win;\r\n\t\t\t\tthis.winT  = data.text;\r\n\t\t\t\tthis.winC  = data.code;\r\n\t\t\t\tdata.card.forEach(function(card, index){\r\n\t\t\t\t\tself.reels[index].card[0].spriteFrame = cc.RedT.util.card.getCard(card.card, card.type);\r\n\t\t\t\t});\r\n\t\t\t\tthis.autoSpin();\r\n\t\t\t}else{\r\n\t\t\t\tthis.offSpin();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (void 0 !== data.phien) {\r\n\t\t\tthis.phien.string = \"#\" + data.phien;\r\n\t\t}\r\n\t\tif (void 0 !== data.log) {\r\n\t\t\tthis.LichSu.onData(data.log);\r\n\t\t}\r\n\t\tif (void 0 !== data.top) {\r\n\t\t\tthis.Top.onData(data.top);\r\n\t\t}\r\n\t\tif (void 0 !== data.notice) {\r\n\t\t\tthis.addNotice(data.notice);\r\n\t\t}\r\n\t},\r\n\taddNotice:function(text){\r\n\t\tlet notice = cc.instantiate(this.RedT.prefabMiniNotice);\r\n\t\tlet noticeComponent = notice.getComponent('mini_warning');\r\n\t\tnoticeComponent.text.string = text;\r\n\t\tthis.notice.addChild(notice);\r\n\t},\r\n\tsetTop:function(){\r\n\t\tcc.RedT.setting.minipoker.scale = 1;\r\n\t\tthis.node.parent.insertChild(this.node);\r\n\t\tthis.RedT.setTop(this.node);\r\n\t},\r\n\thieuUng: function(){\r\n    \tif (this.win > 0) {\r\n    \t\tif (this.winC === 2) {\r\n    \t\t\t// Nổ Hũ\r\n    \t\t\tif (this.isAuto == true) {\r\n    \t\t\t\tthis.onClickStop();\r\n    \t\t\t}\r\n\r\n    \t\t\tvar nohu = cc.instantiate(this.RedT.PrefabNoHu);\r\n\t\t\t\tnohu = nohu.getComponent(cc.Animation);\r\n\t\t\t\tvar text = nohu.node.children[6].getComponent(cc.Label);\r\n\r\n\t\t\t\tvar Play = function(){\r\n\t\t\t\t\tvar huong = cc.callFunc(function(){\r\n\t\t\t\t\t\tcc.RedT.audio.playEf('winHu');\r\n\t\t\t\t\t\thelper.numberTo(text, 0, this.win, 1000, true);\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\tnohu.node.runAction(cc.sequence(cc.delayTime(0.25), huong));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar Finish = function(){\r\n\t\t\t\t\tnohu.node.destroy();\r\n\t\t\t\t\tthis.hieuUng();\r\n\t\t\t\t};\r\n\t\t\t\tthis.RedT.nodeEfect.addChild(nohu.node);\r\n\t\t\t\tnohu.on('play',     Play,   this);\r\n    \t\t\tnohu.on('finished', Finish, this);\r\n    \t\t\tnohu.play();\r\n    \t\t}else if (this.winC === 1) {\r\n    \t\t\t// Thắng lớn\r\n\t\t\t\tvar BigWin = cc.instantiate(this.RedT.prefabBigWin);\r\n\t\t\t\tBigWin     = BigWin.getComponent(cc.Animation);\r\n\t\t\t\tvar BigWinFinish = function(){\r\n\t\t\t\t\tBigWin.node.destroy();\r\n\t\t\t\t\tthis.hieuUng();\r\n\t\t\t\t}\r\n\t\t\t\tBigWin.on('finished', BigWinFinish, this);\r\n\t\t\t\tBigWin.node.bet = this.win;\r\n\t\t\t\tBigWin.node.position = cc.v2(0, 80);\r\n\t\t\t\tthis.notice.addChild(BigWin.node);\r\n\t\t\t\tthis.win = 0;\r\n    \t\t}else{\r\n    \t\t\tvar temp = new cc.Node;\r\n\t\t\t\ttemp.addComponent(cc.Label);\r\n\t\t\t\ttemp = temp.getComponent(cc.Label);\r\n\t\t\t\ttemp.string = '+'+ helper.numberWithCommas(this.win);\r\n\t\t\t\ttemp.font = cc.RedT.util.fontCong;\r\n\t\t\t\ttemp.lineHeight = 130;\r\n\t\t\t\ttemp.fontSize   = 20;\r\n\t\t\t\tthis.notice.addChild(temp.node);\r\n\t\t\t\ttemp.node.runAction(cc.sequence(cc.moveTo(this.isSpeed ? 2 : 3.5, cc.v2(0, 140)), cc.callFunc(function(){\r\n\t\t\t\t\ttemp.node.destroy();\r\n\t\t\t\t\tthis.hieuUng();\r\n\t\t\t\t}, this)));\r\n    \t\t\tthis.addNotice(this.winT);\r\n    \t\t\tthis.win = 0;\r\n    \t\t}\r\n    \t\tthis.winC = 0;\r\n    \t}else{\r\n    \t\tif (this.isAuto) {\r\n    \t\t\tthis.timeOut = setTimeout(function(){\r\n\t\t\t\t\tthis.onGetSpin();\r\n\t\t\t\t}.bind(this), this.isSpeed ? 250 : 1000);\r\n    \t\t}else{\r\n    \t\t\tthis.offSpin();\r\n    \t\t}\r\n    \t}\r\n    },\r\n\tonGetHu: function(){\r\n\t\tif (this.node.active && void 0 !== cc.RedT.setting.topHu.data) {\r\n\t\t\tlet result = cc.RedT.setting.topHu.data['mini_poker'].filter(function(temp){\r\n\t\t\t\treturn temp.type == this.cuoc;\r\n\t\t\t}.bind(this));\r\n\t\t\tlet s = helper.getOnlyNumberInString(this.hu.string);\r\n\t\t\tlet bet = result[0].bet;\r\n\t\t\tif (s-bet != 0){\r\n\t\t\t\thelper.numberTo(this.hu, s, bet, 2000, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonGetSpin: function(){\r\n\t\tcc.RedT.send({g:{mini_poker:{spin:{cuoc:this.cuoc}}}});\r\n\t},\r\n\tonCloseGame: function(){\r\n    \tthis.isSpin = false;\r\n    \tthis.reels.forEach(function(reel) {\r\n\t\t\treel.stop();\r\n\t\t});\r\n\t\tthis.offSpin();\r\n\t\tvoid 0 !== this.timeOut && clearTimeout(this.timeOut);\r\n    },\r\n});\r\n"]}