{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MiniPoker\\MiniPoker_LichSu/assets\\Script\\Game\\MiniPoker\\MiniPoker_LichSu\\MiniPoker_LichSu.js"],"names":["Helper","require","cc","Class","extends","Component","properties","page","Prefab","content","Node","red","isLoad","onLoad","instantiate","y","node","addChild","getComponent","children","map","obj","init","onEnable","get_data","RedT","send","g","mini_poker","log","onData","data","onSet","kmess","total","forEach","i","dataT","active","bg","time","string","getStringDateByTime","phien","id","bet","numberWithCommas","card","index","spriteFrame","util","getCard","kq","type","win","bind","reset","Promise","all"],"mappings":"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","file":"MiniPoker_LichSu.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\MiniPoker\\MiniPoker_LichSu","sourcesContent":["\r\nvar Helper = require('Helper')\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        page:     cc.Prefab,\r\n        content:  cc.Node,\r\n        red:      true,\r\n        isLoad:   false,\r\n    },\r\n    onLoad () {\r\n        var page = cc.instantiate(this.page);\r\n        page.y = -294;\r\n        this.node.addChild(page);\r\n        this.page = page.getComponent('Pagination');\r\n        this.content = this.content.children.map(function(obj){\r\n            return obj.getComponent('MiniPoker_LichSu_item');\r\n        });\r\n        this.page.init(this);\r\n    },\r\n    onEnable: function() {\r\n        !this.isLoad && this.get_data();\r\n    },\r\n    get_data: function(page = 1){\r\n        this.isLoad = true;\r\n        cc.RedT.send({g:{mini_poker:{log:{red:this.red, page:page}}}});\r\n    },\r\n    onData: function(data){\r\n        this.page.onSet(data.page, data.kmess, data.total)\r\n        this.content.forEach(function(obj, i){\r\n            var dataT = data.data[i];\r\n            if (void 0 !== dataT) {\r\n                obj.node.active = true;\r\n                obj.bg.active = i%2;\r\n                obj.time.string = Helper.getStringDateByTime(dataT.time);\r\n                obj.phien.string = dataT.id;\r\n                obj.bet.string = Helper.numberWithCommas(dataT.bet);\r\n                obj.card.forEach(function(card, index){\r\n                    card.spriteFrame = cc.RedT.util.card.getCard(dataT.kq[index].card, dataT.kq[index].type);\r\n                });\r\n                obj.win.string = Helper.numberWithCommas(dataT.win);\r\n            }else{\r\n                obj.node.active = false;\r\n            }\r\n        }.bind(this));\r\n    },\r\n    reset: function(){\r\n        this.isLoad    = false;\r\n        Promise.all(this.content.children.map(function(obj){\r\n            obj.active = false\r\n        }))\r\n    },\r\n});\r\n"]}