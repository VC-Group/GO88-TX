{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\CoTrang/assets\\Script\\Game\\CoTrang\\CoTrang_history.js"],"names":["Helper","require","cc","Class","extends","Component","properties","page","Prefab","content","Node","red","onLoad","instantiate","y","node","addChild","getComponent","Promise","all","children","map","obj","then","tab","init","onEnable","get_data","RedT","send","g","longlan","log","onData","data","self","onSet","kmess","total","i","dataT","active","time","string","getStringDateByTime","phien","id","cuoc","numberWithCommas","bet","win","line"],"mappings":";;;;;;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAUL,GAAGM,MADL;AAERC,iBAAUP,GAAGQ,IAFL;AAGRC,aAAU;AAHF,KAHP;AAQLC,UARK,oBAQK;AAAA;;AACN,YAAIL,OAAOL,GAAGW,WAAH,CAAe,KAAKN,IAApB,CAAX;AACAA,aAAKO,CAAL,GAAS,CAAC,GAAV;AACA,aAAKC,IAAL,CAAUC,QAAV,CAAmBT,IAAnB;AACA,aAAKA,IAAL,GAAYA,KAAKU,YAAL,CAAkB,YAAlB,CAAZ;AACAC,gBAAQC,GAAR,CAAY,KAAKV,OAAL,CAAaW,QAAb,CAAsBC,GAAtB,CAA0B,UAASC,GAAT,EAAa;AAC/C,mBAAOA,IAAIL,YAAJ,CAAiB,oBAAjB,CAAP;AACH,SAFW,CAAZ,EAGCM,IAHD,CAGM,eAAO;AACT,kBAAKd,OAAL,GAAee,GAAf;AACH,SALD;AAMA,aAAKjB,IAAL,CAAUkB,IAAV,CAAe,IAAf;AACH,KApBI;;AAqBLC,cAAU,oBAAW;AACjB,aAAKC,QAAL;AACH,KAvBI;AAwBLA,cAAU,oBAAkB;AAAA,YAATpB,IAAS,uEAAF,CAAE;;AACxBL,WAAG0B,IAAH,CAAQC,IAAR,CAAa,EAACC,GAAE,EAACC,SAAQ,EAACC,KAAI,EAACrB,KAAI,KAAKA,GAAV,EAAeJ,MAAKA,IAApB,EAAL,EAAT,EAAH,EAAb;AACH,KA1BI;AA2BL0B,YAAQ,gBAASC,IAAT,EAAc;AAClB,YAAIC,OAAO,IAAX;AACA,aAAK5B,IAAL,CAAU6B,KAAV,CAAgBF,KAAK3B,IAArB,EAA2B2B,KAAKG,KAAhC,EAAuCH,KAAKI,KAA5C;AACApB,gBAAQC,GAAR,CAAY,KAAKV,OAAL,CAAaY,GAAb,CAAiB,UAASC,GAAT,EAAciB,CAAd,EAAgB;AACzC,gBAAIC,QAAQN,KAAKA,IAAL,CAAUK,CAAV,CAAZ;AACA,gBAAI,KAAK,CAAL,KAAWC,KAAf,EAAsB;AAClBlB,oBAAIP,IAAJ,CAAS0B,MAAT,GAAmB,IAAnB;AACAnB,oBAAIoB,IAAJ,CAASC,MAAT,GAAmB3C,OAAO4C,mBAAP,CAA2BJ,MAAME,IAAjC,CAAnB;AACApB,oBAAIuB,KAAJ,CAAUF,MAAV,GAAmBH,MAAMM,EAAzB;AACAxB,oBAAIyB,IAAJ,CAASJ,MAAT,GAAmB3C,OAAOgD,gBAAP,CAAwBR,MAAMS,GAA9B,CAAnB;AACA3B,oBAAI4B,GAAJ,CAAQP,MAAR,GAAmBH,MAAMW,IAAN,GAAa,OAAhC;AACA7B,oBAAI6B,IAAJ,CAASR,MAAT,GAAmB3C,OAAOgD,gBAAP,CAAwBR,MAAMU,GAA9B,CAAnB;AACH,aAPD,MAOK;AACD5B,oBAAIP,IAAJ,CAAS0B,MAAT,GAAkB,KAAlB;AACH;AACJ,SAZW,CAAZ;AAaH;AA3CI,CAAT","file":"CoTrang_history.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\CoTrang","sourcesContent":["\r\nvar Helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        page:     cc.Prefab,\r\n        content:  cc.Node,\r\n        red:      true,\r\n    },\r\n    onLoad () {\r\n        var page = cc.instantiate(this.page);\r\n        page.y = -232;\r\n        this.node.addChild(page);\r\n        this.page = page.getComponent('Pagination');\r\n        Promise.all(this.content.children.map(function(obj){\r\n            return obj.getComponent('VQRed_history_item');\r\n        }))\r\n        .then(tab => {\r\n            this.content = tab;\r\n        })\r\n        this.page.init(this);\r\n    },\r\n    onEnable: function() {\r\n        this.get_data();\r\n    },\r\n    get_data: function(page = 1){\r\n        cc.RedT.send({g:{longlan:{log:{red:this.red, page:page}}}});\r\n    },\r\n    onData: function(data){\r\n        var self = this;\r\n        this.page.onSet(data.page, data.kmess, data.total);\r\n        Promise.all(this.content.map(function(obj, i){\r\n            var dataT = data.data[i];\r\n            if (void 0 !== dataT) {\r\n                obj.node.active  = true;\r\n                obj.time.string  = Helper.getStringDateByTime(dataT.time);\r\n                obj.phien.string = dataT.id;\r\n                obj.cuoc.string  = Helper.numberWithCommas(dataT.bet);\r\n                obj.win.string   = dataT.line + \" DÃ²ng\";\r\n                obj.line.string  = Helper.numberWithCommas(dataT.win);\r\n            }else{\r\n                obj.node.active = false;\r\n            }\r\n        }))\r\n    },\r\n});\r\n"]}