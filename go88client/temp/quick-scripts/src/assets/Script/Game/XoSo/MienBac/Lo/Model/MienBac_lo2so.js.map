{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\XoSo\\MienBac\\Lo\\Model/assets\\Script\\Game\\XoSo\\MienBac\\Lo\\Model\\MienBac_lo2so.js"],"names":["helper","require","BrowserUtil","cc","Class","extends","Component","properties","node_select","Node","item_select","Prefab","soCuoc","Label","soDiem","tongTien","inputSoDiem","EditBox","max","countSelect","giaDiem","diemToiDa","game","onLoad","arr","i","ooT","instantiate","getComponent","init","text","string","addZero10","addChild","node","onEnable","sys","isBrowser","inputAddEvent","onUpdateDiem","bind","onDisable","inputRemoveEvent","refresh","forEach","obj","select","updateTien","refreshH","onChanger","RedT","inGame","addNotice","onChangerDiem","value","numberWithCommas","getOnlyNumberInString","e","target","valueNumb","diem","onClickHuy","onClickCuoc","isEmpty","data","so","send","g","xs","mb"],"mappings":"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","file":"MienBac_lo2so.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\XoSo\\MienBac\\Lo\\Model","sourcesContent":["\r\nvar helper = require('Helper');\r\nvar BrowserUtil = require('BrowserUtil');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tnode_select: cc.Node,\r\n\t\titem_select: cc.Prefab,\r\n\t\tsoCuoc:      cc.Label,\r\n\t\tsoDiem:      cc.Label,\r\n\t\ttongTien:    cc.Label,\r\n\t\tinputSoDiem: cc.EditBox,\r\n\t\tmax:         10,\r\n\t\tcountSelect: 0,\r\n\t\tgiaDiem:     22000,\r\n\t\tdiemToiDa:   1000000,\r\n\t\tgame:        '',\r\n\t},\r\n\tonLoad() {\r\n\t\tlet arr = [];\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tlet ooT = cc.instantiate(this.item_select);\r\n\t\t\tooT = ooT.getComponent('XoSo_select_item');\r\n\t\t\tooT.init(this);\r\n\t\t\tooT.text.string = helper.addZero10(i);\r\n\t\t\tthis.node_select.addChild(ooT.node);\r\n\t\t\tarr[i] = ooT;\r\n\t\t}\r\n\t\tthis.node_select = arr;\r\n\t\tarr = null;\r\n\t},\r\n\tonEnable: function () {\r\n\t\tif (cc.sys.isBrowser) {\r\n\t\t\tBrowserUtil.inputAddEvent(this.inputSoDiem, 'input', this.onUpdateDiem.bind(this));\r\n\t\t}\r\n\t},\r\n\tonDisable: function () {\r\n\t\tif (cc.sys.isBrowser) {\r\n\t\t\tBrowserUtil.inputRemoveEvent(this.inputSoDiem, 'input', this.onUpdateDiem.bind(this));\r\n\t\t}\r\n\t},\r\n\trefresh: function() {\r\n\t\tlet text = '';\r\n\t\tthis.node_select.forEach(function(obj){\r\n\t\t\tif (obj.select) {\r\n\t\t\t\ttext += obj.text.string + ', ';\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.soCuoc.string = text;\r\n\t\tthis.updateTien();\r\n\t},\r\n\trefreshH: function(obj) {\r\n\t\tif (obj.select === true) {\r\n\t\t\tthis.countSelect++;\r\n\t\t}else{\r\n\t\t\tthis.countSelect--;\r\n\t\t}\r\n\t\tif (this.countSelect > this.max) {\r\n\t\t\tobj.onChanger();\r\n\t\t\tthis.countSelect = this.max;\r\n\t\t\tcc.RedT.inGame.addNotice('1 Vé cược tối đa ' + this.max + ' Số...');\r\n\t\t}\r\n\t\tif (this.countSelect < 0) {\r\n\t\t\tthis.countSelect = 0;\r\n\t\t}\r\n\t\tthis.refresh();\r\n\t},\r\n\tonChangerDiem: function(){\r\n\t\tvar value = helper.numberWithCommas(helper.getOnlyNumberInString(this.inputSoDiem.string));\r\n\t\tthis.inputSoDiem.string = value == '0' ? '' : value;\r\n\t},\r\n\tonUpdateDiem: function(e){\r\n\t\tlet value = helper.numberWithCommas(helper.getOnlyNumberInString(e.target.value));\r\n\t\tvalue = value === '0' ? '' : value;\r\n\t\tlet valueNumb = helper.getOnlyNumberInString(value)*1;\r\n\t\tif (valueNumb > this.diemToiDa) {\r\n\t\t\tvalue = helper.numberWithCommas(this.diemToiDa);\r\n\t\t\tcc.RedT.inGame.addNotice('Tối đa ' + value + ' điểm cho mỗi Vé.');\r\n\t\t}\r\n\t\te.target.value = value;\r\n\t\tthis.soDiem.string = !!value ? value : '0';\r\n\t\tthis.inputSoDiem.string = value;\r\n\t\tthis.updateTien();\r\n\t},\r\n\tupdateTien: function(){\r\n\t\tlet diem = helper.getOnlyNumberInString(this.soDiem.string)*1;\r\n\t\tthis.tongTien.string = helper.numberWithCommas(diem*this.giaDiem*this.countSelect);\r\n\t},\r\n\tonClickHuy: function(){\r\n\t\tthis.soCuoc.string      = '';\r\n\t\tthis.soDiem.string      = '0';\r\n\t\tthis.tongTien.string    = '0';\r\n\t\tthis.inputSoDiem.string = '';\r\n\t\tthis.countSelect        = 0;\r\n\t\tthis.node_select.forEach(function(obj){\r\n\t\t\tif (obj.select) {\r\n\t\t\t\tobj.onChanger();\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tonClickCuoc: function(){\r\n\t\tif(helper.isEmpty(this.soCuoc.string)) {\r\n\t\t\tcc.RedT.inGame.addNotice('Vui lòng chọn số muốn cược..');\r\n\t\t} else if(this.soDiem.string === '0'){\r\n\t\t\tcc.RedT.inGame.addNotice('Vui lòng nhập điểm cược..');\r\n\t\t} else {\r\n\t\t\tvar data = {};\r\n\t\t\tdata[this.game] = {so:this.soCuoc.string, diem:helper.getOnlyNumberInString(this.soDiem.string)};\r\n\t\t\tcc.RedT.send({g:{xs:{mb:data}}});\r\n\t\t}\r\n\t},\r\n});\r\n"]}