{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\XoSo\\MienBac\\Lo\\Model/assets\\Script\\Game\\XoSo\\MienBac\\Lo\\Model\\MienBac_lo3so.js"],"names":["helper","require","BrowserUtil","cc","Class","extends","Component","properties","head_select","Node","node_select","item_select","Prefab","soCuoc","Label","soDiem","tongTien","inputSoDiem","EditBox","max","countSelect","giaDiem","diemToiDa","game","head","onLoad","arr","i","ooT","instantiate","getComponent","init","text","string","numberPad","addChild","node","onEnable","sys","isBrowser","inputAddEvent","onUpdateDiem","bind","onDisable","inputRemoveEvent","onSelectH","event","self","name","target","number","children","forEach","obj","pauseSystemEvents","opacity","resumeSystemEvents","selectOff","data","length","select","selectOn","refresh","push","join","updateTien","refreshH","onChanger","RedT","inGame","addNotice","onChangerDiem","value","numberWithCommas","getOnlyNumberInString","e","valueNumb","diem","onClickHuy","onClickCuoc","isEmpty","so","send","g","xs","mb"],"mappings":"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","file":"MienBac_lo3so.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\XoSo\\MienBac\\Lo\\Model","sourcesContent":["\r\nvar helper = require('Helper');\r\nvar BrowserUtil = require('BrowserUtil');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\thead_select: cc.Node,\r\n\t\tnode_select: cc.Node,\r\n\t\titem_select: cc.Prefab,\r\n\t\tsoCuoc:      cc.Label,\r\n\t\tsoDiem:      cc.Label,\r\n\t\ttongTien:    cc.Label,\r\n\t\tinputSoDiem: cc.EditBox,\r\n\t\tmax:         8,\r\n\t\tcountSelect: 0,\r\n\t\tgiaDiem:     22000,\r\n\t\tdiemToiDa:   1000000,\r\n\t\tgame:        '',\r\n\t\thead:        '100',\r\n\t},\r\n\tonLoad() {\r\n\t\tlet arr = [];\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tlet ooT = cc.instantiate(this.item_select);\r\n\t\t\tooT = ooT.getComponent('XoSo_select_item');\r\n\t\t\tooT.init(this);\r\n\t\t\tooT.text.string = helper.numberPad(i, 3);\r\n\t\t\tthis.node_select.addChild(ooT.node);\r\n\t\t\tarr[i] = ooT;\r\n\t\t}\r\n\t\tthis.node_select = arr;\r\n\t\tarr = null;\r\n\t},\r\n\tonEnable: function () {\r\n\t\tif (cc.sys.isBrowser) {\r\n\t\t\tBrowserUtil.inputAddEvent(this.inputSoDiem, 'input', this.onUpdateDiem.bind(this));\r\n\t\t}\r\n\t},\r\n\tonDisable: function () {\r\n\t\tif (cc.sys.isBrowser) {\r\n\t\t\tBrowserUtil.inputRemoveEvent(this.inputSoDiem, 'input', this.onUpdateDiem.bind(this));\r\n\t\t}\r\n\t},\r\n\tonSelectH: function(event){\r\n\t\tlet self   = this;\r\n\t\tlet name   = event.target.name;\r\n\t\tlet number = name>>0;\r\n\t\tthis.head  = name;\r\n\t\tthis.head_select.children.forEach(function(obj){\r\n\t\t\tif (obj.name === name) {\r\n\t\t\t\tobj.pauseSystemEvents();\r\n                obj.opacity = 255;\r\n\t\t\t}else{\r\n\t\t\t\tobj.resumeSystemEvents();\r\n                obj.opacity = 99;\r\n\t\t\t}\r\n\t\t});\r\n\t\tfor (let i = 0; i < 100; i++) {\r\n\t\t\tthis.node_select[i].text.string = helper.numberPad(i+number, 3);\r\n\t\t}\r\n\t\tself.node_select.forEach(function(node_select){\r\n\t\t\t\tnode_select.selectOff();\r\n\t\t});\r\n\t\tthis.head_select.children.forEach(function(obj){\r\n\t\t\tif (void 0 !== obj.data && obj.data.length > 0) {\r\n\t\t\t\tobj.data.forEach(function(select){\r\n\t\t\t\t\tself.node_select.forEach(function(node_select){\r\n\t\t\t\t\t\tif (node_select.text.string === select) {\r\n\t\t\t\t\t\t\tnode_select.selectOn();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\trefresh: function() {\r\n\t\tlet self = this;\r\n\t\tlet arr = [];\r\n\t\tlet text = '';\r\n\t\tthis.node_select.forEach(function(obj){\r\n\t\t\tif (obj.select) {\r\n\t\t\t\tarr.push(obj.text.string);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.head_select.children.forEach(function(obj){\r\n\t\t\tif (obj.name === self.head) {\r\n\t\t\t\tobj.data = arr;\r\n\t\t\t}\r\n\t\t\tif (void 0 !== obj.data && obj.data.length > 0) {\r\n\t\t\t\ttext += obj.data.join(', ') + ', ';\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.soCuoc.string = text;\r\n\t\tthis.updateTien();\r\n\t},\r\n\trefreshH: function(obj) {\r\n\t\tif (obj.select === true) {\r\n\t\t\tthis.countSelect++;\r\n\t\t}else{\r\n\t\t\tthis.countSelect--;\r\n\t\t}\r\n\t\tif (this.countSelect > this.max) {\r\n\t\t\tobj.onChanger();\r\n\t\t\tthis.countSelect = this.max;\r\n\t\t\tcc.RedT.inGame.addNotice('1 Vé cược tối đa ' + this.max + ' Số...');\r\n\t\t}\r\n\t\tif (this.countSelect < 0) {\r\n\t\t\tthis.countSelect = 0;\r\n\t\t}\r\n\t\tthis.refresh();\r\n\t},\r\n\tonChangerDiem: function(){\r\n\t\tvar value = helper.numberWithCommas(helper.getOnlyNumberInString(this.inputSoDiem.string));\r\n\t\tthis.inputSoDiem.string = value == '0' ? '' : value;\r\n\t},\r\n\tonUpdateDiem: function(e){\r\n\t\tlet value = helper.numberWithCommas(helper.getOnlyNumberInString(e.target.value));\r\n\t\tvalue = value === '0' ? '' : value;\r\n\t\tlet valueNumb = helper.getOnlyNumberInString(value)*1;\r\n\t\tif (valueNumb > this.diemToiDa) {\r\n\t\t\tvalue = helper.numberWithCommas(this.diemToiDa);\r\n\t\t\tcc.RedT.inGame.addNotice('Tối đa ' + value + ' điểm cho mỗi Vé.');\r\n\t\t}\r\n\t\te.target.value = value;\r\n\t\tthis.soDiem.string = !!value ? value : '0';\r\n\t\tthis.inputSoDiem.string = value;\r\n\t\tthis.updateTien();\r\n\t},\r\n\tupdateTien: function(){\r\n\t\tlet diem = helper.getOnlyNumberInString(this.soDiem.string)*1;\r\n\t\tthis.tongTien.string = helper.numberWithCommas(diem*this.giaDiem*this.countSelect);\r\n\t},\r\n\tonClickHuy: function(){\r\n\t\tthis.soCuoc.string      = '';\r\n\t\tthis.soDiem.string      = '0';\r\n\t\tthis.tongTien.string    = '0';\r\n\t\tthis.inputSoDiem.string = '';\r\n\t\tthis.countSelect        = 0;\r\n\t\tthis.node_select.forEach(function(obj){\r\n\t\t\tif (obj.select) {\r\n\t\t\t\tobj.onChanger();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.head_select.children.forEach(function(obj){\r\n\t\t\tobj.data = [];\r\n\t\t});\r\n\t},\r\n\tonClickCuoc: function(){\r\n\t\tif(helper.isEmpty(this.soCuoc.string)) {\r\n\t\t\tcc.RedT.inGame.addNotice('Vui lòng chọn số muốn cược..');\r\n\t\t} else if(this.soDiem.string === '0'){\r\n\t\t\tcc.RedT.inGame.addNotice('Vui lòng nhập điểm cược..');\r\n\t\t} else {\r\n\t\t\tvar data = {};\r\n\t\t\tdata[this.game] = {so:this.soCuoc.string, diem:helper.getOnlyNumberInString(this.soDiem.string)};\r\n\t\t\tcc.RedT.send({g:{xs:{mb:data}}});\r\n\t\t}\r\n\t},\r\n});\r\n"]}