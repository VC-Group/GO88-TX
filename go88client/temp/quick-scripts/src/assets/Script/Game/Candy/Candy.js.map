{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Candy/assets\\Script\\Game\\Candy\\Candy.js"],"names":["helper","require","reel","Line","gameBonus","notice","dialog","cc","Class","extends","Component","properties","redhat","Node","reels","default","type","icon","Prefab","icons","SpriteFrame","FrameAuto","betString","String","nodeNotice","prefabNotice","loading","hu","Label","taikhoan","tong","vuathang","labelLine","bet","freeLabel","nodeFree","BigWin","Animation","BigWin_Label","NoHu_close","NoHu","NoHu_Label","EF_Bonus","EF_Free","buttonLine","buttonSpin","nodeChangerBetL","nodeChangerBetR","skeleSpin","sp","Skeleton","buttonAuto","Sprite","isAuto","isSpin","isFreeSpin","betSelect","onLoad","RedT","inGame","MiniPanel","node","parent","init","on","BigWinFinish","BigWinPlay","NoHuFinish","NoHuPlay","EF_BonusFinish","EF_FreeFinish","forEach","bind","send","scene","string","numberWithCommas","user","red","speed","huong","callFunc","audio","playEf","numberTo","H_win","runAction","sequence","delayTime","isBigWin","active","showLineWin","hieuUng","isNoHu","onAuto","NoHuClose","isBonus","onPlay","isFree","onData","data","userData","candy","Candy","mini","TopHu","taixiu","TaiXiu","TX_Main","vipp","Dialog","VipPoint","status","cel","cel_index","index","setIcon","runReels","H_line_win","line_win","win","H_free","free","resetSpin","bonus","log","history","top","addNotice","EF_vuathang","onLineWin","bool","map","obj","TRed","mainLines","line","ef","onShow","onHidden","eflineN","efLineWin","length","stopAllActions","efOneLineWin","next","number","play","temp","addComponent","getComponent","font","util","fontCong","lineHeight","fontSize","position","v2","addChild","moveTo","destroy","timeOut","setTimeout","onAutoSpin","onChangerBetR","playClick","getOnlyNumberInString","onGetHu","onChangerBetL","onClickAuto","spriteFrame","onClickSpin","onSpin","onGetSpin","eflineO","setSpin","pauseSystemEvents","setAnimation","paused","resumeSystemEvents","spin","copy","random","g","cuoc","text","instantiate","noticeComponent","backGame","clearTimeout","director","loadScene","signOut","setting","topHu","Promise","all","filter","then","s","result"],"mappings":";;;;;;AACA,IAAIA,SAAYC,QAAQ,QAAR,CAAhB;AAAA,IACCC,OAAYD,QAAQ,YAAR,CADb;AAAA,IAECE,OAAYF,QAAQ,YAAR,CAFb;AAAA,IAGCG,YAAYH,QAAQ,iBAAR,CAHb;AAAA,IAICI,SAAYJ,QAAQ,QAAR,CAJb;AAAA,IAKCK,SAAYL,QAAQ,cAAR,CALb;;AAOAM,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY;AACXP,aAAWA,SADA;AAEXQ,UAAQL,GAAGM,IAFA;AAGdC,SAAO;AACNC,YAAS,EADH;AAENC,SAAMd;AAFA,GAHO;AAOXe,QAAMV,GAAGW,MAPE;AAQXC,SAAO;AACNJ,YAAS,EADH;AAENC,SAAMT,GAAGa;AAFH,GARI;AAYXC,aAAW;AACVN,YAAS,EADC;AAEVC,SAAMT,GAAGa;AAFC,GAZA;;AAiBXE,aAAW;AACbP,YAAS,EADI;AAEbC,SAAMT,GAAGgB;AAFI,GAjBA;;AAsBdC,cAAcjB,GAAGM,IAtBH;AAuBdY,gBAAclB,GAAGW,MAvBH;AAwBdQ,WAAcnB,GAAGM,IAxBH;;AA0BdR,UAAYA,MA1BE;AA2BdC,UAAYA,MA3BE;AA4BdH,QAAYA,IA5BE;AA6BdwB,MAAYpB,GAAGqB,KA7BD;AA8BdC,YAAYtB,GAAGqB,KA9BD;AA+BdE,QAAYvB,GAAGqB,KA/BD;AAgCdG,YAAYxB,GAAGqB,KAhCD;AAiCdI,aAAYzB,GAAGqB,KAjCD;AAkCdK,OAAY1B,GAAGqB,KAlCD;AAmCdM,aAAY3B,GAAGqB,KAnCD;AAoCdO,YAAY5B,GAAGM,IApCD;;AAsCduB,UAAe7B,GAAG8B,SAtCJ;AAuCdC,gBAAe/B,GAAGqB,KAvCJ;AAwCdW,cAAehC,GAAGM,IAxCJ;AAyCd2B,QAAejC,GAAG8B,SAzCJ;AA0CdI,cAAelC,GAAGqB,KA1CJ;AA2Cdc,YAAenC,GAAG8B,SA3CJ;AA4CdM,WAAepC,GAAG8B,SA5CJ;;AA8CdO,cAAiBrC,GAAGM,IA9CN;AA+CdgC,cAAiBtC,GAAGM,IA/CN;AAgDdiC,mBAAiBvC,GAAGM,IAhDN;AAiDdkC,mBAAiBxC,GAAGM,IAjDN;;AAmDdmC,aAAiBC,GAAGC,QAnDN;;AAqDdC,cAAiB5C,GAAG6C,MArDN;;AAuDdC,UAAY,KAvDE;AAwDdC,UAAY,KAxDE;AAyDdC,cAAY,KAzDE;AA0DdC,aAAW;AA1DG,EAHP;AA+DLC,OA/DK,oBA+DK;AACZlD,KAAGmD,IAAH,CAAQC,MAAR,GAAiB,IAAjB;AACApD,KAAGmD,IAAH,CAAQE,SAAR,CAAkBC,IAAlB,CAAuBC,MAAvB,GAAgC,KAAKlD,MAArC;;AAEA,OAAKT,IAAL,CAAU4D,IAAV,CAAe,IAAf;AACA,OAAK3D,SAAL,CAAe2D,IAAf,CAAoB,IAApB;AACA;;AAEA,OAAK3B,MAAL,CAAY4B,EAAZ,CAAe,UAAf,EAA2B,KAAKC,YAAhC,EAA8C,IAA9C;AACA,OAAK7B,MAAL,CAAY4B,EAAZ,CAAe,MAAf,EAA2B,KAAKE,UAAhC,EAA8C,IAA9C;AACA,OAAK1B,IAAL,CAAUwB,EAAV,CAAa,UAAb,EAAyB,KAAKG,UAA9B,EAA0C,IAA1C;AACA,OAAK3B,IAAL,CAAUwB,EAAV,CAAa,MAAb,EAAyB,KAAKI,QAA9B,EAA0C,IAA1C;;AAEA,OAAK1B,QAAL,CAAcsB,EAAd,CAAiB,UAAjB,EAA6B,KAAKK,cAAlC,EAAkD,IAAlD;AACA,OAAK1B,OAAL,CAAaqB,EAAb,CAAgB,UAAhB,EAA6B,KAAKM,aAAlC,EAAkD,IAAlD;;AAEA,OAAKxD,KAAL,CAAWyD,OAAX,CAAmB,UAASrE,IAAT,EAAe;AACjCA,QAAK6D,IAAL,CAAU,IAAV;AACA,GAFkB,CAEjBS,IAFiB,CAEZ,IAFY,CAAnB;;AAIAjE,KAAGmD,IAAH,CAAQe,IAAR,CAAa,EAACC,OAAM,OAAP,EAAb;AACA,OAAK7C,QAAL,CAAc8C,MAAd,GAAuB3E,OAAO4E,gBAAP,CAAwBrE,GAAGmD,IAAH,CAAQmB,IAAR,CAAaC,GAArC,CAAvB;AACA,OAAKC,KAAL,GAAa,GAAb;;AAEA;AACC;AACA;AACD;AACA,EA3FO;;AA4FRb,aAAY,sBAAU;AACrB,MAAIc,QAAQzE,GAAG0E,QAAH,CAAY,YAAU;AACjC1E,MAAGmD,IAAH,CAAQwB,KAAR,CAAcC,MAAd,CAAqB,SAArB;AACAnF,UAAOoF,QAAP,CAAgB,KAAK9C,YAArB,EAAmC,CAAnC,EAAsC,KAAK+C,KAA3C,EAAkD,IAAlD,EAAwD,IAAxD;AACA,GAHW,EAGT,IAHS,CAAZ;AAIA,OAAKjD,MAAL,CAAYyB,IAAZ,CAAiByB,SAAjB,CAA2B/E,GAAGgF,QAAH,CAAYhF,GAAGiF,SAAH,CAAa,GAAb,CAAZ,EAA+BR,KAA/B,CAA3B;AACA,EAlGO;AAmGRf,eAAc,wBAAU;AACvB,OAAKwB,QAAL,GAAgB,KAAhB;AACA,OAAKrD,MAAL,CAAYyB,IAAZ,CAAiB6B,MAAjB,GAA0B,KAA1B;AACA,OAAKpD,YAAL,CAAkBqC,MAAlB,GAA2B,EAA3B;AACA,OAAKgB,WAAL,CAAiB,KAAjB;AACA,OAAKC,OAAL;AACA,EAzGO;AA0GRxB,WAAU,oBAAU;AACnB,OAAK3B,UAAL,CAAgBkC,MAAhB,GAAyB,EAAzB;AACA,MAAIK,QAAQzE,GAAG0E,QAAH,CAAY,YAAU;AACjC1E,MAAGmD,IAAH,CAAQwB,KAAR,CAAcC,MAAd,CAAqB,SAArB;AACAnF,UAAOoF,QAAP,CAAgB,KAAK3C,UAArB,EAAiC,CAAjC,EAAoC,KAAK4C,KAAzC,EAAgD,IAAhD,EAAsD,IAAtD;AACA,GAHW,EAGT,IAHS,CAAZ;AAIA,OAAK7C,IAAL,CAAUqB,IAAV,CAAeyB,SAAf,CAAyB/E,GAAGgF,QAAH,CAAYhF,GAAGiF,SAAH,CAAa,GAAb,CAAZ,EAA+BR,KAA/B,CAAzB;AACA,EAjHO;AAkHRb,aAAY,sBAAU;AACrB,OAAK0B,MAAL,GAAc,KAAd;AACA,OAAKtD,UAAL,CAAgBmD,MAAhB,GAAyB,IAAzB;AACA,MAAI,KAAKrC,MAAT,EAAiB;AAChB,QAAKyC,MAAL;AACA;AACD,OAAKH,WAAL,CAAiB,KAAjB;AACA,OAAKC,OAAL;AACA,EA1HO;AA2HRG,YAAW,qBAAU;AACpB,OAAKvD,IAAL,CAAUqB,IAAV,CAAe6B,MAAf,GAAwB,KAAKnD,UAAL,CAAgBmD,MAAhB,GAAyB,KAAjD;AACA,EA7HO;AA8HRrB,iBAAgB,0BAAU;AACzB,OAAK2B,OAAL,GAAe,KAAf;AACA,OAAKtD,QAAL,CAAcmB,IAAd,CAAmB6B,MAAnB,GAA4B,KAA5B;AACA,OAAKtF,SAAL,CAAe6F,MAAf;AACA,OAAKN,WAAL,CAAiB,KAAjB;AACA,EAnIO;AAoIRrB,gBAAe,yBAAU;AACxB,OAAK4B,MAAL,GAAc,KAAd;AACA,OAAKvD,OAAL,CAAakB,IAAb,CAAkB6B,MAAlB,GAA2B,KAA3B;AACA,OAAKC,WAAL,CAAiB,KAAjB;AACA,OAAKC,OAAL;AACA,EAzIO;AA0IRO,SAAQ,gBAASC,IAAT,EAAe;AACtB,MAAI,KAAK,CAAL,KAAWA,KAAKvB,IAApB,EAAyB;AACxB,QAAKwB,QAAL,CAAcD,KAAKvB,IAAnB;AACAtE,MAAGmD,IAAH,CAAQ2C,QAAR,CAAiBD,KAAKvB,IAAtB;AACA;AACD,MAAI,KAAK,CAAL,KAAWuB,KAAKE,KAApB,EAA0B;AACzB,QAAKC,KAAL,CAAWH,KAAKE,KAAhB;AACA;AACD,MAAI,KAAK,CAAL,KAAWF,KAAKI,IAApB,EAAyB;AACxBjG,MAAGmD,IAAH,CAAQE,SAAR,CAAkBuC,MAAlB,CAAyBC,KAAKI,IAA9B;AACA;AACD,MAAI,KAAK,CAAL,KAAWJ,KAAKK,KAApB,EAA0B;AACzBlG,MAAGmD,IAAH,CAAQE,SAAR,CAAkB6C,KAAlB,CAAwBN,MAAxB,CAA+BC,KAAKK,KAApC;AACA;AACD,MAAI,KAAK,CAAL,KAAWL,KAAKM,MAApB,EAA2B;AAC1BnG,MAAGmD,IAAH,CAAQE,SAAR,CAAkB+C,MAAlB,CAAyBC,OAAzB,CAAiCT,MAAjC,CAAwCC,KAAKM,MAA7C;AACA;AACD,MAAI,KAAK,CAAL,KAAWN,KAAKS,IAApB,EAA0B;AACzBtG,MAAGmD,IAAH,CAAQE,SAAR,CAAkBkD,MAAlB,CAAyBC,QAAzB,CAAkCZ,MAAlC,CAAyCC,KAAKS,IAA9C;AACA;AACD,EA9JO;AA+JRR,WAAU,kBAASD,IAAT,EAAc;AACvB,OAAKvE,QAAL,CAAc8C,MAAd,GAAuB3E,OAAO4E,gBAAP,CAAwBwB,KAAKtB,GAA7B,CAAvB;AACA,EAjKO;AAkKRyB,QAAO,eAASH,IAAT,EAAc;AACpB,MAAI,KAAK,CAAL,KAAWA,KAAKY,MAApB,EAA4B;AAC3B,OAAIZ,KAAKY,MAAL,KAAgB,CAApB,EAAuB;AACtBZ,SAAKa,GAAL,CAAS1C,OAAT,CAAiB,UAAS0C,GAAT,EAAcC,SAAd,EAAwB;AACxCD,SAAI1C,OAAJ,CAAY,UAAStD,IAAT,EAAekG,KAAf,EAAqB;AAChC,WAAKrG,KAAL,CAAWoG,SAAX,EAAsB/F,KAAtB,CAA4BgG,KAA5B,EAAmCC,OAAnC,CAA2CnG,IAA3C,EAAiD,IAAjD;AACA,MAFW,CAEVuD,IAFU,CAEL,IAFK,CAAZ;AAGA,KAJgB,CAIfA,IAJe,CAIV,IAJU,CAAjB;AAKA,SAAK6C,QAAL;AACA,SAAKC,UAAL,GAAkBlB,KAAKmB,QAAvB;AACA,SAAKlC,KAAL,GAAkBe,KAAKoB,GAAvB;AACA,SAAKC,MAAL,GAAkBrB,KAAKsB,IAAvB;AACA,SAAK1B,OAAL,GAAkBI,KAAKJ,OAAvB;AACA,SAAKH,MAAL,GAAkBO,KAAKP,MAAvB;AACA,SAAKJ,QAAL,GAAkBW,KAAKX,QAAvB;AACA,SAAKS,MAAL,GAAkBE,KAAKF,MAAvB;AACA,SAAK3C,UAAL,GAAkB,CAAC,CAAC6C,KAAKsB,IAAzB;AACA,IAfD,MAeK;AACJ,SAAKC,SAAL;AACA;AACD;AACD,MAAI,CAAC,CAACvB,KAAKwB,KAAX,EAAkB;AACjB,QAAKxH,SAAL,CAAe+F,MAAf,CAAsBC,KAAKwB,KAA3B;AACA;AACD,MAAI,CAAC,CAACxB,KAAKyB,GAAX,EAAgB;AACf,QAAKvH,MAAL,CAAYwH,OAAZ,CAAoB3B,MAApB,CAA2BC,KAAKyB,GAAhC;AACA;AACD,MAAI,CAAC,CAACzB,KAAK2B,GAAX,EAAgB;AACf,QAAKzH,MAAL,CAAYyH,GAAZ,CAAgB5B,MAAhB,CAAuBC,KAAK2B,GAA5B;AACA;AACD,MAAI,CAAC,CAAC3B,KAAK/F,MAAX,EAAmB;AAClB,QAAK2H,SAAL,CAAe5B,KAAK/F,MAApB;AACA;AACD,EAnMO;AAoMR4H,cAAa,uBAAU;AACtB,OAAKtC,WAAL,CAAiB,IAAjB;AACA,OAAK5D,QAAL,CAAc4C,MAAd,GAAyB3E,OAAO4E,gBAAP,CAAwB,KAAKS,KAA7B,CAAzB;AACA,OAAKnD,SAAL,CAAeyC,MAAf,GAAyB,KAAK8C,MAA9B;AACA,OAAK5E,UAAL,CAAgB6C,MAAhB,GAAyB,CAAC,KAAK+B,MAA/B;AACA,OAAKtF,QAAL,CAAcuD,MAAd,GAAyB,CAAC,CAAC,KAAK+B,MAAhC;AACA,EA1MO;AA2MRS,YAAW,mBAASC,IAAT,EAAc;AACxB,OAAKb,UAAL,CAAgBc,GAAhB,CAAoB,UAASC,GAAT,EAAa;AAChC,OAAIC,OAAO,KAAKnI,IAAL,CAAUoI,SAAV,CAAoBF,IAAIG,IAAJ,GAAS,CAA7B,CAAX;AACA,OAAIL,IAAJ,EAAU;AACTG,SAAKG,EAAL,GAAU,IAAV;AACAH,SAAKI,MAAL;AACA,IAHD,MAGK;AACJJ,SAAKG,EAAL,GAAU,KAAV;AACAH,SAAKK,QAAL;AACA;AACD,GATmB,CASlBnE,IATkB,CASb,IATa,CAApB;AAUA,EAtNO;AAuNRmB,cAAa,qBAASwC,IAAT,EAAc;AAC1B,OAAKD,SAAL,CAAeC,IAAf;AACA,MAAI,CAACA,IAAD,IAAS,CAAC,KAAKtC,MAAf,IAAyB,CAAC,KAAKJ,QAA/B,IAA2C,CAAC,KAAKpC,MAAjD,IAA2D,CAAC,KAAKE,UAArE,EAAiF;AAChF,QAAKqF,OAAL,GAAe,CAAf;AACA,QAAKC,SAAL;AACA;AACD,EA7NO;AA8NRA,YAAW,mBAASV,IAAT,EAAc;AACxB,MAAI,KAAKb,UAAL,CAAgBwB,MAApB,EAA4B;AAC3B,QAAKjF,IAAL,CAAUkF,cAAV;AACA,OAAI,KAAK,CAAL,KAAW,KAAKzB,UAAL,CAAgB,KAAKsB,OAArB,CAAf,EAA8C;AAC7C,SAAKA,OAAL,GAAe,CAAf;AACA;AACD,QAAKI,YAAL,CAAkB,KAAKJ,OAAvB,EAAgC,IAAhC;AACA,OAAIK,OAAO1I,GAAG0E,QAAH,CAAY,YAAW;AACjC,SAAK+D,YAAL,CAAkB,KAAKJ,OAAvB,EAAgC,KAAhC;AACA,SAAKA,OAAL,IAAgB,CAAhB;AACA,SAAKC,SAAL;AACA,IAJU,EAIR,IAJQ,CAAX;AAKA,QAAKhF,IAAL,CAAUyB,SAAV,CAAoB/E,GAAGgF,QAAH,CAAYhF,GAAGiF,SAAH,CAAa,GAAb,CAAZ,EAA+ByD,IAA/B,CAApB;AACA;AACD,EA5OO;AA6ORD,eAAc,sBAASE,MAAT,EAAiBf,IAAjB,EAAsB;AACnCe,WAAS,KAAK5B,UAAL,CAAgB,KAAKsB,OAArB,EAA8BJ,IAAvC;AACA,MAAIF,OAAO,KAAKnI,IAAL,CAAUoI,SAAV,CAAoBW,SAAO,CAA3B,CAAX;AACA,MAAIf,IAAJ,EAAU;AACTG,QAAKG,EAAL,GAAU,IAAV;AACAH,QAAKI,MAAL;AACA,GAHD,MAGK;AACJJ,QAAKG,EAAL,GAAU,KAAV;AACAH,QAAKK,QAAL;AACA;AACD,EAvPO;AAwPR/C,UAAS,mBAAU;AAClB,MAAI,KAAKH,QAAL,IAAiB,CAAC,KAAKI,MAA3B,EAAmC;AAClC;AACA,QAAKzD,MAAL,CAAYyB,IAAZ,CAAiB6B,MAAjB,GAA0B,IAA1B;AACA,QAAKtD,MAAL,CAAY+G,IAAZ;AACA,GAJD,MAIM,IAAI,KAAKtD,MAAT,EAAgB;AACrB;AACA,QAAKrD,IAAL,CAAUqB,IAAV,CAAe6B,MAAf,GAAwB,IAAxB;AACA,QAAKlD,IAAL,CAAU2G,IAAV;AACA,GAJK,MAIA,IAAI,KAAKnD,OAAT,EAAiB;AACtB;AACA,QAAKtD,QAAL,CAAcmB,IAAd,CAAmB6B,MAAnB,GAA4B,IAA5B;AACA,QAAKhD,QAAL,CAAcyG,IAAd;AACA5I,MAAGmD,IAAH,CAAQwB,KAAR,CAAcC,MAAd,CAAqB,OAArB;AACA,GALK,MAKA,IAAI,KAAKe,MAAT,EAAgB;AACrB;AACA,QAAKvD,OAAL,CAAakB,IAAb,CAAkB6B,MAAlB,GAA2B,IAA3B;AACA,QAAK/C,OAAL,CAAawG,IAAb;AACA,GAJK,MAIA,IAAI,KAAK9D,KAAL,GAAa,CAAjB,EAAmB;AACxB,OAAI+D,OAAO,IAAI7I,GAAGM,IAAP,EAAX;AACAuI,QAAKC,YAAL,CAAkB9I,GAAGqB,KAArB;AACAwH,UAAOA,KAAKE,YAAL,CAAkB/I,GAAGqB,KAArB,CAAP;AACAwH,QAAKzE,MAAL,GAAc,MAAK3E,OAAO4E,gBAAP,CAAwB,KAAKS,KAA7B,CAAnB;AACA+D,QAAKG,IAAL,GAAYhJ,GAAGmD,IAAH,CAAQ8F,IAAR,CAAaC,QAAzB;AACAL,QAAKM,UAAL,GAAkB,GAAlB;AACAN,QAAKO,QAAL,GAAkB,EAAlB;AACAP,QAAKvF,IAAL,CAAU+F,QAAV,GAAqBrJ,GAAGsJ,EAAH,CAAM,CAAN,EAAS,EAAT,CAArB;AACA,QAAKrI,UAAL,CAAgBsI,QAAhB,CAAyBV,KAAKvF,IAA9B;AACAuF,QAAKvF,IAAL,CAAUyB,SAAV,CAAoB/E,GAAGgF,QAAH,CAAYhF,GAAGwJ,MAAH,CAAU,GAAV,EAAexJ,GAAGsJ,EAAH,CAAM,CAAN,EAAS,GAAT,CAAf,CAAZ,EAA2CtJ,GAAG0E,QAAH,CAAY,YAAU;AACpF,SAAKF,KAAL,GAAa,CAAb;AACAqE,SAAKvF,IAAL,CAAUmG,OAAV;AACA,SAAKpE,OAAL;AACA,SAAKD,WAAL,CAAiB,KAAjB;AACA,IAL8D,EAK5D,IAL4D,CAA3C,CAApB;AAMA,QAAKN,KAAL,GAAa,CAAb;AACA,GAjBK,MAiBD;AACJ,OAAI,KAAKhC,MAAL,IAAe,KAAKE,UAAxB,EAAoC;AACnC,SAAK0G,OAAL,GAAeC,WAAW,YAAU;AACnC,UAAKC,UAAL;AACA,UAAKpF,KAAL,GAAa,GAAb;AACA,KAHyB,CAIzBP,IAJyB,CAIpB,IAJoB,CAAX,EAIF,KAAKO,KAJH,CAAf;AAKA,IAND,MAMK;AACJ,SAAK4C,SAAL;AACA;AACD;AACD,EAtSO;AAuSRyC,gBAAe,yBAAU;AACxB7J,KAAGmD,IAAH,CAAQwB,KAAR,CAAcmF,SAAd;AACA,OAAK7G,SAAL;AACA,MAAI,KAAKA,SAAL,GAAe,CAAnB,EAAsB,KAAKA,SAAL,GAAiB,CAAjB;AACtB,OAAKvB,GAAL,CAAS0C,MAAT,GAAmB,KAAKrD,SAAL,CAAe,KAAKkC,SAApB,CAAnB;AACA,OAAK1B,IAAL,CAAU6C,MAAV,GAAmB3E,OAAO4E,gBAAP,CAAwB,KAAKzE,IAAL,CAAUiG,IAAV,CAAe0C,MAAf,GAAwB9I,OAAOsK,qBAAP,CAA6B,KAAKrI,GAAL,CAAS0C,MAAtC,CAAhD,CAAnB;AACA,OAAK4F,OAAL;AACA,EA9SO;AA+SRC,gBAAe,yBAAU;AACxBjK,KAAGmD,IAAH,CAAQwB,KAAR,CAAcmF,SAAd;AACA,OAAK7G,SAAL;AACA,MAAI,KAAKA,SAAL,GAAe,CAAnB,EAAsB,KAAKA,SAAL,GAAiB,CAAjB;AACtB,OAAKvB,GAAL,CAAS0C,MAAT,GAAkB,KAAKrD,SAAL,CAAe,KAAKkC,SAApB,CAAlB;AACA,OAAK1B,IAAL,CAAU6C,MAAV,GAAmB3E,OAAO4E,gBAAP,CAAwB,KAAKzE,IAAL,CAAUiG,IAAV,CAAe0C,MAAf,GAAwB9I,OAAOsK,qBAAP,CAA6B,KAAKrI,GAAL,CAAS0C,MAAtC,CAAhD,CAAnB;AACA,OAAK4F,OAAL;AACA,EAtTO;AAuTRE,cAAa,uBAAU;AACtBlK,KAAGmD,IAAH,CAAQwB,KAAR,CAAcmF,SAAd;AACA,OAAKvE,MAAL;AACA,EA1TO;AA2TRA,SAAQ,kBAAU;AACjB,OAAKzC,MAAL,GAAc,CAAC,KAAKA,MAApB;AACA,MAAI,KAAKA,MAAT,EAAiB;AAChB,QAAKF,UAAL,CAAgBuH,WAAhB,GAA8B,KAAKrJ,SAAL,CAAe,CAAf,CAA9B;AACA,GAFD,MAEK;AACJ,QAAK8B,UAAL,CAAgBuH,WAAhB,GAA8B,KAAKrJ,SAAL,CAAe,CAAf,CAA9B;AACA;AACD,EAlUO;AAmURsJ,cAAa,uBAAU;AACtB;AACA,OAAKC,MAAL;AACA,EAtUO;AAuURT,aAAY,sBAAU;AACrB;AACA,OAAKU,SAAL;AACA,EA1UO;AA2URD,SAAQ,kBAAU;AACjB,MAAI,KAAKzK,IAAL,CAAUiG,IAAV,CAAe0C,MAAf,GAAwB,CAA5B,EAA+B;AAC9B,QAAKd,SAAL,CAAe,qBAAf;AACA,GAFD,MAEK;AACJ,OAAI,CAAC,KAAK1E,MAAV,EAAkB;AACjB,SAAKO,IAAL,CAAUkF,cAAV;AACA,SAAK,CAAL,KAAW,KAAKH,OAAhB,IAA2B,KAAK,CAAL,KAAW,KAAKtB,UAA3C,IAAyD,KAAKA,UAAL,CAAgBwB,MAAzE,IAAmF,KAAKE,YAAL,CAAkB,KAAKJ,OAAvB,EAAgC,KAAhC,CAAnF;AACA,SAAKkC,OAAL,GAAe,KAAKlC,OAAL,GAAe,CAA9B;AACA,SAAKtF,MAAL,GAAc,IAAd;AACA,SAAKyH,OAAL;AACA,SAAKF,SAAL;AACA;AACD;AACD,EAxVO;AAyVRE,UAAS,mBAAU;AAClB,OAAKnI,UAAL,CAAgBoI,iBAAhB;AACA,OAAKnI,UAAL,CAAgBmI,iBAAhB;AACA,OAAKlI,eAAL,CAAqBkI,iBAArB;AACA,OAAKjI,eAAL,CAAqBiI,iBAArB;AACA,OAAKhI,SAAL,CAAeiI,YAAf,CAA4B,CAA5B,EAA+B,WAA/B,EAA4C,IAA5C;AACA,OAAKjI,SAAL,CAAekI,MAAf,GAAwB,KAAxB;AACA,EAhWO;AAiWRvD,YAAW,qBAAU;AACpB,MAAI,KAAKtE,MAAT,EAAiB;AAChB,QAAKyC,MAAL;AACA;AACD,OAAKxC,MAAL,GAAc,KAAd;AACA,OAAKV,UAAL,CAAgBuI,kBAAhB;AACA,OAAKtI,UAAL,CAAgBsI,kBAAhB;AACA,OAAKrI,eAAL,CAAqBqI,kBAArB;AACA,OAAKpI,eAAL,CAAqBoI,kBAArB;AACA,OAAKnI,SAAL,CAAekI,MAAf,GAAwB,IAAxB;AACA,EA3WO;AA4WR7D,WAAU,oBAAU;AACnB,OAAKvG,KAAL,CAAWyD,OAAX,CAAmB,UAASrE,IAAT,EAAeiH,KAAf,EAAsB;AACxCjH,QAAKkL,IAAL,CAAUjE,KAAV;AACA,GAFD;AAGA,EAhXO;AAiXRkE,OAAM,gBAAU;AACf,OAAKvK,KAAL,CAAWyD,OAAX,CAAmB,UAASrE,IAAT,EAAc;AAChCA,QAAKiB,KAAL,CAAWjB,KAAKiB,KAAL,CAAW2H,MAAX,GAAkB,CAA7B,EAAgC1B,OAAhC,CAAwClH,KAAKiB,KAAL,CAAW,CAAX,EAAciF,IAAtD;AACAlG,QAAKiB,KAAL,CAAWjB,KAAKiB,KAAL,CAAW2H,MAAX,GAAkB,CAA7B,EAAgC1B,OAAhC,CAAwClH,KAAKiB,KAAL,CAAW,CAAX,EAAciF,IAAtD;AACAlG,QAAKiB,KAAL,CAAWjB,KAAKiB,KAAL,CAAW2H,MAAX,GAAkB,CAA7B,EAAgC1B,OAAhC,CAAwClH,KAAKiB,KAAL,CAAW,CAAX,EAAciF,IAAtD;AACA,GAJD;AAKA,EAvXO;AAwXRkF,SAAQ,kBAAU;AACjB,OAAKxK,KAAL,CAAWyD,OAAX,CAAmB,UAASrE,IAAT,EAAc;AAChCA,QAAKiB,KAAL,CAAWoD,OAAX,CAAmB,UAAStD,IAAT,EAAekG,KAAf,EAAqB;AACvC,QAAIA,QAAQ,CAAR,IAAaA,QAAQjH,KAAKiB,KAAL,CAAW2H,MAAX,GAAkB,CAA3C,EAA8C;AAC7C7H,UAAKqK,MAAL;AACA;AACD,IAJD;AAKA,GAND;AAOA,EAhYO;AAiYRT,YAAW,qBAAU;AACpBtK,KAAGmD,IAAH,CAAQe,IAAR,CAAa,EAAC8G,GAAE,EAACjF,OAAM,EAAC8E,MAAK,EAACI,MAAKxL,OAAOsK,qBAAP,CAA6B,KAAKrI,GAAL,CAAS0C,MAAtC,CAAN,EAAqD6D,MAAK,KAAKrI,IAAL,CAAUiG,IAApE,EAAN,EAAP,EAAH,EAAb;AACA,EAnYO;AAoYR4B,YAAU,mBAASyD,IAAT,EAAc;AACvB,MAAIpL,SAASE,GAAGmL,WAAH,CAAe,KAAKjK,YAApB,CAAb;AACA,MAAIkK,kBAAkBtL,OAAOiJ,YAAP,CAAoB,cAApB,CAAtB;AACAqC,kBAAgBF,IAAhB,CAAqB9G,MAArB,GAA8B8G,IAA9B;AACA,OAAKjK,UAAL,CAAgBsI,QAAhB,CAAyBzJ,MAAzB;AACA,EAzYO;AA0YRuL,WAAU,oBAAU;AACnBrL,KAAGmD,IAAH,CAAQE,SAAR,CAAkBC,IAAlB,CAAuBC,MAAvB,GAAgC,IAAhC;AACA,OAAKpC,OAAL,CAAagE,MAAb,GAAsB,IAAtB;AACA,OAAK,CAAL,KAAW,KAAKuE,OAAhB,IAA2B4B,aAAa,KAAK5B,OAAlB,CAA3B;AACA1J,KAAGuL,QAAH,CAAYC,SAAZ,CAAsB,UAAtB;AACA,EA/YO;AAgZRC,UAAS,mBAAU;AAClBzL,KAAGmD,IAAH,CAAQE,SAAR,CAAkBC,IAAlB,CAAuBC,MAAvB,GAAgC,IAAhC;AACA,OAAK,CAAL,KAAW,KAAKmG,OAAhB,IAA2B4B,aAAa,KAAK5B,OAAlB,CAA3B;AACA1J,KAAGuL,QAAH,CAAYC,SAAZ,CAAsB,UAAtB,EAAkC,YAAU;AAC3CxL,MAAGmD,IAAH,CAAQC,MAAR,CAAeqI,OAAf;AACA,GAFD;AAGA,EAtZO;AAuZRzB,UAAS,mBAAU;AAAA;;AAClB,MAAI,KAAK,CAAL,KAAWhK,GAAGmD,IAAH,CAAQuI,OAAR,CAAgBC,KAAhB,CAAsB9F,IAArC,EAA2C;AAC1C,OAAIoF,OAAOxL,OAAOsK,qBAAP,CAA6B,KAAKrI,GAAL,CAAS0C,MAAtC,CAAX;AACAwH,WAAQC,GAAR,CAAY7L,GAAGmD,IAAH,CAAQuI,OAAR,CAAgBC,KAAhB,CAAsB9F,IAAtB,CAA2B,OAA3B,EAAoCiG,MAApC,CAA2C,UAASjD,IAAT,EAAc;AACpE,WAAOA,KAAKpI,IAAL,IAAawK,IAApB;AACA,IAFW,CAAZ,EAGCc,IAHD,CAGM,kBAAU;AACf,QAAIC,IAAIvM,OAAOsK,qBAAP,CAA6B,MAAK3I,EAAL,CAAQgD,MAArC,CAAR;AACA,QAAI1C,MAAMuK,OAAO,CAAP,EAAUvK,GAApB;AACA,QAAIsK,IAAEtK,GAAF,IAAS,CAAb,EACCjC,OAAOoF,QAAP,CAAgB,MAAKzD,EAArB,EAAyB4K,CAAzB,EAA4BtK,GAA5B,EAAiC,IAAjC,EAAuC,IAAvC;AACD,IARD;AASA;AACD;AApaO,CAAT","file":"Candy.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Candy","sourcesContent":["\r\nvar helper    = require('Helper'),\r\n\treel      = require('Candy_reel'),\r\n\tLine      = require('Candy_line'),\r\n\tgameBonus = require('Candy_playBonus'),\r\n\tnotice    = require('Notice'),\r\n\tdialog    = require('Candy_dialog');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    \tgameBonus: gameBonus,\r\n    \tredhat: cc.Node,\r\n\t\treels: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype: reel,\r\n\t\t},\r\n    \ticon: cc.Prefab,\r\n    \ticons: {\r\n    \t\tdefault: [],\r\n    \t\ttype: cc.SpriteFrame,\r\n    \t},\r\n    \tFrameAuto: {\r\n    \t\tdefault: [],\r\n    \t\ttype: cc.SpriteFrame,\r\n    \t},\r\n\r\n    \tbetString: {\r\n\t\t\tdefault: [],\r\n\t\t\ttype: cc.String,\r\n\t\t},\r\n\r\n\t\tnodeNotice:   cc.Node,\r\n\t\tprefabNotice: cc.Prefab,\r\n\t\tloading:      cc.Node,\r\n\r\n\t\tnotice:     notice,\r\n\t\tdialog:     dialog,\r\n\t\tLine:       Line,\r\n\t\thu:         cc.Label,\r\n\t\ttaikhoan:   cc.Label,\r\n\t\ttong:       cc.Label,\r\n\t\tvuathang:   cc.Label,\r\n\t\tlabelLine:  cc.Label,\r\n\t\tbet:        cc.Label,\r\n\t\tfreeLabel:  cc.Label,\r\n\t\tnodeFree:   cc.Node,\r\n\r\n\t\tBigWin:        cc.Animation,\r\n\t\tBigWin_Label:  cc.Label,\r\n\t\tNoHu_close:    cc.Node,\r\n\t\tNoHu:          cc.Animation,\r\n\t\tNoHu_Label:    cc.Label,\r\n\t\tEF_Bonus:      cc.Animation,\r\n\t\tEF_Free:       cc.Animation,\r\n\r\n\t\tbuttonLine:      cc.Node,\r\n\t\tbuttonSpin:      cc.Node,\r\n\t\tnodeChangerBetL: cc.Node,\r\n\t\tnodeChangerBetR: cc.Node,\r\n\r\n\t\tskeleSpin:       sp.Skeleton,\r\n\r\n\t\tbuttonAuto:      cc.Sprite,\r\n\r\n\t\tisAuto:     false,\r\n\t\tisSpin:     false,\r\n\t\tisFreeSpin: false,\r\n\t\tbetSelect: 0,\r\n    },\r\n    onLoad () {\r\n\t\tcc.RedT.inGame = this;\r\n\t\tcc.RedT.MiniPanel.node.parent = this.redhat;\r\n\r\n\t\tthis.Line.init(this);\r\n\t\tthis.gameBonus.init(this);\r\n\t\t//this.dialog.init();\r\n\r\n\t\tthis.BigWin.on('finished', this.BigWinFinish, this);\r\n\t\tthis.BigWin.on('play',     this.BigWinPlay,   this);\r\n\t\tthis.NoHu.on('finished', this.NoHuFinish, this);\r\n\t\tthis.NoHu.on('play',     this.NoHuPlay,   this);\r\n\r\n\t\tthis.EF_Bonus.on('finished', this.EF_BonusFinish, this);\r\n\t\tthis.EF_Free.on('finished',  this.EF_FreeFinish,  this);\r\n\r\n\t\tthis.reels.forEach(function(reel) {\r\n\t\t\treel.init(this);\r\n\t\t}.bind(this));\r\n\r\n\t\tcc.RedT.send({scene:\"candy\"});\r\n\t\tthis.taikhoan.string = helper.numberWithCommas(cc.RedT.user.red);\r\n\t\tthis.speed = 400;\r\n\r\n\t\t//if(cc.RedT.isSoundBackground()){\r\n\t\t\t//cc.RedT.setSoundBackground(true);\r\n\t\t\t//this.playMusic();\r\n\t\t//}\r\n\t},\r\n\tBigWinPlay: function(){\r\n\t\tvar huong = cc.callFunc(function(){\r\n\t\t\tcc.RedT.audio.playEf('megaWin');\r\n\t\t\thelper.numberTo(this.BigWin_Label, 0, this.H_win, 2000, true);\r\n\t\t}, this);\r\n\t\tthis.BigWin.node.runAction(cc.sequence(cc.delayTime(0.3), huong));\r\n\t},\r\n\tBigWinFinish: function(){\r\n\t\tthis.isBigWin = false;\r\n\t\tthis.BigWin.node.active = false;\r\n\t\tthis.BigWin_Label.string = \"\";\r\n\t\tthis.showLineWin(false);\r\n\t\tthis.hieuUng();\r\n\t},\r\n\tNoHuPlay: function(){\r\n\t\tthis.NoHu_Label.string = \"\";\r\n\t\tvar huong = cc.callFunc(function(){\r\n\t\t\tcc.RedT.audio.playEf('jackpot');\r\n\t\t\thelper.numberTo(this.NoHu_Label, 0, this.H_win, 2000, true);\r\n\t\t}, this);\r\n\t\tthis.NoHu.node.runAction(cc.sequence(cc.delayTime(0.3), huong));\r\n\t},\r\n\tNoHuFinish: function(){\r\n\t\tthis.isNoHu = false;\r\n\t\tthis.NoHu_close.active = true;\r\n\t\tif (this.isAuto) {\r\n\t\t\tthis.onAuto();\r\n\t\t}\r\n\t\tthis.showLineWin(false);\r\n\t\tthis.hieuUng();\r\n\t},\r\n\tNoHuClose: function(){\r\n\t\tthis.NoHu.node.active = this.NoHu_close.active = false;\r\n\t},\r\n\tEF_BonusFinish: function(){\r\n\t\tthis.isBonus = false;\r\n\t\tthis.EF_Bonus.node.active = false;\r\n\t\tthis.gameBonus.onPlay();\r\n\t\tthis.showLineWin(false);\r\n\t},\r\n\tEF_FreeFinish: function(){\r\n\t\tthis.isFree = false;\r\n\t\tthis.EF_Free.node.active = false;\r\n\t\tthis.showLineWin(false);\r\n\t\tthis.hieuUng();\r\n\t},\r\n\tonData: function(data) {\r\n\t\tif (void 0 !== data.user){\r\n\t\t\tthis.userData(data.user);\r\n\t\t\tcc.RedT.userData(data.user);\r\n\t\t}\r\n\t\tif (void 0 !== data.candy){\r\n\t\t\tthis.Candy(data.candy);\r\n\t\t}\r\n\t\tif (void 0 !== data.mini){\r\n\t\t\tcc.RedT.MiniPanel.onData(data.mini);\r\n\t\t}\r\n\t\tif (void 0 !== data.TopHu){\r\n\t\t\tcc.RedT.MiniPanel.TopHu.onData(data.TopHu);\r\n\t\t}\r\n\t\tif (void 0 !== data.taixiu){\r\n\t\t\tcc.RedT.MiniPanel.TaiXiu.TX_Main.onData(data.taixiu);\r\n\t\t}\r\n\t\tif (void 0 !== data.vipp) {\r\n\t\t\tcc.RedT.MiniPanel.Dialog.VipPoint.onData(data.vipp);\r\n\t\t}\r\n\t},\r\n\tuserData: function(data){\r\n\t\tthis.taikhoan.string = helper.numberWithCommas(data.red);\r\n\t},\r\n\tCandy: function(data){\r\n\t\tif (void 0 !== data.status) {\r\n\t\t\tif (data.status === 1) {\r\n\t\t\t\tdata.cel.forEach(function(cel, cel_index){\r\n\t\t\t\t\tcel.forEach(function(icon, index){\r\n\t\t\t\t\t\tthis.reels[cel_index].icons[index].setIcon(icon, true);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.runReels();\r\n\t\t\t\tthis.H_line_win = data.line_win;\r\n\t\t\t\tthis.H_win      = data.win;\r\n\t\t\t\tthis.H_free     = data.free;\r\n\t\t\t\tthis.isBonus    = data.isBonus;\r\n\t\t\t\tthis.isNoHu     = data.isNoHu;\r\n\t\t\t\tthis.isBigWin   = data.isBigWin;\r\n\t\t\t\tthis.isFree     = data.isFree;\r\n\t\t\t\tthis.isFreeSpin = !!data.free;\r\n\t\t\t}else{\r\n\t\t\t\tthis.resetSpin();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!!data.bonus) {\r\n\t\t\tthis.gameBonus.onData(data.bonus);\r\n\t\t}\r\n\t\tif (!!data.log) {\r\n\t\t\tthis.dialog.history.onData(data.log);\r\n\t\t}\r\n\t\tif (!!data.top) {\r\n\t\t\tthis.dialog.top.onData(data.top);\r\n\t\t}\r\n\t\tif (!!data.notice) {\r\n\t\t\tthis.addNotice(data.notice);\r\n\t\t}\r\n\t},\r\n\tEF_vuathang: function(){\r\n\t\tthis.showLineWin(true);\r\n\t\tthis.vuathang.string   = helper.numberWithCommas(this.H_win);\r\n\t\tthis.freeLabel.string  = this.H_free;\r\n\t\tthis.buttonSpin.active = !this.H_free;\r\n\t\tthis.nodeFree.active   = !!this.H_free;\r\n\t},\r\n\tonLineWin: function(bool){\r\n\t\tthis.H_line_win.map(function(obj){\r\n\t\t\tlet TRed = this.Line.mainLines[obj.line-1];\r\n\t\t\tif (bool) {\r\n\t\t\t\tTRed.ef = true;\r\n\t\t\t\tTRed.onShow();\r\n\t\t\t}else{\r\n\t\t\t\tTRed.ef = false;\r\n\t\t\t\tTRed.onHidden();\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\t},\r\n\tshowLineWin: function(bool){\r\n\t\tthis.onLineWin(bool);\r\n\t\tif (!bool && !this.isNoHu && !this.isBigWin && !this.isAuto && !this.isFreeSpin) {\r\n\t\t\tthis.eflineN = 0;\r\n\t\t\tthis.efLineWin();\r\n\t\t}\r\n\t},\r\n\tefLineWin: function(bool){\r\n\t\tif (this.H_line_win.length) {\r\n\t\t\tthis.node.stopAllActions();\r\n\t\t\tif (void 0 === this.H_line_win[this.eflineN]) {\r\n\t\t\t\tthis.eflineN = 0;\r\n\t\t\t}\r\n\t\t\tthis.efOneLineWin(this.eflineN, true);\r\n\t\t\tvar next = cc.callFunc(function() {\r\n\t\t\t\tthis.efOneLineWin(this.eflineN, false);\r\n\t\t\t\tthis.eflineN += 1;\r\n\t\t\t\tthis.efLineWin();\r\n\t\t\t}, this);\r\n\t\t\tthis.node.runAction(cc.sequence(cc.delayTime(1.5), next));\r\n\t\t}\r\n\t},\r\n\tefOneLineWin: function(number, bool){\r\n\t\tnumber = this.H_line_win[this.eflineN].line;\r\n\t\tlet TRed = this.Line.mainLines[number-1];\r\n\t\tif (bool) {\r\n\t\t\tTRed.ef = true;\r\n\t\t\tTRed.onShow();\r\n\t\t}else{\r\n\t\t\tTRed.ef = false;\r\n\t\t\tTRed.onHidden();\r\n\t\t}\r\n\t},\r\n\thieuUng: function(){\r\n\t\tif (this.isBigWin && !this.isNoHu) {\r\n\t\t\t// Big Win\r\n\t\t\tthis.BigWin.node.active = true;\r\n\t\t\tthis.BigWin.play();\r\n\t\t}else if (this.isNoHu){\r\n\t\t\t// Nổ Hũ\r\n\t\t\tthis.NoHu.node.active = true;\r\n\t\t\tthis.NoHu.play();\r\n\t\t}else if (this.isBonus){\r\n\t\t\t// Bonus\r\n\t\t\tthis.EF_Bonus.node.active = true;\r\n\t\t\tthis.EF_Bonus.play();\r\n\t\t\tcc.RedT.audio.playEf('bonus');\r\n\t\t}else if (this.isFree){\r\n\t\t\t// Free\r\n\t\t\tthis.EF_Free.node.active = true;\r\n\t\t\tthis.EF_Free.play();\r\n\t\t}else if (this.H_win > 0){\r\n\t\t\tvar temp = new cc.Node;\r\n\t\t\ttemp.addComponent(cc.Label);\r\n\t\t\ttemp = temp.getComponent(cc.Label);\r\n\t\t\ttemp.string = '+'+ helper.numberWithCommas(this.H_win);\r\n\t\t\ttemp.font = cc.RedT.util.fontCong;\r\n\t\t\ttemp.lineHeight = 130;\r\n\t\t\ttemp.fontSize   = 25;\r\n\t\t\ttemp.node.position = cc.v2(0, 21);\r\n\t\t\tthis.nodeNotice.addChild(temp.node);\r\n\t\t\ttemp.node.runAction(cc.sequence(cc.moveTo(1.2, cc.v2(0, 105)), cc.callFunc(function(){\r\n\t\t\t\tthis.speed = 0;\r\n\t\t\t\ttemp.node.destroy();\r\n\t\t\t\tthis.hieuUng();\r\n\t\t\t\tthis.showLineWin(false);\r\n\t\t\t}, this)));\r\n\t\t\tthis.H_win = 0;\r\n\t\t}else{\r\n\t\t\tif (this.isAuto || this.isFreeSpin) {\r\n\t\t\t\tthis.timeOut = setTimeout(function(){\r\n\t\t\t\t\tthis.onAutoSpin();\r\n\t\t\t\t\tthis.speed = 400;\r\n\t\t\t\t}\r\n\t\t\t\t.bind(this), this.speed);\r\n\t\t\t}else{\r\n\t\t\t\tthis.resetSpin();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonChangerBetR: function(){\r\n\t\tcc.RedT.audio.playClick();\r\n\t\tthis.betSelect++;\r\n\t\tif (this.betSelect>2) this.betSelect = 0;\r\n\t\tthis.bet.string  = this.betString[this.betSelect];\r\n\t\tthis.tong.string = helper.numberWithCommas(this.Line.data.length * helper.getOnlyNumberInString(this.bet.string));\r\n\t\tthis.onGetHu();\r\n\t},\r\n\tonChangerBetL: function(){\r\n\t\tcc.RedT.audio.playClick();\r\n\t\tthis.betSelect--;\r\n\t\tif (this.betSelect<0) this.betSelect = 2;\r\n\t\tthis.bet.string = this.betString[this.betSelect];\r\n\t\tthis.tong.string = helper.numberWithCommas(this.Line.data.length * helper.getOnlyNumberInString(this.bet.string));\r\n\t\tthis.onGetHu();\r\n\t},\r\n\tonClickAuto: function(){\r\n\t\tcc.RedT.audio.playClick();\r\n\t\tthis.onAuto();\r\n\t},\r\n\tonAuto: function(){\r\n\t\tthis.isAuto = !this.isAuto;\r\n\t\tif (this.isAuto) {\r\n\t\t\tthis.buttonAuto.spriteFrame = this.FrameAuto[1];\r\n\t\t}else{\r\n\t\t\tthis.buttonAuto.spriteFrame = this.FrameAuto[0];\r\n\t\t}\r\n\t},\r\n\tonClickSpin: function(){\r\n\t\t//cc.RedT.audio.playClick();\r\n\t\tthis.onSpin();\r\n\t},\r\n\tonAutoSpin: function(){\r\n\t\t//cc.RedT.audio.playClick();\r\n\t\tthis.onGetSpin();\r\n\t},\r\n\tonSpin: function(){\r\n\t\tif (this.Line.data.length < 1) {\r\n\t\t\tthis.addNotice('Chọn ít nhất 1 dòng');\r\n\t\t}else{\r\n\t\t\tif (!this.isSpin) {\r\n\t\t\t\tthis.node.stopAllActions();\r\n\t\t\t\tvoid 0 !== this.eflineN && void 0 !== this.H_line_win && this.H_line_win.length && this.efOneLineWin(this.eflineN, false);\r\n\t\t\t\tthis.eflineO = this.eflineN = 0;\r\n\t\t\t\tthis.isSpin = true;\r\n\t\t\t\tthis.setSpin();\r\n\t\t\t\tthis.onGetSpin();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetSpin: function(){\r\n\t\tthis.buttonLine.pauseSystemEvents();\r\n\t\tthis.buttonSpin.pauseSystemEvents();\r\n\t\tthis.nodeChangerBetL.pauseSystemEvents();\r\n\t\tthis.nodeChangerBetR.pauseSystemEvents();\r\n\t\tthis.skeleSpin.setAnimation(0, 'animation', true);\r\n\t\tthis.skeleSpin.paused = false;\r\n\t},\r\n\tresetSpin: function(){\r\n\t\tif (this.isAuto) {\r\n\t\t\tthis.onAuto();\r\n\t\t}\r\n\t\tthis.isSpin = false;\r\n\t\tthis.buttonLine.resumeSystemEvents();\r\n\t\tthis.buttonSpin.resumeSystemEvents();\r\n\t\tthis.nodeChangerBetL.resumeSystemEvents();\r\n\t\tthis.nodeChangerBetR.resumeSystemEvents();\r\n\t\tthis.skeleSpin.paused = true;\r\n\t},\r\n\trunReels: function(){\r\n\t\tthis.reels.forEach(function(reel, index) {\r\n\t\t\treel.spin(index);\r\n\t\t});\r\n\t},\r\n\tcopy: function(){\r\n\t\tthis.reels.forEach(function(reel){\r\n\t\t\treel.icons[reel.icons.length-1].setIcon(reel.icons[2].data);\r\n\t\t\treel.icons[reel.icons.length-2].setIcon(reel.icons[1].data);\r\n\t\t\treel.icons[reel.icons.length-3].setIcon(reel.icons[0].data);\r\n\t\t});\r\n\t},\r\n\trandom: function(){\r\n\t\tthis.reels.forEach(function(reel){\r\n\t\t\treel.icons.forEach(function(icon, index){\r\n\t\t\t\tif (index > 2 && index < reel.icons.length-3) {\r\n\t\t\t\t\ticon.random();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tonGetSpin: function(){\r\n\t\tcc.RedT.send({g:{candy:{spin:{cuoc:helper.getOnlyNumberInString(this.bet.string), line:this.Line.data}}}});\r\n\t},\r\n\taddNotice:function(text){\r\n\t\tvar notice = cc.instantiate(this.prefabNotice)\r\n\t\tvar noticeComponent = notice.getComponent('mini_warning')\r\n\t\tnoticeComponent.text.string = text;\r\n\t\tthis.nodeNotice.addChild(notice);\r\n\t},\r\n\tbackGame: function(){\r\n\t\tcc.RedT.MiniPanel.node.parent = null;\r\n\t\tthis.loading.active = true;\r\n\t\tvoid 0 !== this.timeOut && clearTimeout(this.timeOut);\r\n\t\tcc.director.loadScene('MainGame');\r\n\t},\r\n\tsignOut: function(){\r\n\t\tcc.RedT.MiniPanel.node.parent = null;\r\n\t\tvoid 0 !== this.timeOut && clearTimeout(this.timeOut);\r\n\t\tcc.director.loadScene('MainGame', function(){\r\n\t\t\tcc.RedT.inGame.signOut();\r\n\t\t});\r\n\t},\r\n\tonGetHu: function(){\r\n\t\tif (void 0 !== cc.RedT.setting.topHu.data) {\r\n\t\t\tvar cuoc = helper.getOnlyNumberInString(this.bet.string);\r\n\t\t\tPromise.all(cc.RedT.setting.topHu.data['candy'].filter(function(temp){\r\n\t\t\t\treturn temp.type == cuoc;\r\n\t\t\t}))\r\n\t\t\t.then(result => {\r\n\t\t\t\tvar s = helper.getOnlyNumberInString(this.hu.string);\r\n\t\t\t\tvar bet = result[0].bet;\r\n\t\t\t\tif (s-bet != 0) \r\n\t\t\t\t\thelper.numberTo(this.hu, s, bet, 2000, true);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n});\r\n"]}