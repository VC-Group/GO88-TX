{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Candy\\Candy_line/assets\\Script\\Game\\Candy\\Candy_line\\Candy_line.js"],"names":["helper","require","cc","Class","extends","Component","properties","lines","Node","mainLines","init","obj","RedT","self","Promise","all","children","map","line","getComponent","then","result","selectAll","onOpen","audio","playClick","node","active","onClose","playUnClick","data","length","notice","show","title","text","select","e","target","check","index","filter","labelLine","string","tong","numberWithCommas","getOnlyNumberInString","bet","selectChan","i","selectLe"],"mappings":";;;;;;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAWL,GAAGM,IADN;AAERC,mBAAWP,GAAGM;AAFN,KAHP;AAOLE,UAAM,cAASC,GAAT,EAAa;AAAA;;AACf,aAAKC,IAAL,GAAYD,GAAZ;AACA,YAAIE,OAAO,IAAX,CAAgB;AAChBC,gBAAQC,GAAR,CAAY,KAAKN,SAAL,CAAeO,QAAf,CAAwBC,GAAxB,CAA4B,UAASC,IAAT,EAAc;AAClD,mBAAOA,KAAKC,YAAL,CAAkB,aAAlB,CAAP;AACH,SAFW,CAAZ,EAGCC,IAHD,CAGM,kBAAU;AACZ,kBAAKX,SAAL,GAAiBY,MAAjB;AACH,SALD;AAMA,aAAKC,SAAL,CAAe,IAAf,EAAqB,GAArB;AACH,KAjBI;AAkBLC,YAAQ,kBAAU;AACdrB,WAAGU,IAAH,CAAQY,KAAR,CAAcC,SAAd;AACA,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,KArBI;AAsBLC,aAAS,mBAAU;AACf1B,WAAGU,IAAH,CAAQY,KAAR,CAAcK,WAAd;AACA,YAAI,KAAKH,IAAL,CAAUC,MAAV,IAAoB,KAAKG,IAAL,CAAUC,MAAV,GAAmB,CAA3C,EAA8C;AAC1C,iBAAKnB,IAAL,CAAUoB,MAAV,CAAiBC,IAAjB,CAAsB,EAACC,OAAM,UAAP,EAAmBC,MAAK,qBAAxB,EAAtB;AACH,SAFD,MAEK;AACD,iBAAKT,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;AACJ,KA7BI;AA8BLS,YAAQ,gBAASC,CAAT,EAAY;AAChB,YAAIX,OAAOW,EAAEC,MAAb;AACA,YAAIZ,KAAKV,QAAL,CAAc,CAAd,EAAiBW,MAArB,EAA6B;AACzBD,iBAAKV,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,KAA1B;AACAD,iBAAKV,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,IAA1B;AACH,SAHD,MAGK;AACDD,iBAAKV,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,IAA1B;AACAD,iBAAKV,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,KAA1B;AACH;AACD,aAAKY,KAAL;AACH,KAxCI;AAyCLA,WAAO,iBAAW;AAAA;;AACd,YAAI1B,OAAO,IAAX;AACAC,gBAAQC,GAAR,CAAY,KAAKR,KAAL,CAAWS,QAAX,CAAoBC,GAApB,CAAwB,UAASC,IAAT,EAAesB,KAAf,EAAqB;AACrD,mBAAOtB,KAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0Ba,QAAM,CAAhC,GAAoC,KAAK,CAAhD;AACH,SAFW,CAAZ,EAGCpB,IAHD,CAGM,kBAAU;AACZN,oBAAQC,GAAR,CAAYM,OAAOoB,MAAP,CAAc,UAASX,IAAT,EAAc;AACpC,uBAAO,KAAK,CAAL,KAAWA,IAAlB;AACH,aAFW,CAAZ,EAGCV,IAHD,CAGM,gBAAQ;AACV,uBAAKU,IAAL,GAAYA,IAAZ;AACA,uBAAKlB,IAAL,CAAU8B,SAAV,CAAoBC,MAApB,GAA6Bb,KAAKC,MAAlC;AACA,uBAAKnB,IAAL,CAAUgC,IAAV,CAAeD,MAAf,GAAwB3C,OAAO6C,gBAAP,CAAwBf,KAAKC,MAAL,GAAc/B,OAAO8C,qBAAP,CAA6B,OAAKlC,IAAL,CAAUmC,GAAV,CAAcJ,MAA3C,CAAtC,CAAxB;AACH,aAPD;AAQH,SAZD;AAaH,KAxDI;AAyDLK,gBAAY,sBAAW;AAAA;;AACnB,YAAInC,OAAO,IAAX;AACAC,gBAAQC,GAAR,CAAY,KAAKR,KAAL,CAAWS,QAAX,CAAoBC,GAApB,CAAwB,UAASC,IAAT,EAAesB,KAAf,EAAqB;AACrD,gBAAIS,IAAIT,QAAM,CAAd;AACA,gBAAIS,IAAE,CAAN,EAAS;AACL/B,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,IAA1B;AACAT,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,KAA1B;AACH,aAHD,MAGK;AACDT,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,KAA1B;AACAT,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,IAA1B;AACA,uBAAOsB,CAAP;AACH;AACD,mBAAO,KAAK,CAAZ;AACH,SAXW,CAAZ,EAYC7B,IAZD,CAYM,kBAAU;AACZN,oBAAQC,GAAR,CAAYM,OAAOoB,MAAP,CAAc,UAASX,IAAT,EAAc;AACpC,uBAAO,KAAK,CAAL,KAAWA,IAAlB;AACH,aAFW,CAAZ,EAGCV,IAHD,CAGM,gBAAQ;AACV,uBAAKU,IAAL,GAAYA,IAAZ;AACA,uBAAKlB,IAAL,CAAU8B,SAAV,CAAoBC,MAApB,GAA6Bb,KAAKC,MAAlC;AACA,uBAAKnB,IAAL,CAAUgC,IAAV,CAAeD,MAAf,GAAwB3C,OAAO6C,gBAAP,CAAwBf,KAAKC,MAAL,GAAc/B,OAAO8C,qBAAP,CAA6B,OAAKlC,IAAL,CAAUmC,GAAV,CAAcJ,MAA3C,CAAtC,CAAxB;AACH,aAPD;AAQH,SArBD;AAsBH,KAjFI;AAkFLO,cAAU,oBAAW;AAAA;;AACjB,YAAIrC,OAAO,IAAX;AACAC,gBAAQC,GAAR,CAAY,KAAKR,KAAL,CAAWS,QAAX,CAAoBC,GAApB,CAAwB,UAASC,IAAT,EAAesB,KAAf,EAAqB;AACrD,gBAAIS,IAAIT,QAAM,CAAd;AACA,gBAAIS,IAAE,CAAN,EAAS;AACL/B,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,KAA1B;AACAT,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,IAA1B;AACA,uBAAOsB,CAAP;AACH,aAJD,MAIK;AACD/B,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,IAA1B;AACAT,qBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,KAA1B;AACH;AACD,mBAAO,KAAK,CAAZ;AACH,SAXW,CAAZ,EAYCP,IAZD,CAYM,kBAAU;AACZN,oBAAQC,GAAR,CAAYM,OAAOoB,MAAP,CAAc,UAASX,IAAT,EAAc;AACpC,uBAAO,KAAK,CAAL,KAAWA,IAAlB;AACH,aAFW,CAAZ,EAGCV,IAHD,CAGM,gBAAQ;AACV,uBAAKU,IAAL,GAAYA,IAAZ;AACA,uBAAKlB,IAAL,CAAU8B,SAAV,CAAoBC,MAApB,GAA6Bb,KAAKC,MAAlC;AACA,uBAAKnB,IAAL,CAAUgC,IAAV,CAAeD,MAAf,GAAwB3C,OAAO6C,gBAAP,CAAwBf,KAAKC,MAAL,GAAc/B,OAAO8C,qBAAP,CAA6B,OAAKlC,IAAL,CAAUmC,GAAV,CAAcJ,MAA3C,CAAtC,CAAxB;AACH,aAPD;AAQH,SArBD;AAsBH,KA1GI;AA2GLrB,eAAW,mBAASe,CAAT,EAAYD,MAAZ,EAAoB;AAAA;;AAC3B,YAAIvB,OAAO,IAAX;AACAC,gBAAQC,GAAR,CAAY,KAAKR,KAAL,CAAWS,QAAX,CAAoBC,GAApB,CAAwB,UAASC,IAAT,EAAesB,KAAf,EAAqB;AACrD,gBAAID,QAAQH,UAAU,GAAtB;AACAlB,iBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0BY,KAA1B;AACArB,iBAAKF,QAAL,CAAc,CAAd,EAAiBW,MAAjB,GAA0B,CAACY,KAA3B;AACA,mBAAOA,QAAQC,QAAM,CAAd,GAAkB,KAAK,CAA9B;AACH,SALW,CAAZ,EAMCpB,IAND,CAMM,kBAAU;AACZN,oBAAQC,GAAR,CAAYM,OAAOoB,MAAP,CAAc,UAASX,IAAT,EAAeU,KAAf,EAAqB;AAC3C,uBAAO,KAAK,CAAL,KAAWV,IAAlB;AACH,aAFW,CAAZ,EAGCV,IAHD,CAGM,gBAAQ;AACV,uBAAKU,IAAL,GAAYA,IAAZ;AACA,uBAAKlB,IAAL,CAAU8B,SAAV,CAAoBC,MAApB,GAA6Bb,KAAKC,MAAlC;AACA,uBAAKnB,IAAL,CAAUgC,IAAV,CAAeD,MAAf,GAAwB3C,OAAO6C,gBAAP,CAAwBf,KAAKC,MAAL,GAAc/B,OAAO8C,qBAAP,CAA6B,OAAKlC,IAAL,CAAUmC,GAAV,CAAcJ,MAA3C,CAAtC,CAAxB;AACH,aAPD;AAQH,SAfD;AAgBH;AA7HI,CAAT","file":"Candy_line.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Candy\\Candy_line","sourcesContent":["\r\nvar helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lines:     cc.Node,\r\n        mainLines: cc.Node,\r\n    },\r\n    init: function(obj){\r\n        this.RedT = obj;\r\n        var self = this;;\r\n        Promise.all(this.mainLines.children.map(function(line){\r\n            return line.getComponent('Candy_iLine');\r\n        }))\r\n        .then(result => {\r\n            this.mainLines = result;\r\n        });\r\n        this.selectAll(null, \"1\");\r\n    },\r\n    onOpen: function(){\r\n        cc.RedT.audio.playClick();\r\n        this.node.active = true;\r\n    },\r\n    onClose: function(){\r\n        cc.RedT.audio.playUnClick();\r\n        if (this.node.active && this.data.length < 1) {\r\n            this.RedT.notice.show({title:'CẢNH BÁO', text:'Chọn ít nhất 1 dòng'});\r\n        }else{\r\n            this.node.active = false;\r\n        }\r\n    },\r\n    select: function(e) {\r\n        var node = e.target;\r\n        if (node.children[0].active) {\r\n            node.children[0].active = false;\r\n            node.children[1].active = true;\r\n        }else{\r\n            node.children[0].active = true;\r\n            node.children[1].active = false;\r\n        }\r\n        this.check();\r\n    },\r\n    check: function() {\r\n        var self = this;\r\n        Promise.all(this.lines.children.map(function(line, index){\r\n            return line.children[1].active ? index+1 : void 0;\r\n        }))\r\n        .then(result => {\r\n            Promise.all(result.filter(function(data){\r\n                return void 0 !== data;\r\n            }))\r\n            .then(data => {\r\n                this.data = data;\r\n                this.RedT.labelLine.string = data.length;\r\n                this.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n            })\r\n        })\r\n    },\r\n    selectChan: function() {\r\n        var self = this;\r\n        Promise.all(this.lines.children.map(function(line, index){\r\n            var i = index+1;\r\n            if (i%2) {\r\n                line.children[0].active = true;\r\n                line.children[1].active = false;\r\n            }else{\r\n                line.children[0].active = false;\r\n                line.children[1].active = true;\r\n                return i;\r\n            }\r\n            return void 0;\r\n        }))\r\n        .then(result => {\r\n            Promise.all(result.filter(function(data){\r\n                return void 0 !== data;\r\n            }))\r\n            .then(data => {\r\n                this.data = data;\r\n                this.RedT.labelLine.string = data.length;\r\n                this.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n            })\r\n        })\r\n    },\r\n    selectLe: function() {\r\n        var self = this;\r\n        Promise.all(this.lines.children.map(function(line, index){\r\n            var i = index+1;\r\n            if (i%2) {\r\n                line.children[0].active = false;\r\n                line.children[1].active = true;\r\n                return i;\r\n            }else{\r\n                line.children[0].active = true;\r\n                line.children[1].active = false;\r\n            }\r\n            return void 0;\r\n        }))\r\n        .then(result => {\r\n            Promise.all(result.filter(function(data){\r\n                return void 0 !== data;\r\n            }))\r\n            .then(data => {\r\n                this.data = data;\r\n                this.RedT.labelLine.string = data.length;\r\n                this.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n            })\r\n        })\r\n    },\r\n    selectAll: function(e, select) {\r\n        var self = this;\r\n        Promise.all(this.lines.children.map(function(line, index){\r\n            var check = select == \"1\";\r\n            line.children[1].active = check;\r\n            line.children[0].active = !check;\r\n            return check ? index+1 : void 0;\r\n        }))\r\n        .then(result => {\r\n            Promise.all(result.filter(function(data, index){\r\n                return void 0 !== data;\r\n            }))\r\n            .then(data => {\r\n                this.data = data;\r\n                this.RedT.labelLine.string = data.length;\r\n                this.RedT.tong.string = helper.numberWithCommas(data.length * helper.getOnlyNumberInString(this.RedT.bet.string));\r\n            })\r\n        });\r\n    },\r\n});\r\n"]}