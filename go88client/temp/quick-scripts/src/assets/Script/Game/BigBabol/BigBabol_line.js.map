{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\BigBabol/assets\\Script\\Game\\BigBabol\\BigBabol_line.js"],"names":["cc","Class","extends","Component","properties","background","Node","nodeLine","mainLine","init","obj","RedT","mainLineInit","setting","big_babol","line","children","forEach","isSelect","onEnable","on","EventType","MOUSE_ENTER","setTop","onDisable","off","toggle","node","active","length","addNotice","select","e","target","color","Color","WHITE","check","self","Promise","all","map","index","then","result","filter","data","labelLine","string","selectChan","i","selectLe","selectAll","reInit","getComponent","a","name"],"mappings":"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","file":"BigBabol_line.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\BigBabol","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tbackground: cc.Node,\r\n\t\tnodeLine:   cc.Node,\r\n\t\tmainLine:   cc.Node,\r\n\t},\r\n\tinit(obj){\r\n\t\tthis.RedT = obj;\r\n\t\tthis.mainLineInit(void 0 !== cc.RedT.setting.big_babol.line);\r\n\r\n\t\tthis.nodeLine.children.forEach(function(line){\r\n\t\t\tline.isSelect = true;\r\n\t\t});\r\n\t},\r\n\tonEnable: function() {\r\n\t\tthis.background.on(cc.Node.EventType.MOUSE_ENTER,  this.RedT.setTop, this.RedT);\r\n\t},\r\n\tonDisable: function() {\r\n\t\tthis.background.off(cc.Node.EventType.MOUSE_ENTER, this.RedT.setTop, this.RedT);\r\n\t},\r\n\ttoggle: function(){\r\n\t\tif (this.node.active && cc.RedT.setting.big_babol.line.length < 1) {\r\n\t\t\tthis.RedT.addNotice('Chọn ít nhất 1 dòng');\r\n\t\t}else{\r\n\t\t\tthis.node.active = !this.node.active;\r\n\t\t}\r\n\t},\r\n\tselect: function(e) {\r\n\t\tvar node = e.target;\r\n\t\tnode.isSelect = !node.isSelect;\r\n\t\tif (node.isSelect) {\r\n\t\t\tnode.children[0].color = cc.Color.WHITE;\r\n\t\t}else{\r\n\t\t\tnode.children[0].color = cc.color(155,155,155);\r\n\t\t}\r\n\t\tthis.check();\r\n\t},\r\n\tcheck: function() {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.nodeLine.children.map(function(line, index){\r\n\t\t\tif (line.isSelect){\r\n\t\t\t\treturn index+1;\r\n\t\t\t}else{\r\n\t\t\t\treturn void 0;\r\n\t\t\t}\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tcc.RedT.setting.big_babol.line = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length + ' dòng';\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tselectChan: function() {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.nodeLine.children.map(function(line, index){\r\n\t\t\tvar i = index+1;\r\n\t\t\tif (i%2) {\r\n\t\t\t\tline.isSelect = false;\r\n\t\t\t\tline.children[0].color = cc.color(155,155,155);\r\n\t\t\t}else{\r\n\t\t\t\tline.isSelect = true;\r\n\t\t\t\tline.children[0].color = cc.Color.WHITE;\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\treturn void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tcc.RedT.setting.big_babol.line = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length + ' dòng';\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tselectLe: function() {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.nodeLine.children.map(function(line, index){\r\n\t\t\tvar i = index+1;\r\n\t\t\tif (i%2) {\r\n\t\t\t\tline.isSelect = true;\r\n\t\t\t\tline.children[0].color = cc.Color.WHITE;\r\n\t\t\t\treturn i;\r\n\t\t\t}else{\r\n\t\t\t\tline.isSelect = false;\r\n\t\t\t\tline.children[0].color = cc.color(155,155,155);\r\n\t\t\t}\r\n\t\t\treturn void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data){\r\n\t\t\t\treturn void 0 !== data;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tcc.RedT.setting.big_babol.line = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length + ' dòng';\r\n\t\t\t})\r\n\t\t})\r\n\t},\r\n\tselectAll: function(e, select) {\r\n\t\tvar self = this;\r\n\t\tPromise.all(this.nodeLine.children.map(function(line, index){\r\n\t\t\tvar check = select === \"1\";\r\n\t\t\tif (check) {\r\n\t\t\t\tline.isSelect = true;\r\n\t\t\t\tline.children[0].color = cc.Color.WHITE;\r\n\t\t\t}else{\r\n\t\t\t\tline.isSelect = false;\r\n\t\t\t\tline.children[0].color = cc.color(155,155,155);\r\n\t\t\t}\r\n\t\t\treturn check ? index+1 : void 0;\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tPromise.all(result.filter(function(data, index){\r\n\t\t\t\tvar check = void 0 !== data;\r\n\t\t\t\treturn check;\r\n\t\t\t}))\r\n\t\t\t.then(data => {\r\n\t\t\t\tcc.RedT.setting.big_babol.line = data;\r\n\t\t\t\tthis.RedT.labelLine.string = data.length + ' dòng';\r\n\t\t\t})\r\n\t\t});\r\n\t},\r\n\r\n\t// Main line\r\n\tmainLineInit: function(reInit){\r\n\t\tvar self = this;;\r\n\t\tPromise.all(this.mainLine.children.map(function(line){\r\n\t\t\treturn line.getComponent('BigBabol_main_line')\r\n\t\t\t\t\t.init(self.RedT);\r\n\t\t}))\r\n\t\t.then(result => {\r\n\t\t\tthis.mainLine = result;\r\n\t\t\tif (reInit) {\r\n\t\t\t\tthis.RedT.labelLine.string = cc.RedT.setting.big_babol.line.length + ' dòng';\r\n\t\t\t\tthis.nodeLine.children.forEach(function(line, index){\r\n\t\t\t\t\tvar check = cc.RedT.setting.big_babol.line.filter(function(a){\r\n\t\t\t\t\t\treturn a == line.name;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (check.length) {\r\n\t\t\t\t\t\tline.isSelect = true;\r\n\t\t\t\t\t\tline.children[0].color = cc.Color.WHITE;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tline.isSelect = false;\r\n\t\t\t\t\t\tline.children[0].color = cc.color(155,155,155);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.selectAll(null, \"1\");\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n});\r\n"]}