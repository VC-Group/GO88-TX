{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Mini3Cay/assets\\Script\\Game\\Mini3Cay\\Mini3Cay_history.js"],"names":["helper","require","cc","Class","extends","Component","properties","page","Prefab","content","Node","cointRed","cointXu","red","init","obj","RedT","onLoad","instantiate","y","node","addChild","getComponent","Promise","all","children","map","then","result","onEnable","get_data","send","g","mini3cay","logs","changerCoint","active","onData","data","self","onSet","kmess","total","i","dataT","time","string","getStringDateByTime","phien","id","cuoc","numberWithCommas","bet","win","kq","index","spriteFrame","util","card","getCard","type"],"mappings":"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","file":"Mini3Cay_history.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Game\\Mini3Cay","sourcesContent":["\r\nvar helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        page:     cc.Prefab,\r\n        content:  cc.Node,\r\n        cointRed: cc.Node,\r\n        cointXu:  cc.Node,\r\n        red:      true,\r\n    },\r\n    init(obj){\r\n        this.RedT = obj;\r\n    },\r\n    onLoad () {\r\n        this.page = cc.instantiate(this.page);\r\n        this.page.y = -307;\r\n        this.node.addChild(this.page);\r\n        this.page = this.page.getComponent('Pagination');\r\n        Promise.all(this.content.children.map(function(obj){\r\n            return obj.getComponent('Mini3Cay_ihistory');\r\n        }))\r\n        .then(result => {\r\n            this.content = result;\r\n        })\r\n        this.page.init(this);\r\n    },\r\n    onEnable: function() {\r\n        this.get_data();\r\n    },\r\n    //onDisable: function() {\r\n    //},\r\n    get_data: function(page = 1){\r\n        cc.RedT.send({g:{mini3cay:{logs:{red: this.red, page: page}}}});\r\n    },\r\n    changerCoint: function(){\r\n        this.red             = !this.red;\r\n        this.cointRed.active = !this.cointRed.active;\r\n        this.cointXu.active  = !this.cointXu.active;\r\n        this.get_data();\r\n    },\r\n    onData: function(data){\r\n        var self = this;\r\n        this.page.onSet(data.page, data.kmess, data.total);\r\n        Promise.all(this.content.map(function(obj, i){\r\n            var dataT = data.data[i]\r\n            if (void 0 !== dataT) {\r\n                obj.node.active  = true;\r\n                obj.time.string  = helper.getStringDateByTime(dataT.time);\r\n                obj.phien.string = dataT.id;\r\n                obj.cuoc.string  = helper.numberWithCommas(dataT.bet);\r\n                obj.win.string   = helper.numberWithCommas(dataT.win);\r\n                Promise.all(obj.kq.map(function(kq, index){\r\n                    kq.spriteFrame = cc.RedT.util.card.getCard(dataT.kq[index].card, dataT.kq[index].type)\r\n                }))\r\n            }else{\r\n                obj.node.active = false;\r\n            }\r\n        }))\r\n    },\r\n    /**\r\n    reset: function(){\r\n        Promise.all(this.content.children.map(function(obj){\r\n            obj.node.active = false;\r\n        }))\r\n    },\r\n    */\r\n});\r\n"]}