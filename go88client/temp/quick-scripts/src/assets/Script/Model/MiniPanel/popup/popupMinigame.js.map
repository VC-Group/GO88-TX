{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\MiniPanel\\popup/assets\\Script\\Model\\MiniPanel\\popup\\popupMinigame.js"],"names":["cc","Class","extends","Component","properties","list","default","type","Node","time","Label","nodeTime","panel","onLoad","RedT","setting","popupMini","ttOffset","ttOffset2","toggleRuning","position","node","open","active","v2","scale","onEnable","on","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","onDisable","off","e","setTop","touch","getLocationX","x","getLocationY","y","Math","abs","inGame","width","height","xChanger","yChanger","toggle","audio","playClick","stopAllActions","runAction","moveTo","sequence","spawn","scaleTo","easing","easeBackIn","rotateTo","callFunc","easeBackOut","parent","insertChild"],"mappings":"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","file":"popupMinigame.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\MiniPanel\\popup","sourcesContent":["\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tlist: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Label\r\n\t\t},\r\n\t\tnodeTime: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tpanel: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t},\r\n\tonLoad () {\r\n\t\tcc.RedT.setting.popupMini = cc.RedT.setting.popupMini || {};\r\n\t\tthis.ttOffset     = null;\r\n\t\tthis.ttOffset2    = null;\r\n\t\tthis.toggleRuning = false;\r\n\t\tif (void 0 !== cc.RedT.setting.popupMini.position) {\r\n\t\t\tthis.node.position = cc.RedT.setting.popupMini.position;\r\n\t\t}\r\n\t\tif (void 0 !== cc.RedT.setting.popupMini.open) {\r\n\t\t\tif(cc.RedT.setting.popupMini.open){\r\n\t\t\t\tthis.list.active = true;\r\n\t\t\t\tthis.nodeTime.position = cc.v2(-155.7, 43);\r\n\t\t\t\tthis.list.scale = 1;\r\n\t\t\t}else{\r\n\t\t\t\tthis.nodeTime.position = cc.v2(25, 43);\r\n\t\t\t\tthis.list.scale = 0.2;\r\n\t\t\t\tthis.list.active = false\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonEnable: function () {\r\n\t\tthis.panel.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.panel.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.panel.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.panel.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t// this.panel.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\t},\r\n\tonDisable: function () {\r\n\t\tthis.panel.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.panel.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.panel.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.panel.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t\t// this.panel.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);\r\n\t},\r\n\teventStart: function(e){\r\n\t\tthis.setTop();\r\n\t\tthis.ttOffset  = cc.v2(e.touch.getLocationX() - this.node.position.x, e.touch.getLocationY() - this.node.position.y)\r\n\t\tthis.ttOffset2 = cc.v2(e.touch.getLocationX() - (e.touch.getLocationX() - this.node.position.x), e.touch.getLocationY() - (e.touch.getLocationY() - this.node.position.y))\r\n\t},\r\n\teventMove: function(e){\r\n\t\tlet x = e.touch.getLocationX()-this.ttOffset.x;\r\n\t\tlet y = e.touch.getLocationY()-this.ttOffset.y;\r\n\t\tif (Math.abs(x) > cc.RedT.inGame.node.width/2-50) {\r\n\t\t\tx = x < 0 ? (-cc.RedT.inGame.node.width/2)+50 : (cc.RedT.inGame.node.width/2)-50;\r\n\t\t}\r\n\t\tif (Math.abs(y) > cc.RedT.inGame.node.height/2-50) {\r\n\t\t\ty = y < 0 ? (-cc.RedT.inGame.node.height/2)+50 : (cc.RedT.inGame.node.height/2)-50;\r\n\t\t}\r\n\t\tthis.node.position = cc.v2(x, y);\r\n\t},\r\n\teventEnd: function(e){\r\n\t\tcc.RedT.setting.popupMini.position = this.node.position;\r\n\t\tthis.xChanger = this.ttOffset2.x - (e.touch.getLocationX() - this.ttOffset.x)\r\n\t\tthis.yChanger = this.ttOffset2.y - (e.touch.getLocationY() - this.ttOffset.y)\r\n\t\tif (this.xChanger <  5 &&\r\n\t\t\tthis.xChanger > -5 &&\r\n\t\t\tthis.yChanger <  5 &&\r\n\t\t\tthis.yChanger > -5) {\r\n\t\t\tthis.toggle()\r\n\t\t}\r\n\t},\r\n\ttoggle: function(){\r\n\t\tcc.RedT.audio.playClick();\r\n\t\tif (!this.toggleRuning){\r\n\t\t\tthis.toggleRuning = true;\r\n\t\t\tthis.list.stopAllActions();\r\n\t\t\tif (this.list.active) {\r\n\t\t\t\tcc.RedT.setting.popupMini.open = false;\r\n\t\t\t\tif (this.nodeTime.active) {\r\n\t\t\t\t\tthis.nodeTime.runAction(cc.moveTo(0.3, cc.v2(25, 43)));\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.nodeTime.position = cc.v2(25, 43);\r\n\t\t\t\t}\r\n\t\t\t\tthis.list.runAction(cc.sequence(cc.spawn(cc.scaleTo(0.3, 0.2).easing(cc.easeBackIn(3.0)), cc.rotateTo(0.3, -720)), cc.callFunc(function(){\r\n\t\t\t\t\tthis.toggleRuning = this.list.active = false\r\n\t\t\t\t}, this)));\r\n\t\t\t}else{\r\n\t\t\t\tthis.list.active = cc.RedT.setting.popupMini.open = true;\r\n\t\t\t\tif (this.nodeTime.active) {\r\n\t\t\t\t\tthis.nodeTime.runAction(cc.moveTo(0.3, cc.v2(-155.7, 43)));\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.nodeTime.position = cc.v2(-155.7, 43);\r\n\t\t\t\t}\r\n\t\t\t\tthis.list.runAction(cc.sequence(cc.spawn(cc.scaleTo(0.3, 1).easing(cc.easeBackOut(3.0)), cc.rotateTo(0.3, 720)), cc.callFunc(function(){\r\n\t\t\t\t\tthis.toggleRuning = false;\r\n\t\t\t\t}, this)));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetTop: function(){\r\n\t\tthis.node.parent.insertChild(this.node);\r\n\t},\r\n});\r\n"]}