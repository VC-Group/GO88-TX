{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\MiniPanel\\dialog\\PokerNap/assets\\Script\\Model\\MiniPanel\\dialog\\PokerNap\\PokerNap.js"],"names":["Helper","require","cc","Class","extends","Component","properties","touch","Node","mask","toggle","Toggle","labelBet","Label","labelMin","labelMax","min","max","init","obj","RedT","betMin","bet","betMax","h","string","numberWithCommas","isChecked","onEnable","node","runAction","inGame","dialog","actionShow","on","EventType","TOUCH_START","eventStart","TOUCH_MOVE","eventMove","TOUCH_END","eventEnd","TOUCH_CANCEL","onDisable","resetSizeDialog","off","width","position","v2","e","scaleTo","offsetX","localX","getLocationX","x","onOkClick","loading","active","send","g","poker","reg","room","balans","getOnlyNumberInString","auto","onCancelClick","onClickBack"],"mappings":"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","file":"PokerNap.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\MiniPanel\\dialog\\PokerNap","sourcesContent":["\r\nvar Helper = require('Helper');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    \ttouch:    cc.Node,\r\n    \tmask:     cc.Node,\r\n    \ttoggle:   cc.Toggle,\r\n        labelBet: cc.Label,\r\n        labelMin: cc.Label,\r\n        labelMax: cc.Label,\r\n        min: '',\r\n        max: '',\r\n    },\r\n    init: function(obj){\r\n    \tthis.RedT   = obj;\r\n    \tthis.betMin = obj.bet*this.min;\r\n    \tthis.betMax = obj.bet*this.max;\r\n    \tthis.h      = this.betMin < 1000000 ? 1000 : 1000000;\r\n\r\n    \tthis.labelMin.string = this.labelBet.string = Helper.numberWithCommas(this.betMin);\r\n    \tthis.labelMax.string = Helper.numberWithCommas(this.betMax);\r\n    \tthis.betMin = this.betMin/this.h;\r\n    \tthis.betMax = this.betMax/this.h;\r\n\r\n    \tthis.toggle.isChecked = true;\r\n    },\r\n    onEnable: function() {\r\n        this.node.runAction(cc.RedT.inGame.dialog.actionShow);\r\n\t\tthis.touch.on(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.touch.on(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.touch.on(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.touch.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\t},\r\n\tonDisable: function() {\r\n        cc.RedT.inGame.dialog.resetSizeDialog(this.node);\r\n\t\tthis.touch.off(cc.Node.EventType.TOUCH_START,  this.eventStart, this);\r\n\t\tthis.touch.off(cc.Node.EventType.TOUCH_MOVE,   this.eventMove,  this);\r\n\t\tthis.touch.off(cc.Node.EventType.TOUCH_END,    this.eventEnd,   this);\r\n\t\tthis.touch.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd,   this);\r\n\r\n\t\tthis.mask.width     = 0;\r\n\t\tthis.touch.position = cc.v2(0, 0);\r\n\t},\r\n\teventStart: function(e){\r\n\t\tthis.touch.runAction(cc.scaleTo(0.1, 0.7));\r\n\t\tthis.offsetX = {localX: e.touch.getLocationX(), x: this.touch.position.x};\r\n\t},\r\n\teventMove: function(e){\r\n\t\tvar x = e.touch.getLocationX()-this.offsetX.localX+this.offsetX.x;\r\n\t\tif (x < 0) {\r\n\t\t\tx = 0;\r\n\t\t}else if(x > 401){\r\n\t\t\tx = 401;\r\n\t\t}\r\n\t\tthis.mask.width = x;\r\n\t\tthis.touch.position = cc.v2(x, 0);\r\n\t\tvar bet = (((x/401)*(this.betMax-this.betMin))+this.betMin)>>0;\r\n\t\tthis.labelBet.string = Helper.numberWithCommas(bet*this.h);\r\n\t},\r\n\teventEnd: function(){\r\n\t\tthis.touch.runAction(cc.scaleTo(0.1, 0.6));\r\n\t},\r\n\tonOkClick: function(){\r\n\t\tcc.RedT.inGame.loading.active = true;\r\n\t\tcc.RedT.send({g:{poker:{reg:{\r\n\t\t\troom: this.RedT.bet,\r\n\t\t\tbalans: Helper.getOnlyNumberInString(this.labelBet.string),\r\n\t\t\tauto: this.toggle.isChecked,\r\n\t\t}}}});\r\n\t},\r\n\tonCancelClick: function(){\r\n\t\tcc.RedT.inGame.dialog.onClickBack();\r\n\t},\r\n});\r\n"]}