{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\Shop\\Bank/assets\\Script\\Model\\Dialog\\Shop\\Bank\\bankATM.js"],"names":["BrowserUtil","require","helper","cc","Class","extends","Component","properties","labelATMBank","Label","ATMID","String","prefab","Prefab","moreBank","Node","contentATMBank","inputTien","EditBox","editOTP","loadList","typeOTP","onEnable","getList","onDisable","RedT","send","onData","data","list","onListATM","map","obj","index","item","instantiate","comp","getComponent","init","id","text","string","name","addChild","bind","onListClick","toggleMoreBank","active","onChangerRed","value","numberWithCommas","getOnlyNumberInString","changerTypeOTP","e","node","onClickOTP","otp","type","onClickTiep","amount","inGame","notice","show","title","length","bgLoading"],"mappings":"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","file":"bankATM.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\Shop\\Bank","sourcesContent":["\r\nvar BrowserUtil = require('BrowserUtil');\r\nvar helper      = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tlabelATMBank:   cc.Label,\r\n\t\tATMID:          cc.String,\r\n\t\tprefab:         cc.Prefab,\r\n\t\tmoreBank:       cc.Node,\r\n\t\tcontentATMBank: cc.Node,\r\n\t\tinputTien:      cc.EditBox,\r\n\t\teditOTP:        cc.EditBox,\r\n\t\tloadList:       false,\r\n\t\ttypeOTP:        '',\r\n\t},\r\n\tonEnable: function () {\r\n\t\tthis.loadList === false && this.getList();\r\n\t},\r\n\tonDisable: function () {\r\n\t\t\r\n\t\t//this.clean();\r\n\t},\r\n\tgetList: function(){\r\n\t\tcc.RedT.send({'shop':{'bank':{'atm':{'list':true}}}});\r\n\t},\r\n\tonData: function(data){\r\n\t\tif (void 0 !== data.list) {\r\n\t\t\tthis.onListATM(data.list);\r\n\t\t}\r\n\t},\r\n\tonListATM:function(data){\r\n\t\tthis.loadList = true;\r\n\t\tthis['i_arg'] = data.map(function(obj, index){\r\n\t\t\tlet item = cc.instantiate(this.prefab);\r\n\t\t\tlet comp = item.getComponent('NapRed_itemOne');\r\n\t\t\tcomp.init(this, 'i_arg', 'labelATMBank', 'onListClick')\r\n\t\t\tcomp.id          = obj.id;\r\n\t\t\tcomp.text.string = obj.name;\r\n\t\t\tthis.contentATMBank.addChild(item);\r\n\t\t\tcomp.data = obj;\r\n\t\t\treturn comp;\r\n\t\t}.bind(this));\r\n\t},\r\n\tonListClick: function(data){\r\n\t\tthis.ATMID = data.id;\r\n\t},\r\n\ttoggleMoreBank: function(){\r\n\t\tthis.moreBank.active = !this.moreBank.active;\r\n\t},\r\n\tonChangerRed: function(value = 0){\r\n\t\tvalue = helper.numberWithCommas(helper.getOnlyNumberInString(value));\r\n\t\tthis.inputTien.string = value == 0 ? '' : value;\r\n\t},\r\n\tchangerTypeOTP: function(e){\r\n\t\tthis.typeOTP = e.node.name;\r\n\t},\r\n\tonClickOTP: function(){\r\n\t\tcc.RedT.send({otp:{type:this.typeOTP}});\r\n\t},\r\n\tonClickTiep: function(){\r\n\t\tlet amount = helper.getOnlyNumberInString(this.inputTien.string)>>0;\r\n\t\tif (amount < 50000) {\r\n\t\t\tcc.RedT.inGame.notice.show({title:'', text:'Nạp tối thiểu 50.000'});\r\n\t\t}else if (this.ATMID.length === 0) {\r\n\t\t\tcc.RedT.inGame.notice.show({title:'', text:'Vui lòng chọn thẻ ATM thuộc Ngân Hàng bạn muốn nạp.'});\r\n\t\t}else if(this.editOTP.string.length < 4){\r\n\t\t\tcc.RedT.inGame.notice.show({title:'', text:'Mã OTP không hợp lệ.'});\r\n\t\t}else{\r\n\t\t\tcc.RedT.inGame.bgLoading.onData({active:true, text:'Đang gửi yêu cầu...'});\r\n\t\t\tcc.RedT.send({'shop':{'bank':{'atm':{'select':{'id':this.ATMID, 'name':this.labelATMBank.string, 'amount':amount, 'otp':this.editOTP.string}}}}});\r\n\t\t}\r\n\t},\r\n});\r\n"]}