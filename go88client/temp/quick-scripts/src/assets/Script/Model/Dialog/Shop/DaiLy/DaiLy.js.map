{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\Shop\\DaiLy/assets\\Script\\Model\\Dialog\\Shop\\DaiLy\\DaiLy.js"],"names":["cc","Class","extends","Component","properties","header","Node","body","isLoaded","content","prefabDaiLy","Prefab","init","obj","RedT","daily_list","onLoad","children","map","getComponent","onEnable","DaiLy","loadDaiLy","send","shop","get_daily","onSelectHead","event","name","target","Promise","all","node","select","unselect","active","onData","data","onDaiLy","self","regex","RegExp","user","daily","index","ChuyenRed","meDaily","test","nickname","item","instantiate","bg","addChild"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAWL,GAAGM,IADN;AAERC,cAAWP,GAAGM,IAFN;AAGRE,kBAAU,KAHF;AAIRC,iBAAST,GAAGM,IAJJ;AAKRI,qBAAaV,GAAGW;AALR,KAHP;AAULC,QAVK,gBAUAC,GAVA,EAUI;AACL,aAAKC,IAAL,GAAYD,GAAZ;AACA,aAAKE,UAAL,GAAkB,EAAlB;AACH,KAbI;;AAcLC,YAAQ,kBAAU;AACd,aAAKX,MAAL,GAAc,KAAKA,MAAL,CAAYY,QAAZ,CAAqBC,GAArB,CAAyB,UAASL,GAAT,EAAc;AACjD,mBAAOA,IAAIM,YAAJ,CAAiB,iBAAjB,CAAP;AACH,SAFa,CAAd;AAGH,KAlBI;AAmBLC,cAAU,oBAAY;AAClB,aAAKN,IAAL,CAAUO,KAAV,CAAgBC,SAAhB;AACH,KArBI;AAsBLA,eAAW,qBAAW;AAClB,YAAG,CAAC,KAAKd,QAAT,EAAmB;AACfR,eAAGc,IAAH,CAAQS,IAAR,CAAa,EAACC,MAAK,EAACC,WAAU,IAAX,EAAN,EAAb;AACH;AACJ,KA1BI;AA2BLC,kBAAc,sBAASC,KAAT,EAAe;AACzB,YAAIC,OAAOD,MAAME,MAAN,CAAaD,IAAxB;AACAE,gBAAQC,GAAR,CAAY,KAAK1B,MAAL,CAAYa,GAAZ,CAAgB,UAASb,MAAT,EAAiB;AACzC,gBAAIA,OAAO2B,IAAP,CAAYJ,IAAZ,IAAoBA,IAAxB,EAA8B;AAC1BvB,uBAAO4B,MAAP;AACH,aAFD,MAEK;AACD5B,uBAAO6B,QAAP;AACH;AACJ,SANW,CAAZ;AAOAJ,gBAAQC,GAAR,CAAY,KAAKxB,IAAL,CAAUU,QAAV,CAAmBC,GAAnB,CAAuB,UAASX,IAAT,EAAe;AAC9C,gBAAIA,KAAKqB,IAAL,IAAaA,IAAjB,EAAuB;AACnBrB,qBAAK4B,MAAL,GAAc,IAAd;AACH,aAFD,MAEK;AACD5B,qBAAK4B,MAAL,GAAc,KAAd;AACH;AACJ,SANW,CAAZ;AAOH,KA3CI;AA4CLC,YAAQ,gBAASC,IAAT,EAAe;AACnB,YAAI,CAAC,KAAK7B,QAAV,EAAmB;AACf,iBAAKA,QAAL,GAAgB,IAAhB;AACA,iBAAK8B,OAAL,CAAaD,IAAb;AACH;AACJ,KAjDI;AAkDLC,aAAS,iBAASD,IAAT,EAAc;AACnB,YAAIE,OAAQ,IAAZ;AACA,YAAIC,QAAQ,IAAIC,MAAJ,CAAW,MAAMzC,GAAGc,IAAH,CAAQ4B,IAAR,CAAad,IAAnB,GAA0B,GAArC,EAA0C,GAA1C,CAAZ;AACA,aAAKb,UAAL,GAAkBsB,KAAKnB,GAAL,CAAS,UAASyB,KAAT,EAAgBC,KAAhB,EAAsB;AAC7C,aAACL,KAAKzB,IAAL,CAAU+B,SAAV,CAAoBC,OAArB,KAAiCP,KAAKzB,IAAL,CAAU+B,SAAV,CAAoBC,OAApB,GAA8BN,MAAMO,IAAN,CAAWJ,MAAMK,QAAjB,CAA/D;AACA,gBAAIC,OAAOjD,GAAGkD,WAAH,CAAeX,KAAK7B,WAApB,CAAX;AACAuC,mBAAOA,KAAK9B,YAAL,CAAkB,iBAAlB,CAAP;AACA8B,iBAAKrC,IAAL,CAAU2B,KAAKzB,IAAL,CAAU+B,SAApB,EAA+BF,KAA/B,EAAsCC,KAAtC;AACAK,iBAAKE,EAAL,CAAQhB,MAAR,GAAiBS,QAAM,CAAvB;AACAL,iBAAK9B,OAAL,CAAa2C,QAAb,CAAsBH,KAAKjB,IAA3B;AACA,mBAAOiB,IAAP;AACH,SARiB,CAAlB;AASH;AA9DI,CAAT","file":"DaiLy.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\Shop\\DaiLy","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        header:    cc.Node,\r\n        body:      cc.Node,\r\n        isLoaded: false,\r\n        content: cc.Node,\r\n        prefabDaiLy: cc.Prefab\r\n    },\r\n    init(obj){\r\n        this.RedT = obj;\r\n        this.daily_list = [];\r\n    },\r\n    onLoad: function(){\r\n        this.header = this.header.children.map(function(obj) {\r\n            return obj.getComponent('itemContentMenu');\r\n        });\r\n    },\r\n    onEnable: function () {\r\n        this.RedT.DaiLy.loadDaiLy();\r\n    },\r\n    loadDaiLy: function() {\r\n        if(!this.isLoaded) {\r\n            cc.RedT.send({shop:{get_daily:true}});\r\n        }\r\n    },\r\n    onSelectHead: function(event){\r\n        let name = event.target.name;\r\n        Promise.all(this.header.map(function(header) {\r\n            if (header.node.name == name) {\r\n                header.select();\r\n            }else{\r\n                header.unselect();\r\n            }\r\n        }));\r\n        Promise.all(this.body.children.map(function(body) {\r\n            if (body.name == name) {\r\n                body.active = true;\r\n            }else{\r\n                body.active = false;\r\n            }\r\n        }));\r\n    },\r\n    onData: function(data) {\r\n        if (!this.isLoaded){\r\n            this.isLoaded = true;\r\n            this.onDaiLy(data);\r\n        }\r\n    },\r\n    onDaiLy: function(data){\r\n        let self  = this;\r\n        let regex = new RegExp(\"^\" + cc.RedT.user.name + \"$\", 'i');\r\n        this.daily_list = data.map(function(daily, index){\r\n            !self.RedT.ChuyenRed.meDaily && (self.RedT.ChuyenRed.meDaily = regex.test(daily.nickname));\r\n            let item = cc.instantiate(self.prefabDaiLy);\r\n            item = item.getComponent('ChuyenRed_daily');\r\n            item.init(self.RedT.ChuyenRed, daily, index);\r\n            item.bg.active = index%2;\r\n            self.content.addChild(item.node);\r\n            return item;\r\n        });\r\n    },\r\n});\r\n"]}