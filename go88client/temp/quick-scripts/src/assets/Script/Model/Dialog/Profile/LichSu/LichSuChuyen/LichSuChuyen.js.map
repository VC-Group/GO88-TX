{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\Profile\\LichSu\\LichSuChuyen/assets\\Script\\Model\\Dialog\\Profile\\LichSu\\LichSuChuyen\\LichSuChuyen.js"],"names":["Helper","require","cc","Class","extends","Component","properties","content","default","type","Node","onLoad","Promise","all","children","map","obj","getComponent","then","resulf","onEnable","get_data","page","RedT","send","user","history","chuyen_red","onData","data","index","dataT","node","active","Time","string","getStringDateByTime","time","uFrom","from","uTo","to","Chuyen","numberWithCommas","red","Nhan","red_c","message","nodeMesenger","mesenger"],"mappings":";;;;;;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACRC,UAASF,GAAGG,SADJ;;AAGRC,aAAY;AACXC,WAAS;AACRC,YAAS,IADD;AAERC,SAASP,GAAGQ;AAFJ;AADE,EAHJ;AASRC,OATQ,oBASE;AAAA;;AACTC,UAAQC,GAAR,CAAY,KAAKN,OAAL,CAAaO,QAAb,CAAsBC,GAAtB,CAA0B,UAASC,GAAT,EAAa;AAClD,UAAOA,IAAIC,YAAJ,CAAiB,mBAAjB,CAAP;AACA,GAFW,CAAZ,EAGCC,IAHD,CAGM,kBAAU;AACf,SAAKX,OAAL,GAAeY,MAAf;AACA,GALD;AAMA,EAhBO;;AAiBRC,WAAU,oBAAY;AACrB,OAAKC,QAAL;AACA,EAnBO;AAoBRA,WAAU,oBAAkB;AAAA,MAATC,IAAS,uEAAF,CAAE;;AAC3BpB,KAAGqB,IAAH,CAAQC,IAAR,CAAa,EAACC,MAAK,EAACC,SAAQ,EAACC,YAAW,EAACL,MAAKA,IAAN,EAAZ,EAAT,EAAN,EAAb;AACA,EAtBO;AAuBRM,SAAQ,gBAASC,IAAT,EAAc;AACrBjB,UAAQC,GAAR,CAAY,KAAKN,OAAL,CAAaQ,GAAb,CAAiB,UAASC,GAAT,EAAcc,KAAd,EAAoB;AAChD,OAAIC,QAAQF,KAAKC,KAAL,CAAZ;AACA,OAAI,KAAK,CAAL,KAAWC,KAAf,EAAsB;AACrBf,QAAIgB,IAAJ,CAASC,MAAT,GAAoB,IAApB;AACAjB,QAAIkB,IAAJ,CAASC,MAAT,GAAoBnC,OAAOoC,mBAAP,CAA2BL,MAAMM,IAAjC,CAApB;AACArB,QAAIsB,KAAJ,CAAUH,MAAV,GAAoBJ,MAAMQ,IAA1B;AACAvB,QAAIwB,GAAJ,CAAQL,MAAR,GAAoBJ,MAAMU,EAA1B;AACAzB,QAAI0B,MAAJ,CAAWP,MAAX,GAAoBnC,OAAO2C,gBAAP,CAAwBZ,MAAMa,GAA9B,CAApB;AACA5B,QAAI6B,IAAJ,CAASV,MAAT,GAAoBnC,OAAO2C,gBAAP,CAAwBZ,MAAMe,KAA9B,CAApB;AACA,QAAI,KAAK,CAAL,KAAWf,MAAMgB,OAArB,EAA8B;AAC7B/B,SAAIgC,YAAJ,CAAiBf,MAAjB,GAA0B,IAA1B;AACAjB,SAAIiC,QAAJ,GAAelB,MAAMgB,OAArB;AACA,KAHD,MAGK;AACJ/B,SAAIgC,YAAJ,CAAiBf,MAAjB,GAA0B,KAA1B;AACAjB,SAAIiC,QAAJ,GAAe,IAAf;AACA;AACD,IAdD,MAcK;AACJjC,QAAIgB,IAAJ,CAASC,MAAT,GAAkB,KAAlB;AACA;AACD,GAnBW,CAAZ;AAoBA;AA5CO,CAAT","file":"LichSuChuyen.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\Profile\\LichSu\\LichSuChuyen","sourcesContent":["\r\nvar Helper = require('Helper');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tcontent: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype:    cc.Node,\r\n\t\t},\r\n\t},\r\n\tonLoad () {\r\n\t\tPromise.all(this.content.children.map(function(obj){\r\n\t\t\treturn obj.getComponent('LichSuChuyen_item');\r\n\t\t}))\r\n\t\t.then(resulf => {\r\n\t\t\tthis.content = resulf;\r\n\t\t});\r\n\t},\r\n\tonEnable: function () {\r\n\t\tthis.get_data();\r\n\t},\r\n\tget_data: function(page = 1){\r\n\t\tcc.RedT.send({user:{history:{chuyen_red:{page:page}}}});\r\n\t},\r\n\tonData: function(data){\r\n\t\tPromise.all(this.content.map(function(obj, index){\r\n\t\t\tvar dataT = data[index];\r\n\t\t\tif (void 0 !== dataT) {\r\n\t\t\t\tobj.node.active   = true;\r\n\t\t\t\tobj.Time.string   = Helper.getStringDateByTime(dataT.time);\r\n\t\t\t\tobj.uFrom.string  = dataT.from;\r\n\t\t\t\tobj.uTo.string    = dataT.to;\r\n\t\t\t\tobj.Chuyen.string = Helper.numberWithCommas(dataT.red);\r\n\t\t\t\tobj.Nhan.string   = Helper.numberWithCommas(dataT.red_c);\r\n\t\t\t\tif (void 0 !== dataT.message) {\r\n\t\t\t\t\tobj.nodeMesenger.active = true;\r\n\t\t\t\t\tobj.mesenger = dataT.message;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tobj.nodeMesenger.active = false;\r\n\t\t\t\t\tobj.mesenger = null;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tobj.node.active = false;\r\n\t\t\t}\r\n\t\t}));\r\n\t},\r\n});\r\n"]}