{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\SignUp/assets\\Script\\Model\\Dialog\\SignUp\\SignUp.js"],"names":["BrowserUtil","require","cc","Class","extends","Component","properties","username","default","type","EditBox","password","repassword","captcha","capchaSprite","Sprite","onLoad","self","editboxs","keyHandle","t","keyCode","macro","KEY","tab","changeNextFocusEditBox","preventDefault","enter","focusGame","onSignUpClick","escape","RedT","inGame","dialog","onClickBack","onEnable","sys","isBrowser","addEvent","node","runAction","actionShow","reCaptcha","onDisable","removeEvent","clean","resetSizeDialog","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","getHTMLElementByEditBox","addEventListener","removeEventListener","off","event","isTop","e","i","length","checkEditBoxFocus","focusEditBox","notice","active","loading","string","error","match","RegExp","show","title","text","auth","authentication","register","initCaptcha","o","Image","src","width","height","setTimeout","Texture2D","initWithElement","handleLoadedTexture","SpriteFrame","spriteFrame","send"],"mappings":"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","file":"SignUp.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Model\\Dialog\\SignUp","sourcesContent":["\r\nvar BrowserUtil = require('BrowserUtil');\r\n\r\ncc.Class({\r\n\textends: cc.Component,\r\n\r\n\tproperties: {\r\n\t\tusername: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.EditBox,\r\n\t\t},\r\n\t\tpassword: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.EditBox,\r\n\t\t},\r\n\t\trepassword: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.EditBox,\r\n\t\t},\r\n\t\tcaptcha: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.EditBox,\r\n\t\t},\r\n\t\tcapchaSprite: cc.Sprite,\r\n\t},\r\n\tonLoad () {\r\n\t\tvar self = this;\r\n\t\tthis.editboxs = [this.username, this.password, this.repassword, this.captcha];\r\n\t\tthis.keyHandle = function(t) {\r\n\t\t\treturn t.keyCode === cc.macro.KEY.tab ? (self.changeNextFocusEditBox(),\r\n\t\t\t\tt.preventDefault && t.preventDefault(),\r\n\t\t\t\t!1) : t.keyCode === cc.macro.KEY.enter ? (BrowserUtil.focusGame(), self.onSignUpClick(),\r\n\t\t\t\tt.preventDefault && t.preventDefault(),\r\n\t\t\t\t!1) : t.keyCode === cc.macro.KEY.escape ? (cc.RedT.inGame.dialog.onClickBack(),\r\n\t\t\t\tt.preventDefault && t.preventDefault(),\r\n\t\t\t\t!1) : void 0\r\n\t\t}\r\n\t},\r\n\tonEnable: function () {\r\n\t\tcc.sys.isBrowser && this.addEvent();\r\n\t\tthis.node.runAction(cc.RedT.inGame.dialog.actionShow);\r\n\t\tthis.reCaptcha();\r\n\t},\r\n\tonDisable: function () {\r\n\t\tcc.sys.isBrowser && this.removeEvent();\r\n\t\tthis.clean();\r\n\t\tcc.RedT.inGame.dialog.resetSizeDialog(this.node);\r\n\t},\r\n\taddEvent: function() {\r\n\t\tcc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t\tfor (var t in this.editboxs) {\r\n\t\t\tBrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).addEventListener(\"keydown\", this.keyHandle, !1)\r\n\t\t}\r\n\t},\r\n\tremoveEvent: function() {\r\n\t\tfor (var t in this.editboxs) {\r\n\t\t\tBrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener(\"keydown\", this.keyHandle, !1)\r\n\t\t}\r\n\t\tcc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\t},\r\n\tonKeyDown: function (event) {\r\n\t\tswitch(event.keyCode) {\r\n\t\t\tcase cc.macro.KEY.escape:\r\n\t\t\t\tthis.isTop() && cc.RedT.inGame.dialog.onClickBack();\r\n\t\t\t\tbreak;\r\n\t\t\tcase cc.macro.KEY.tab:\r\n\t\t\t\tthis.isTop() && this.changeNextFocusEditBox();\r\n\t\t\t\tbreak;\r\n\t\t\tcase cc.macro.KEY.enter:\r\n\t\t\t\tthis.isTop() && this.onSignUpClick();\r\n\t\t}\r\n\t},\r\n\tchangeNextFocusEditBox: function() {\r\n\t\tfor (var t = !1, e = 0, i = this.editboxs.length; e < i; e++){\r\n            if (BrowserUtil.checkEditBoxFocus(this.editboxs[e])) {\r\n                BrowserUtil.focusEditBox(this.editboxs[e]);\r\n                t = !0;\r\n                break\r\n            }\r\n        }\r\n        !t && 0 < this.editboxs.length && BrowserUtil.focusEditBox(this.editboxs[0]);\r\n\t},\r\n\tisTop: function() {\r\n\t\treturn !cc.RedT.inGame.notice.node.active && !cc.RedT.inGame.loading.active;\r\n\t},\r\n\tclean: function(){\r\n\t\tthis.username.string = this.password.string = this.repassword.string = this.captcha.string = '';\r\n\t},\r\n\tonSignUpClick: function() {\r\n\t\tvar error = null;\r\n\r\n\t\tif (this.username.string.length > 32 || this.username.string.length < 3)\r\n\t\t\terror = 'Độ dài Tên tài khoản 3 - 32 ký tự!!';\r\n\t\telse if (this.password.string.length > 32 || this.password.string.length < 6)\r\n\t\t\terror = 'Độ dài mật khẩu 6 - 32 ký tự!!';\r\n\t\telse if (this.password.string !== this.repassword.string)\r\n\t\t\terror = 'Xác nhận mật khẩu không khớp!';\r\n\t\telse if (this.captcha.string.length < 4)\r\n\t\t  error = 'Vui lòng nhập Captcha.';\r\n\t\telse if (this.username.string == this.password.string)\r\n\t\t\terror = 'Tài khoản không được trùng với mật khẩu!!';\r\n\t\telse if (this.username.string.match(new RegExp(\"^[a-zA-Z0-9]+$\")) === null)\r\n\t\t\terror = 'Tên chỉ gồm Chữ và Số!';\r\n\r\n\t\tif (error) {\r\n\t\t\tcc.RedT.inGame.notice.show({title:\"ĐĂNG KÝ\", text:error});\r\n\t\t\treturn;\r\n\t\t};\r\n\t\tcc.RedT.inGame.auth({authentication:{username: this.username.string, password: this.password.string, register: true, captcha: this.captcha.string}});\r\n\t},\r\n\tinitCaptcha: function(t) {\r\n\t\tvar i = this\r\n\t\t  , o = new Image;\r\n\t\to.src = t,\r\n\t\to.width = 150,\r\n\t\to.height = 50,\r\n\t\tsetTimeout(function() {\r\n\t\t\tvar t = new cc.Texture2D;\r\n\t\t\tt.initWithElement(o),\r\n\t\t\tt.handleLoadedTexture();\r\n\t\t\tvar e = new cc.SpriteFrame(t);\r\n\t\t\ti.capchaSprite.spriteFrame = e\r\n\t\t}, 10)\r\n\t},\r\n\treCaptcha: function(){\r\n\t\tcc.RedT.send({captcha: 'signUp'});\r\n\t},\r\n});\r\n"]}