
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Splash/Splash.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '75b79AEMXNJqYRJtb538JJ4', 'Splash');
// Script/Splash/Splash.js

"use strict";

cc.Class({
	extends: cc.Component,
	properties: {
		messageLabel: cc.Label,
		manifestUrl: {
			default: null,
			type: cc.Asset
		},
		retryButtonNode: cc.Node,
		updateProgressBar: cc.Node,
		star: cc.Node,
		_am: null,
		_updating: !1,
		_canRetry: !1,
		_storagePath: ""
	},
	onLoad: function onLoad() {
		this.isLoadScene = !1;
		this.isLoadConfig = !1;
		this.initOneSign();
		cc.sys.isBrowser ? this.loadAssets() : (this.initHotUpdate(), this.checkUpdate());
	},
	initOneSign: function initOneSign() {
		this.checkPlugin() && (sdkbox.PluginOneSignal.init(), sdkbox.PluginOneSignal.setListener({
			onSendTag: function onSendTag(t, e, i) {},
			onGetTags: function onGetTags(t) {},
			onIdsAvailable: function onIdsAvailable(t, e) {},
			onPostNotification: function onPostNotification(t, e) {},
			onNotification: function onNotification(t, e, i) {}
		}));
	},
	checkPlugin: function checkPlugin() {
		return "undefined" == typeof sdkbox ? (console.log("sdkbox is undefined"), !1) : void 0 !== sdkbox.PluginOneSignal || (console.log("sdkbox.PluginFacebook is undefined"), !1);
	},
	loadAssets: function loadAssets() {
		this.updateProgress(0);
		this.messageLabel.string = "Đang lấy dữ liệu game ...";
		setTimeout(function () {
			this.loadScene();
		}.bind(this), 100);
	},
	loadScene: function loadScene() {
		cc.director.preloadScene("MainGame", this.onProgress.bind(this), this.onLoaded.bind(this));
	},
	onProgress: function onProgress(completedCount, totalCount) {
		// đang tải cảnh
		var RedT = completedCount / totalCount * 838 >> 0;
		this.updateProgress(RedT);
	},
	onLoaded: function onLoaded(err, asset) {
		// Tải cảnh thành công
		cc.director.loadScene("MainGame");
	},
	onDestroy: function onDestroy() {
		if (this._updateListener) {
			this._am.setEventCallback(null);
			this._updateListener = null;
		}
	},
	initHotUpdate: function initHotUpdate() {
		this.updateProgress(0);
		this._storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : "/") + "go88-remote-asset";
		this._am = new jsb.AssetsManager("", this._storagePath, this.versionCompareHandle);
		this._am.setVerifyCallback(function (t, e) {
			e.compressed;
			return !0;
		}.bind(this));
		cc.sys.os === cc.sys.OS_ANDROID && this._am.setMaxConcurrentTask(2);
	},
	checkUpdate: function checkUpdate() {
		if (this._updating) {
			this.messageLabel.string = "Đang kiểm tra phiên bản ...";
			return;
		}

		if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
			this._am.loadLocalManifest(this.manifestUrl.nativeUrl);
		}

		this._am.setEventCallback(this.checkCb.bind(this));
		this._am.checkUpdate();
		this._updating = true;
	},
	hotUpdate: function hotUpdate() {
		if (this._am && !this._updating) {
			this._am.setEventCallback(this.updateCb.bind(this));

			if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
				this._am.loadLocalManifest(this.manifestUrl.nativeUrl);
			}
			this._failCount = 0;
			this._am.update();
			this._updating = true;
		}
	},
	retry: function retry() {
		!this._updating && this._canRetry && (this.retryButtonNode.active = !1, this._canRetry = !1, this.messageLabel.string = "Thử lại ...", this._am.downloadFailedAssets());
	},
	checkCb: function checkCb(t) {
		var e = !1,
		    i = !1;
		switch (t.getEventCode()) {
			case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
				this.messageLabel.string = "Không tìm thấy Hot Update ...";
				break;
			case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
			case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
				this.messageLabel.string = "Tải manifest thất bại ...";
				break;
			case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
				this.updateProgress(838);
				this.messageLabel.string = "Phiên bản mới nhất ...";
				e = !0;
				break;
			case jsb.EventAssetsManager.NEW_VERSION_FOUND:
				this.messageLabel.string = "Tìm thấy phiên bản cập nhật ...";
				this.updateProgress(0);
				i = true;
				break;
			default:
				return;
		}
		this._am.setEventCallback(null);
		this._checkListener = null;
		this._updating = !1;
		e && this.loadAssets();
		i && this.hotUpdate();
	},
	updateCb: function updateCb(event) {
		var needRestart = false;
		var failed = false;
		switch (event.getEventCode()) {
			case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
				this.messageLabel.string = "Không tìm thấy Hot Update ...";
				failed = true;
				break;
			case jsb.EventAssetsManager.UPDATE_PROGRESSION:
				var RedT = event.getPercent() * 838;
				this.updateProgress(RedT);
				//event.getMessage();
				this.messageLabel.string = "Đang cập nhật ...";
				break;
			case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
			case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
				this.messageLabel.string = "Tải manifest thất bại ...";
				failed = true;
				break;
			case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
				this.updateProgress(838);
				this.messageLabel.string = "Phiên bản mới nhất ...";
				failed = true;
				break;
			case jsb.EventAssetsManager.UPDATE_FINISHED:
				this.messageLabel.string = "Cập nhật thành công";
				needRestart = true;
				break;
			case jsb.EventAssetsManager.UPDATE_FAILED:
				this.messageLabel.string = "Cập nhật thất bại";
				this.retryButtonNode.active = !0;
				this._updating = !1;
				this._canRetry = !0;
				break;
			case jsb.EventAssetsManager.ERROR_UPDATING:
				this.messageLabel.string = "Cập nhật thất bại";
				break;
			case jsb.EventAssetsManager.ERROR_DECOMPRESS:
				this.messageLabel.string = event.getMessage();
		}

		if (failed) {
			this._am.setEventCallback(null);
			this._updateListener = null;
			this._updating = false;
		}

		if (needRestart) {
			this._am.setEventCallback(null);
			this._updateListener = null;
			// Prepend the manifest's search path
			var searchPaths = jsb.fileUtils.getSearchPaths();
			var newPaths = this._am.getLocalManifest().getSearchPaths();
			Array.prototype.unshift.apply(searchPaths, newPaths);
			// This value will be retrieved and appended to the default search path during game startup,
			// please refer to samples/js-tests/main.js for detailed usage.
			// !!! Re-add the search paths in main.js is very important, otherwise, new scripts won't take effect.
			cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));
			jsb.fileUtils.setSearchPaths(searchPaths);

			cc.audioEngine.stopAll();
			cc.game.restart();
		}
	},
	onRetryClick: function onRetryClick() {
		this.retry();
	},
	versionCompareHandle: function versionCompareHandle(t, e) {
		console.log("JS Custom Version Compare: version A is " + t + ", version B is " + e), console.log("JS Custom Version Compare: version A is " + t + ", version B is " + e);
		for (var i = t.split("."), o = e.split("."), n = 0; n < i.length; ++n) {
			var s = parseInt(i[n]),
			    a = parseInt(o[n] || 0);
			if (s !== a) return s - a;
		}
		return o.length > i.length ? -1 : 0;
	},
	updateProgress: function updateProgress(progress) {
		this.updateProgressBar.width = progress;
		this.star.position = cc.v2(progress, 0);
	}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcYXNzZXRzXFxTY3JpcHRcXFNwbGFzaC8uLlxcLi5cXC4uXFwuLlxcLi5cXGFzc2V0c1xcU2NyaXB0XFxTcGxhc2gvYXNzZXRzXFxTY3JpcHRcXFNwbGFzaFxcU3BsYXNoLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJleHRlbmRzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsIm1lc3NhZ2VMYWJlbCIsIkxhYmVsIiwibWFuaWZlc3RVcmwiLCJkZWZhdWx0IiwidHlwZSIsIkFzc2V0IiwicmV0cnlCdXR0b25Ob2RlIiwiTm9kZSIsInVwZGF0ZVByb2dyZXNzQmFyIiwic3RhciIsIl9hbSIsIl91cGRhdGluZyIsIl9jYW5SZXRyeSIsIl9zdG9yYWdlUGF0aCIsIm9uTG9hZCIsImlzTG9hZFNjZW5lIiwiaXNMb2FkQ29uZmlnIiwiaW5pdE9uZVNpZ24iLCJzeXMiLCJpc0Jyb3dzZXIiLCJsb2FkQXNzZXRzIiwiaW5pdEhvdFVwZGF0ZSIsImNoZWNrVXBkYXRlIiwiY2hlY2tQbHVnaW4iLCJzZGtib3giLCJQbHVnaW5PbmVTaWduYWwiLCJpbml0Iiwic2V0TGlzdGVuZXIiLCJvblNlbmRUYWciLCJ0IiwiZSIsImkiLCJvbkdldFRhZ3MiLCJvbklkc0F2YWlsYWJsZSIsIm9uUG9zdE5vdGlmaWNhdGlvbiIsIm9uTm90aWZpY2F0aW9uIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZVByb2dyZXNzIiwic3RyaW5nIiwic2V0VGltZW91dCIsImxvYWRTY2VuZSIsImJpbmQiLCJkaXJlY3RvciIsInByZWxvYWRTY2VuZSIsIm9uUHJvZ3Jlc3MiLCJvbkxvYWRlZCIsImNvbXBsZXRlZENvdW50IiwidG90YWxDb3VudCIsIlJlZFQiLCJlcnIiLCJhc3NldCIsIm9uRGVzdHJveSIsIl91cGRhdGVMaXN0ZW5lciIsInNldEV2ZW50Q2FsbGJhY2siLCJqc2IiLCJmaWxlVXRpbHMiLCJnZXRXcml0YWJsZVBhdGgiLCJBc3NldHNNYW5hZ2VyIiwidmVyc2lvbkNvbXBhcmVIYW5kbGUiLCJzZXRWZXJpZnlDYWxsYmFjayIsImNvbXByZXNzZWQiLCJvcyIsIk9TX0FORFJPSUQiLCJzZXRNYXhDb25jdXJyZW50VGFzayIsImdldFN0YXRlIiwiU3RhdGUiLCJVTklOSVRFRCIsImxvYWRMb2NhbE1hbmlmZXN0IiwibmF0aXZlVXJsIiwiY2hlY2tDYiIsImhvdFVwZGF0ZSIsInVwZGF0ZUNiIiwiX2ZhaWxDb3VudCIsInVwZGF0ZSIsInJldHJ5IiwiYWN0aXZlIiwiZG93bmxvYWRGYWlsZWRBc3NldHMiLCJnZXRFdmVudENvZGUiLCJFdmVudEFzc2V0c01hbmFnZXIiLCJFUlJPUl9OT19MT0NBTF9NQU5JRkVTVCIsIkVSUk9SX0RPV05MT0FEX01BTklGRVNUIiwiRVJST1JfUEFSU0VfTUFOSUZFU1QiLCJBTFJFQURZX1VQX1RPX0RBVEUiLCJORVdfVkVSU0lPTl9GT1VORCIsIl9jaGVja0xpc3RlbmVyIiwiZXZlbnQiLCJuZWVkUmVzdGFydCIsImZhaWxlZCIsIlVQREFURV9QUk9HUkVTU0lPTiIsImdldFBlcmNlbnQiLCJVUERBVEVfRklOSVNIRUQiLCJVUERBVEVfRkFJTEVEIiwiRVJST1JfVVBEQVRJTkciLCJFUlJPUl9ERUNPTVBSRVNTIiwiZ2V0TWVzc2FnZSIsInNlYXJjaFBhdGhzIiwiZ2V0U2VhcmNoUGF0aHMiLCJuZXdQYXRocyIsImdldExvY2FsTWFuaWZlc3QiLCJBcnJheSIsInByb3RvdHlwZSIsInVuc2hpZnQiLCJhcHBseSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0U2VhcmNoUGF0aHMiLCJhdWRpb0VuZ2luZSIsInN0b3BBbGwiLCJnYW1lIiwicmVzdGFydCIsIm9uUmV0cnlDbGljayIsInNwbGl0IiwibyIsIm4iLCJsZW5ndGgiLCJzIiwicGFyc2VJbnQiLCJhIiwicHJvZ3Jlc3MiLCJ3aWR0aCIsInBvc2l0aW9uIiwidjIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7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RSxJQUFJQyxTQUFTeEYsRUFBRXFGLENBQUYsQ0FBVCxDQUFSO0FBQUEsT0FDSUksSUFBSUQsU0FBU0osRUFBRUMsQ0FBRixLQUFRLENBQWpCLENBRFI7QUFFQSxPQUFJRSxNQUFNRSxDQUFWLEVBQ0MsT0FBT0YsSUFBSUUsQ0FBWDtBQUNEO0FBQ0QsU0FBT0wsRUFBRUUsTUFBRixHQUFXdEYsRUFBRXNGLE1BQWIsR0FBc0IsQ0FBQyxDQUF2QixHQUEyQixDQUFsQztBQUNBLEVBcE5PO0FBcU5SL0UsaUJBQWdCLHdCQUFTbUYsUUFBVCxFQUFrQjtBQUNqQyxPQUFLakgsaUJBQUwsQ0FBdUJrSCxLQUF2QixHQUErQkQsUUFBL0I7QUFDQSxPQUFLaEgsSUFBTCxDQUFVa0gsUUFBVixHQUErQmhJLEdBQUdpSSxFQUFILENBQU1ILFFBQU4sRUFBZ0IsQ0FBaEIsQ0FBL0I7QUFDQTtBQXhOTyxDQUFUIiwiZmlsZSI6IlNwbGFzaC5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLlxcLi5cXGFzc2V0c1xcU2NyaXB0XFxTcGxhc2giLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2MuQ2xhc3Moe1xyXG5cdGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHRwcm9wZXJ0aWVzOiB7XHJcblx0XHRtZXNzYWdlTGFiZWw6IGNjLkxhYmVsLFxyXG5cdFx0bWFuaWZlc3RVcmw6IHtcclxuXHRcdFx0ZGVmYXVsdDogbnVsbCxcclxuXHRcdFx0dHlwZTogY2MuQXNzZXQsXHJcblx0XHR9LFxyXG5cdFx0cmV0cnlCdXR0b25Ob2RlOiAgIGNjLk5vZGUsXHJcblx0XHR1cGRhdGVQcm9ncmVzc0JhcjogY2MuTm9kZSxcclxuXHRcdHN0YXI6ICAgICAgICAgICAgICBjYy5Ob2RlLFxyXG5cdFx0X2FtOiBudWxsLFxyXG5cdFx0X3VwZGF0aW5nOiAhMSxcclxuXHRcdF9jYW5SZXRyeTogITEsXHJcblx0XHRfc3RvcmFnZVBhdGg6IFwiXCJcclxuXHR9LFxyXG5cdG9uTG9hZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmlzTG9hZFNjZW5lICA9ICExO1xyXG5cdFx0dGhpcy5pc0xvYWRDb25maWcgPSAhMTtcclxuXHRcdHRoaXMuaW5pdE9uZVNpZ24oKTtcclxuXHRcdGNjLnN5cy5pc0Jyb3dzZXIgPyB0aGlzLmxvYWRBc3NldHMoKSA6ICh0aGlzLmluaXRIb3RVcGRhdGUoKSwgdGhpcy5jaGVja1VwZGF0ZSgpKTtcclxuXHR9LFxyXG5cdGluaXRPbmVTaWduOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuY2hlY2tQbHVnaW4oKSAmJiAoc2RrYm94LlBsdWdpbk9uZVNpZ25hbC5pbml0KCksXHJcblx0XHRzZGtib3guUGx1Z2luT25lU2lnbmFsLnNldExpc3RlbmVyKHtcclxuXHRcdFx0b25TZW5kVGFnOiBmdW5jdGlvbih0LCBlLCBpKSB7fSxcclxuXHRcdFx0b25HZXRUYWdzOiBmdW5jdGlvbih0KSB7fSxcclxuXHRcdFx0b25JZHNBdmFpbGFibGU6IGZ1bmN0aW9uKHQsIGUpIHt9LFxyXG5cdFx0XHRvblBvc3ROb3RpZmljYXRpb246IGZ1bmN0aW9uKHQsIGUpIHt9LFxyXG5cdFx0XHRvbk5vdGlmaWNhdGlvbjogZnVuY3Rpb24odCwgZSwgaSkge31cclxuXHRcdH0pKVxyXG5cdH0sXHJcblx0Y2hlY2tQbHVnaW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIHNka2JveCA/IChjb25zb2xlLmxvZyhcInNka2JveCBpcyB1bmRlZmluZWRcIiksXHJcblx0XHQhMSkgOiB2b2lkIDAgIT09IHNka2JveC5QbHVnaW5PbmVTaWduYWwgfHwgKGNvbnNvbGUubG9nKFwic2RrYm94LlBsdWdpbkZhY2Vib29rIGlzIHVuZGVmaW5lZFwiKSxcclxuXHRcdCExKVxyXG5cdH0sXHJcblx0bG9hZEFzc2V0czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnVwZGF0ZVByb2dyZXNzKDApO1xyXG5cdFx0dGhpcy5tZXNzYWdlTGFiZWwuc3RyaW5nID0gXCLEkGFuZyBs4bqleSBk4buvIGxp4buHdSBnYW1lIC4uLlwiO1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHR0aGlzLmxvYWRTY2VuZSgpO1xyXG5cdFx0fS5iaW5kKHRoaXMpLCAxMDApO1xyXG5cdH0sXHJcblx0bG9hZFNjZW5lOiBmdW5jdGlvbigpIHtcclxuXHRcdGNjLmRpcmVjdG9yLnByZWxvYWRTY2VuZShcIk1haW5HYW1lXCIsIHRoaXMub25Qcm9ncmVzcy5iaW5kKHRoaXMpLCB0aGlzLm9uTG9hZGVkLmJpbmQodGhpcykpO1xyXG5cdH0sXHJcblx0b25Qcm9ncmVzczogZnVuY3Rpb24oY29tcGxldGVkQ291bnQsIHRvdGFsQ291bnQpe1xyXG5cdFx0Ly8gxJFhbmcgdOG6o2kgY+G6o25oXHJcblx0XHR2YXIgUmVkVCA9ICgoY29tcGxldGVkQ291bnQvdG90YWxDb3VudCkqODM4KT4+MDtcclxuXHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3MoUmVkVCk7XHJcblx0fSxcclxuXHRvbkxvYWRlZDogZnVuY3Rpb24oZXJyLCBhc3NldCl7XHJcblx0XHQvLyBU4bqjaSBj4bqjbmggdGjDoG5oIGPDtG5nXHJcblx0XHRjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJNYWluR2FtZVwiKTtcclxuXHR9LFxyXG5cdG9uRGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAodGhpcy5fdXBkYXRlTGlzdGVuZXIpIHtcclxuXHRcdFx0dGhpcy5fYW0uc2V0RXZlbnRDYWxsYmFjayhudWxsKTtcclxuXHRcdFx0dGhpcy5fdXBkYXRlTGlzdGVuZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0aW5pdEhvdFVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnVwZGF0ZVByb2dyZXNzKDApO1xyXG5cdFx0dGhpcy5fc3RvcmFnZVBhdGggPSAoanNiLmZpbGVVdGlscyA/IGpzYi5maWxlVXRpbHMuZ2V0V3JpdGFibGVQYXRoKCkgOiBcIi9cIikgKyBcImdvODgtcmVtb3RlLWFzc2V0XCI7XHJcblx0XHR0aGlzLl9hbSA9IG5ldyBqc2IuQXNzZXRzTWFuYWdlcihcIlwiLCB0aGlzLl9zdG9yYWdlUGF0aCwgdGhpcy52ZXJzaW9uQ29tcGFyZUhhbmRsZSk7XHJcblx0XHR0aGlzLl9hbS5zZXRWZXJpZnlDYWxsYmFjayhmdW5jdGlvbih0LCBlKSB7XHJcblx0XHRcdGUuY29tcHJlc3NlZDtcclxuXHRcdFx0cmV0dXJuICEwXHJcblx0XHR9XHJcblx0XHQuYmluZCh0aGlzKSk7XHJcblx0XHRjYy5zeXMub3MgPT09IGNjLnN5cy5PU19BTkRST0lEICYmIHRoaXMuX2FtLnNldE1heENvbmN1cnJlbnRUYXNrKDIpO1xyXG5cdH0sXHJcblx0Y2hlY2tVcGRhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKHRoaXMuX3VwZGF0aW5nKSB7XHJcblx0XHRcdHRoaXMubWVzc2FnZUxhYmVsLnN0cmluZyA9IFwixJBhbmcga2nhu4NtIHRyYSBwaGnDqm4gYuG6o24gLi4uXCI7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fYW0uZ2V0U3RhdGUoKSA9PT0ganNiLkFzc2V0c01hbmFnZXIuU3RhdGUuVU5JTklURUQpIHtcclxuXHRcdFx0dGhpcy5fYW0ubG9hZExvY2FsTWFuaWZlc3QodGhpcy5tYW5pZmVzdFVybC5uYXRpdmVVcmwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2FtLnNldEV2ZW50Q2FsbGJhY2sodGhpcy5jaGVja0NiLmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy5fYW0uY2hlY2tVcGRhdGUoKTtcclxuXHRcdHRoaXMuX3VwZGF0aW5nID0gdHJ1ZTtcclxuXHR9LFxyXG5cdGhvdFVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAodGhpcy5fYW0gJiYgIXRoaXMuX3VwZGF0aW5nKSB7XHJcblx0XHRcdHRoaXMuX2FtLnNldEV2ZW50Q2FsbGJhY2sodGhpcy51cGRhdGVDYi5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLl9hbS5nZXRTdGF0ZSgpID09PSBqc2IuQXNzZXRzTWFuYWdlci5TdGF0ZS5VTklOSVRFRCkge1xyXG5cdFx0XHRcdHRoaXMuX2FtLmxvYWRMb2NhbE1hbmlmZXN0KHRoaXMubWFuaWZlc3RVcmwubmF0aXZlVXJsKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9mYWlsQ291bnQgPSAwO1xyXG5cdFx0XHR0aGlzLl9hbS51cGRhdGUoKTtcclxuXHRcdFx0dGhpcy5fdXBkYXRpbmcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0cmV0cnk6IGZ1bmN0aW9uKCkge1xyXG5cdFx0IXRoaXMuX3VwZGF0aW5nICYmIHRoaXMuX2NhblJldHJ5ICYmICh0aGlzLnJldHJ5QnV0dG9uTm9kZS5hY3RpdmUgPSAhMSxcclxuXHRcdHRoaXMuX2NhblJldHJ5ID0gITEsXHJcblx0XHR0aGlzLm1lc3NhZ2VMYWJlbC5zdHJpbmcgPSBcIlRo4butIGzhuqFpIC4uLlwiLFxyXG5cdFx0dGhpcy5fYW0uZG93bmxvYWRGYWlsZWRBc3NldHMoKSlcclxuXHR9LFxyXG5cdGNoZWNrQ2I6IGZ1bmN0aW9uKHQpIHtcclxuXHRcdHZhciBlID0gITFcclxuXHRcdCAgLCBpID0gITE7XHJcblx0XHRzd2l0Y2ggKHQuZ2V0RXZlbnRDb2RlKCkpIHtcclxuXHRcdGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5FUlJPUl9OT19MT0NBTF9NQU5JRkVTVDpcclxuXHRcdFx0dGhpcy5tZXNzYWdlTGFiZWwuc3RyaW5nID0gXCJLaMO0bmcgdMOsbSB0aOG6pXkgSG90IFVwZGF0ZSAuLi5cIjtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfRE9XTkxPQURfTUFOSUZFU1Q6XHJcblx0XHRjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfUEFSU0VfTUFOSUZFU1Q6XHJcblx0XHRcdHRoaXMubWVzc2FnZUxhYmVsLnN0cmluZyA9IFwiVOG6o2kgbWFuaWZlc3QgdGjhuqV0IGLhuqFpIC4uLlwiO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5BTFJFQURZX1VQX1RPX0RBVEU6XHJcblx0XHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3MoODM4KTtcclxuXHRcdFx0dGhpcy5tZXNzYWdlTGFiZWwuc3RyaW5nID0gXCJQaGnDqm4gYuG6o24gbeG7m2kgbmjhuqV0IC4uLlwiO1xyXG5cdFx0XHRlID0gITA7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBqc2IuRXZlbnRBc3NldHNNYW5hZ2VyLk5FV19WRVJTSU9OX0ZPVU5EOlxyXG5cdFx0XHR0aGlzLm1lc3NhZ2VMYWJlbC5zdHJpbmcgPSBcIlTDrG0gdGjhuqV5IHBoacOqbiBi4bqjbiBj4bqtcCBuaOG6rXQgLi4uXCI7XHJcblx0XHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3MoMCk7XHJcblx0XHRcdGkgPSB0cnVlO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGRlZmF1bHQ6XHJcblx0XHRcdHJldHVyblxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYW0uc2V0RXZlbnRDYWxsYmFjayhudWxsKTtcclxuXHRcdHRoaXMuX2NoZWNrTGlzdGVuZXIgPSBudWxsO1xyXG5cdFx0dGhpcy5fdXBkYXRpbmcgPSAhMTtcclxuXHRcdGUgJiYgdGhpcy5sb2FkQXNzZXRzKCk7XHJcblx0XHRpICYmICh0aGlzLmhvdFVwZGF0ZSgpKTtcclxuXHR9LFxyXG5cdHVwZGF0ZUNiOiBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIG5lZWRSZXN0YXJ0ID0gZmFsc2U7XHJcblx0XHR2YXIgZmFpbGVkICAgICAgPSBmYWxzZTtcclxuXHRcdHN3aXRjaCAoZXZlbnQuZ2V0RXZlbnRDb2RlKCkpIHtcclxuXHRcdGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5FUlJPUl9OT19MT0NBTF9NQU5JRkVTVDpcclxuXHRcdFx0dGhpcy5tZXNzYWdlTGFiZWwuc3RyaW5nID0gXCJLaMO0bmcgdMOsbSB0aOG6pXkgSG90IFVwZGF0ZSAuLi5cIjtcclxuXHRcdFx0ZmFpbGVkID0gdHJ1ZTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuVVBEQVRFX1BST0dSRVNTSU9OOlxyXG5cdFx0XHR2YXIgUmVkVCA9IGV2ZW50LmdldFBlcmNlbnQoKSo4Mzg7XHJcblx0XHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3MoUmVkVCk7XHJcblx0XHRcdC8vZXZlbnQuZ2V0TWVzc2FnZSgpO1xyXG5cdFx0XHR0aGlzLm1lc3NhZ2VMYWJlbC5zdHJpbmcgPSBcIsSQYW5nIGPhuq1wIG5o4bqtdCAuLi5cIjtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfRE9XTkxPQURfTUFOSUZFU1Q6XHJcblx0XHRjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfUEFSU0VfTUFOSUZFU1Q6XHJcblx0XHRcdHRoaXMubWVzc2FnZUxhYmVsLnN0cmluZyA9IFwiVOG6o2kgbWFuaWZlc3QgdGjhuqV0IGLhuqFpIC4uLlwiO1xyXG5cdFx0XHRmYWlsZWQgPSB0cnVlO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5BTFJFQURZX1VQX1RPX0RBVEU6XHJcblx0XHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3MoODM4KTtcclxuXHRcdFx0dGhpcy5tZXNzYWdlTGFiZWwuc3RyaW5nID0gXCJQaGnDqm4gYuG6o24gbeG7m2kgbmjhuqV0IC4uLlwiO1xyXG5cdFx0XHRmYWlsZWQgPSB0cnVlO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5VUERBVEVfRklOSVNIRUQ6XHJcblx0XHRcdHRoaXMubWVzc2FnZUxhYmVsLnN0cmluZyA9IFwiQ+G6rXAgbmjhuq10IHRow6BuaCBjw7RuZ1wiO1xyXG5cdFx0XHRuZWVkUmVzdGFydCA9IHRydWU7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBqc2IuRXZlbnRBc3NldHNNYW5hZ2VyLlVQREFURV9GQUlMRUQ6XHJcblx0XHRcdHRoaXMubWVzc2FnZUxhYmVsLnN0cmluZyA9IFwiQ+G6rXAgbmjhuq10IHRo4bqldCBi4bqhaVwiO1xyXG5cdFx0XHR0aGlzLnJldHJ5QnV0dG9uTm9kZS5hY3RpdmUgPSAhMDtcclxuXHRcdFx0dGhpcy5fdXBkYXRpbmcgPSAhMTtcclxuXHRcdFx0dGhpcy5fY2FuUmV0cnkgPSAhMDtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfVVBEQVRJTkc6XHJcblx0XHRcdHRoaXMubWVzc2FnZUxhYmVsLnN0cmluZyA9IFwiQ+G6rXAgbmjhuq10IHRo4bqldCBi4bqhaVwiO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5FUlJPUl9ERUNPTVBSRVNTOlxyXG5cdFx0XHR0aGlzLm1lc3NhZ2VMYWJlbC5zdHJpbmcgPSBldmVudC5nZXRNZXNzYWdlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGZhaWxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hbS5zZXRFdmVudENhbGxiYWNrKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmVlZFJlc3RhcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYW0uc2V0RXZlbnRDYWxsYmFjayhudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBQcmVwZW5kIHRoZSBtYW5pZmVzdCdzIHNlYXJjaCBwYXRoXHJcbiAgICAgICAgICAgIHZhciBzZWFyY2hQYXRocyA9IGpzYi5maWxlVXRpbHMuZ2V0U2VhcmNoUGF0aHMoKTtcclxuICAgICAgICAgICAgdmFyIG5ld1BhdGhzID0gdGhpcy5fYW0uZ2V0TG9jYWxNYW5pZmVzdCgpLmdldFNlYXJjaFBhdGhzKCk7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KHNlYXJjaFBhdGhzLCBuZXdQYXRocyk7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgdmFsdWUgd2lsbCBiZSByZXRyaWV2ZWQgYW5kIGFwcGVuZGVkIHRvIHRoZSBkZWZhdWx0IHNlYXJjaCBwYXRoIGR1cmluZyBnYW1lIHN0YXJ0dXAsXHJcbiAgICAgICAgICAgIC8vIHBsZWFzZSByZWZlciB0byBzYW1wbGVzL2pzLXRlc3RzL21haW4uanMgZm9yIGRldGFpbGVkIHVzYWdlLlxyXG4gICAgICAgICAgICAvLyAhISEgUmUtYWRkIHRoZSBzZWFyY2ggcGF0aHMgaW4gbWFpbi5qcyBpcyB2ZXJ5IGltcG9ydGFudCwgb3RoZXJ3aXNlLCBuZXcgc2NyaXB0cyB3b24ndCB0YWtlIGVmZmVjdC5cclxuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdIb3RVcGRhdGVTZWFyY2hQYXRocycsIEpTT04uc3RyaW5naWZ5KHNlYXJjaFBhdGhzKSk7XHJcbiAgICAgICAgICAgIGpzYi5maWxlVXRpbHMuc2V0U2VhcmNoUGF0aHMoc2VhcmNoUGF0aHMpO1xyXG5cclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcEFsbCgpO1xyXG4gICAgICAgICAgICBjYy5nYW1lLnJlc3RhcnQoKTtcclxuICAgICAgICB9XHJcblx0fSxcclxuXHRvblJldHJ5Q2xpY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZXRyeSgpXHJcblx0fSxcclxuXHR2ZXJzaW9uQ29tcGFyZUhhbmRsZTogZnVuY3Rpb24odCwgZSkge1xyXG5cdFx0Y29uc29sZS5sb2coXCJKUyBDdXN0b20gVmVyc2lvbiBDb21wYXJlOiB2ZXJzaW9uIEEgaXMgXCIgKyB0ICsgXCIsIHZlcnNpb24gQiBpcyBcIiArIGUpLFxyXG5cdFx0Y29uc29sZS5sb2coXCJKUyBDdXN0b20gVmVyc2lvbiBDb21wYXJlOiB2ZXJzaW9uIEEgaXMgXCIgKyB0ICsgXCIsIHZlcnNpb24gQiBpcyBcIiArIGUpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IHQuc3BsaXQoXCIuXCIpLCBvID0gZS5zcGxpdChcIi5cIiksIG4gPSAwOyBuIDwgaS5sZW5ndGg7ICsrbikge1xyXG5cdFx0XHR2YXIgcyA9IHBhcnNlSW50KGlbbl0pXHJcblx0XHRcdCAgLCBhID0gcGFyc2VJbnQob1tuXSB8fCAwKTtcclxuXHRcdFx0aWYgKHMgIT09IGEpXHJcblx0XHRcdFx0cmV0dXJuIHMgLSBhXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gby5sZW5ndGggPiBpLmxlbmd0aCA/IC0xIDogMFxyXG5cdH0sXHJcblx0dXBkYXRlUHJvZ3Jlc3M6IGZ1bmN0aW9uKHByb2dyZXNzKXtcclxuXHRcdHRoaXMudXBkYXRlUHJvZ3Jlc3NCYXIud2lkdGggPSBwcm9ncmVzcztcclxuXHRcdHRoaXMuc3Rhci5wb3NpdGlvbiAgICAgICAgICAgPSBjYy52Mihwcm9ncmVzcywgMCk7XHJcblx0fSxcclxufSk7XHJcbiJdfQ==