
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Model/Dialog/ForGotPass/ForGotPass.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '71d268vawpEd7jT7rX6zxb6', 'ForGotPass');
// Script/Model/Dialog/ForGotPass/ForGotPass.js

'use strict';

var BrowserUtil = require('BrowserUtil');

var helper = require('Helper');

cc.Class({
	extends: cc.Component,

	properties: {
		username: {
			default: null,
			type: cc.EditBox
		},
		newpass: {
			default: null,
			type: cc.EditBox
		},
		renewpass: {
			default: null,
			type: cc.EditBox
		},
		otp: {
			default: null,
			type: cc.EditBox
		},
		captcha: {
			default: null,
			type: cc.EditBox
		},
		capchaSprite: cc.Sprite
	},
	onLoad: function onLoad() {
		var self = this;
		this.editboxs = [this.username, this.newpass, this.renewpass, this.otp, this.captcha];
		this.keyHandle = function (t) {
			return t.keyCode === cc.macro.KEY.tab ? (self.changeNextFocusEditBox(), t.preventDefault && t.preventDefault(), !1) : t.keyCode === cc.macro.KEY.enter ? (BrowserUtil.focusGame(), self.onForGotClick(), t.preventDefault && t.preventDefault(), !1) : t.keyCode === cc.macro.KEY.escape ? (cc.RedT.inGame.dialog.onClickBack(), t.preventDefault && t.preventDefault(), !1) : void 0;
		};
	},

	onEnable: function onEnable() {
		cc.sys.isBrowser && this.addEvent();
		this.node.runAction(cc.RedT.inGame.dialog.actionShow);
		this.reCaptcha();
	},
	onDisable: function onDisable() {
		cc.sys.isBrowser && this.removeEvent();
		this.clean();
		cc.RedT.inGame.dialog.resetSizeDialog(this.node);
	},
	addEvent: function addEvent() {
		cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
		for (var t in this.editboxs) {
			BrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown", this.keyHandle, !1);
		}
	},
	removeEvent: function removeEvent() {
		for (var t in this.editboxs) {
			BrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown", this.keyHandle, !1);
		}
		cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
	},
	onKeyDown: function onKeyDown(event) {
		switch (event.keyCode) {
			case cc.macro.KEY.escape:
				this.isTop() && cc.RedT.inGame.dialog.onClickBack();
				break;
			case cc.macro.KEY.tab:
				this.isTop() && this.changeNextFocusEditBox();
				break;
			case cc.macro.KEY.enter:
				this.isTop() && this.onForGotClick();
		}
	},
	changeNextFocusEditBox: function changeNextFocusEditBox() {
		for (var t = !1, e = 0, i = this.editboxs.length; e < i; e++) {
			if (BrowserUtil.checkEditBoxFocus(this.editboxs[e])) {
				BrowserUtil.focusEditBox(this.editboxs[e]);
				t = !0;
				break;
			}
		}
		!t && 0 < this.editboxs.length && BrowserUtil.focusEditBox(this.editboxs[0]);
	},
	isTop: function isTop() {
		return !cc.RedT.inGame.notice.node.active && !cc.RedT.inGame.loading.active;
	},
	clean: function clean() {
		this.username.string = this.newpass.string = this.renewpass.string = this.otp.string = this.captcha.string = '';
	},
	onForGotClick: function onForGotClick() {
		if (this.username.string.length < 3 || this.username.string.length > 32) {
			cc.RedT.inGame.notice.show({ title: "LỖI", text: 'Vui lòng nhập chính xác tên tài khoản...' });
		} else if (this.username.string.match(new RegExp("^[a-zA-Z0-9]+$")) === null) {
			cc.RedT.inGame.notice.show({ title: "LỖI", text: 'Tên tài khoản chỉ gồm Chữ và Số!' });
		} else if (this.newpass.string.length < 6 || this.newpass.string.length > 32) {
			cc.RedT.inGame.notice.show({ title: "LỖI", text: 'Độ dài mật khẩu tối thiểu 6-32 kí tự...' });
		} else if (this.newpass.string.length != this.renewpass.string.length) {
			cc.RedT.inGame.notice.show({ title: "LỖI", text: 'Nhập lại mật khẩu không đúng...' });
		} else if (this.otp.string.length != 4) {
			cc.RedT.inGame.notice.show({ title: "LỖI", text: 'Mã OTP không hợp lệ...' });
		} else if (this.captcha.string.length != 4) {
			cc.RedT.inGame.notice.show({ title: "LỖI", text: 'Captcha không đúng.' });
		} else {
			cc.RedT.send({ forgotpass: { iforgot: { name: this.username.string, pass: this.newpass.string, otp: this.otp.string, captcha: this.captcha.string } } });
		}
	},
	initCaptcha: function initCaptcha(t) {
		var i = this,
		    o = new Image();
		o.src = t, o.width = 150, o.height = 50, setTimeout(function () {
			var t = new cc.Texture2D();
			t.initWithElement(o), t.handleLoadedTexture();
			var e = new cc.SpriteFrame(t);
			i.capchaSprite.spriteFrame = e;
		}, 10);
	},
	reCaptcha: function reCaptcha() {
		cc.RedT.send({ captcha: 'forgotpass' });
	},
	onClickOTP: function onClickOTP() {
		var username = this.username.string.trim();
		if (this.username.string.length < 3 || this.username.string.length > 32) {
			cc.RedT.inGame.notice.show({ title: "", text: 'Vui lòng nhập chính xác tên tài khoản...' });
		} else {
			cc.RedT.send({ forgotpass: { sendOTP: this.username.string } });
		}
	}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcTW9kZWxcXERpYWxvZ1xcRm9yR290UGFzcy8uLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcYXNzZXRzXFxTY3JpcHRcXE1vZGVsXFxEaWFsb2dcXEZvckdvdFBhc3MvYXNzZXRzXFxTY3JpcHRcXE1vZGVsXFxEaWFsb2dcXEZvckdvdFBhc3NcXEZvckdvdFBhc3MuanMiXSwibmFtZXMiOlsiQnJvd3NlclV0aWwiLCJyZXF1aXJlIiwiaGVscGVyIiwiY2MiLCJDbGFzcyIsImV4dGVuZHMiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidXNlcm5hbWUiLCJkZWZhdWx0IiwidHlwZSIsIkVkaXRCb3giLCJuZXdwYXNzIiwicmVuZXdwYXNzIiwib3RwIiwiY2FwdGNoYSIsImNhcGNoYVNwcml0ZSIsIlNwcml0ZSIsIm9uTG9hZCIsInNlbGYiLCJlZGl0Ym94cyIsImtleUhhbmRsZSIsInQiLCJrZXlDb2RlIiwibWFjcm8iLCJLRVkiLCJ0YWIiLCJjaGFuZ2VOZXh0Rm9jdXNFZGl0Qm94IiwicHJldmVudERlZmF1bHQiLCJlbnRlciIsImZvY3VzR2FtZSIsIm9uRm9yR290Q2xpY2siLCJlc2NhcGUiLCJSZWRUIiwiaW5HYW1lIiwiZGlhbG9nIiwib25DbGlja0JhY2siLCJvbkVuYWJsZSIsInN5cyIsImlzQnJvd3NlciIsImFkZEV2ZW50Iiwibm9kZSIsInJ1bkFjdGlvbiIsImFjdGlvblNob3ciLCJyZUNhcHRjaGEiLCJvbkRpc2FibGUiLCJyZW1vdmVFdmVudCIsImNsZWFuIiwicmVzZXRTaXplRGlhbG9nIiwic3lzdGVtRXZlbnQiLCJvbiIsIlN5c3RlbUV2ZW50IiwiRXZlbnRUeXBlIiwiS0VZX0RPV04iLCJvbktleURvd24iLCJnZXRIVE1MRWxlbWVudEJ5RWRpdEJveCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib2ZmIiwiZXZlbnQiLCJpc1RvcCIsImUiLCJpIiwibGVuZ3RoIiwiY2hlY2tFZGl0Qm94Rm9jdXMiLCJmb2N1c0VkaXRCb3giLCJub3RpY2UiLCJhY3RpdmUiLCJsb2FkaW5nIiwic3RyaW5nIiwic2hvdyIsInRpdGxlIiwidGV4dCIsIm1hdGNoIiwiUmVnRXhwIiwic2VuZCIsImZvcmdvdHBhc3MiLCJpZm9yZ290IiwibmFtZSIsInBhc3MiLCJpbml0Q2FwdGNoYSIsIm8iLCJJbWFnZSIsInNyYyIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0VGltZW91dCIsIlRleHR1cmUyRCIsImluaXRXaXRoRWxlbWVudCIsImhhbmRsZUxvYWRlZFRleHR1cmUiLCJTcHJpdGVGcmFtZSIsInNwcml0ZUZyYW1lIiwib25DbGlja09UUCIsInRyaW0iLCJzZW5kT1RQIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElBQUlBLGNBQWNDLFFBQVEsYUFBUixDQUFsQjs7QUFFQSxJQUFJQyxTQUFTRCxRQUFRLFFBQVIsQ0FBYjs7QUFFQUUsR0FBR0MsS0FBSCxDQUFTO0FBQ1JDLFVBQVNGLEdBQUdHLFNBREo7O0FBR1JDLGFBQVk7QUFDWEMsWUFBVTtBQUNUQyxZQUFTLElBREE7QUFFVEMsU0FBTVAsR0FBR1E7QUFGQSxHQURDO0FBS1hDLFdBQVM7QUFDUkgsWUFBUyxJQUREO0FBRVJDLFNBQU1QLEdBQUdRO0FBRkQsR0FMRTtBQVNYRSxhQUFXO0FBQ1ZKLFlBQVMsSUFEQztBQUVWQyxTQUFNUCxHQUFHUTtBQUZDLEdBVEE7QUFhWEcsT0FBSztBQUNKTCxZQUFTLElBREw7QUFFSkMsU0FBTVAsR0FBR1E7QUFGTCxHQWJNO0FBaUJYSSxXQUFTO0FBQ1JOLFlBQVMsSUFERDtBQUVSQyxTQUFNUCxHQUFHUTtBQUZELEdBakJFO0FBcUJYSyxnQkFBY2IsR0FBR2M7QUFyQk4sRUFISjtBQTBCUkMsT0ExQlEsb0JBMEJFO0FBQ1QsTUFBSUMsT0FBTyxJQUFYO0FBQ0EsT0FBS0MsUUFBTCxHQUFnQixDQUFDLEtBQUtaLFFBQU4sRUFBZ0IsS0FB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QUYsQ0FBa0JQLENBQWxCLEdBQ0EzRCxFQUFFbUUsbUJBQUYsRUFEQTtBQUVBLE9BQUk1QixJQUFJLElBQUkxRCxHQUFHdUYsV0FBUCxDQUFtQnBFLENBQW5CLENBQVI7QUFDQXdDLEtBQUU5QyxZQUFGLENBQWUyRSxXQUFmLEdBQTZCOUIsQ0FBN0I7QUFDQSxHQU5ELEVBTUcsRUFOSCxDQUhBO0FBVUEsRUF2SE87QUF3SFJqQixZQUFXLHFCQUFVO0FBQ3BCekMsS0FBRzhCLElBQUgsQ0FBUTBDLElBQVIsQ0FBYSxFQUFDNUQsU0FBUyxZQUFWLEVBQWI7QUFDQSxFQTFITztBQTJIUjZFLGFBQVksc0JBQVU7QUFDckIsTUFBSXBGLFdBQVcsS0FBS0EsUUFBTCxDQUFjNkQsTUFBZCxDQUFxQndCLElBQXJCLEVBQWY7QUFDQSxNQUFJLEtBQUtyRixRQUFMLENBQWM2RCxNQUFkLENBQXFCTixNQUFyQixHQUE4QixDQUE5QixJQUFtQyxLQUFLdkQsUUFBTCxDQUFjNkQsTUFBZCxDQUFxQk4sTUFBckIsR0FBOEIsRUFBckUsRUFBeUU7QUFDeEU1RCxNQUFHOEIsSUFBSCxDQUFRQyxNQUFSLENBQWVnQyxNQUFmLENBQXNCSSxJQUF0QixDQUEyQixFQUFDQyxPQUFNLEVBQVAsRUFBV0MsTUFBSywwQ0FBaEIsRUFBM0I7QUFDQSxHQUZELE1BRUs7QUFDSnJFLE1BQUc4QixJQUFILENBQVEwQyxJQUFSLENBQWEsRUFBQ0MsWUFBVyxFQUFDa0IsU0FBUyxLQUFLdEYsUUFBTCxDQUFjNkQsTUFBeEIsRUFBWixFQUFiO0FBQ0E7QUFDRDtBQWxJTyxDQUFUIiwiZmlsZSI6IkZvckdvdFBhc3MuanMiLCJzb3VyY2VSb290IjoiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXGFzc2V0c1xcU2NyaXB0XFxNb2RlbFxcRGlhbG9nXFxGb3JHb3RQYXNzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBCcm93c2VyVXRpbCA9IHJlcXVpcmUoJ0Jyb3dzZXJVdGlsJyk7XHJcblxyXG52YXIgaGVscGVyID0gcmVxdWlyZSgnSGVscGVyJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcblx0ZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuXHRwcm9wZXJ0aWVzOiB7XHJcblx0XHR1c2VybmFtZToge1xyXG5cdFx0XHRkZWZhdWx0OiBudWxsLFxyXG5cdFx0XHR0eXBlOiBjYy5FZGl0Qm94LFxyXG5cdFx0fSxcclxuXHRcdG5ld3Bhc3M6IHtcclxuXHRcdFx0ZGVmYXVsdDogbnVsbCxcclxuXHRcdFx0dHlwZTogY2MuRWRpdEJveCxcclxuXHRcdH0sXHJcblx0XHRyZW5ld3Bhc3M6IHtcclxuXHRcdFx0ZGVmYXVsdDogbnVsbCxcclxuXHRcdFx0dHlwZTogY2MuRWRpdEJveCxcclxuXHRcdH0sXHJcblx0XHRvdHA6IHtcclxuXHRcdFx0ZGVmYXVsdDogbnVsbCxcclxuXHRcdFx0dHlwZTogY2MuRWRpdEJveCxcclxuXHRcdH0sXHJcblx0XHRjYXB0Y2hhOiB7XHJcblx0XHRcdGRlZmF1bHQ6IG51bGwsXHJcblx0XHRcdHR5cGU6IGNjLkVkaXRCb3gsXHJcblx0XHR9LFxyXG5cdFx0Y2FwY2hhU3ByaXRlOiBjYy5TcHJpdGUsXHJcblx0fSxcclxuXHRvbkxvYWQgKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0dGhpcy5lZGl0Ym94cyA9IFt0aGlzLnVzZXJuYW1lLCB0aGlzLm5ld3Bhc3MsIHRoaXMucmVuZXdwYXNzLCB0aGlzLm90cCwgdGhpcy5jYXB0Y2hhXTtcclxuXHRcdHRoaXMua2V5SGFuZGxlID0gZnVuY3Rpb24odCkge1xyXG5cdFx0XHRyZXR1cm4gdC5rZXlDb2RlID09PSBjYy5tYWNyby5LRVkudGFiID8gKHNlbGYuY2hhbmdlTmV4dEZvY3VzRWRpdEJveCgpLFxyXG5cdFx0XHRcdHQucHJldmVudERlZmF1bHQgJiYgdC5wcmV2ZW50RGVmYXVsdCgpLFxyXG5cdFx0XHRcdCExKSA6IHQua2V5Q29kZSA9PT0gY2MubWFjcm8uS0VZLmVudGVyID8gKEJyb3dzZXJVdGlsLmZvY3VzR2FtZSgpLCBzZWxmLm9uRm9yR290Q2xpY2soKSxcclxuXHRcdFx0XHR0LnByZXZlbnREZWZhdWx0ICYmIHQucHJldmVudERlZmF1bHQoKSxcclxuXHRcdFx0XHQhMSkgOiB0LmtleUNvZGUgPT09IGNjLm1hY3JvLktFWS5lc2NhcGUgPyAoY2MuUmVkVC5pbkdhbWUuZGlhbG9nLm9uQ2xpY2tCYWNrKCksXHJcblx0XHRcdFx0dC5wcmV2ZW50RGVmYXVsdCAmJiB0LnByZXZlbnREZWZhdWx0KCksXHJcblx0XHRcdFx0ITEpIDogdm9pZCAwXHJcblx0XHR9XHJcblx0fSxcclxuXHRvbkVuYWJsZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0Y2Muc3lzLmlzQnJvd3NlciAmJiB0aGlzLmFkZEV2ZW50KCk7XHJcblx0XHR0aGlzLm5vZGUucnVuQWN0aW9uKGNjLlJlZFQuaW5HYW1lLmRpYWxvZy5hY3Rpb25TaG93KTtcclxuXHRcdHRoaXMucmVDYXB0Y2hhKCk7XHJcblx0fSxcclxuXHRvbkRpc2FibGU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdGNjLnN5cy5pc0Jyb3dzZXIgJiYgdGhpcy5yZW1vdmVFdmVudCgpO1xyXG5cdFx0dGhpcy5jbGVhbigpO1xyXG5cdFx0Y2MuUmVkVC5pbkdhbWUuZGlhbG9nLnJlc2V0U2l6ZURpYWxvZyh0aGlzLm5vZGUpO1xyXG5cdH0sXHJcblx0YWRkRXZlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Y2Muc3lzdGVtRXZlbnQub24oY2MuU3lzdGVtRXZlbnQuRXZlbnRUeXBlLktFWV9ET1dOLCB0aGlzLm9uS2V5RG93biwgdGhpcyk7XHJcblx0XHRmb3IgKHZhciB0IGluIHRoaXMuZWRpdGJveHMpIHtcclxuXHRcdFx0QnJvd3NlclV0aWwuZ2V0SFRNTEVsZW1lbnRCeUVkaXRCb3godGhpcy5lZGl0Ym94c1t0XSkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5rZXlIYW5kbGUsICExKVxyXG5cdFx0fVxyXG5cdH0sXHJcblx0cmVtb3ZlRXZlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Zm9yICh2YXIgdCBpbiB0aGlzLmVkaXRib3hzKSB7XHJcblx0XHRcdEJyb3dzZXJVdGlsLmdldEhUTUxFbGVtZW50QnlFZGl0Qm94KHRoaXMuZWRpdGJveHNbdF0pLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5SGFuZGxlLCAhMSlcclxuXHRcdH1cclxuXHRcdGNjLnN5c3RlbUV2ZW50Lm9mZihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIHRoaXMub25LZXlEb3duLCB0aGlzKTtcclxuXHR9LFxyXG5cdG9uS2V5RG93bjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xyXG5cdFx0XHRjYXNlIGNjLm1hY3JvLktFWS5lc2NhcGU6XHJcblx0XHRcdFx0dGhpcy5pc1RvcCgpICYmIGNjLlJlZFQuaW5HYW1lLmRpYWxvZy5vbkNsaWNrQmFjaygpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIGNjLm1hY3JvLktFWS50YWI6XHJcblx0XHRcdFx0dGhpcy5pc1RvcCgpICYmIHRoaXMuY2hhbmdlTmV4dEZvY3VzRWRpdEJveCgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIGNjLm1hY3JvLktFWS5lbnRlcjpcclxuXHRcdFx0XHR0aGlzLmlzVG9wKCkgJiYgdGhpcy5vbkZvckdvdENsaWNrKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRjaGFuZ2VOZXh0Rm9jdXNFZGl0Qm94OiBmdW5jdGlvbigpIHtcclxuXHRcdGZvciAodmFyIHQgPSAhMSwgZSA9IDAsIGkgPSB0aGlzLmVkaXRib3hzLmxlbmd0aDsgZSA8IGk7IGUrKyl7XHJcbiAgICAgICAgICAgIGlmIChCcm93c2VyVXRpbC5jaGVja0VkaXRCb3hGb2N1cyh0aGlzLmVkaXRib3hzW2VdKSkge1xyXG4gICAgICAgICAgICAgICAgQnJvd3NlclV0aWwuZm9jdXNFZGl0Qm94KHRoaXMuZWRpdGJveHNbZV0pO1xyXG4gICAgICAgICAgICAgICAgdCA9ICEwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAhdCAmJiAwIDwgdGhpcy5lZGl0Ym94cy5sZW5ndGggJiYgQnJvd3NlclV0aWwuZm9jdXNFZGl0Qm94KHRoaXMuZWRpdGJveHNbMF0pO1xyXG5cdH0sXHJcblx0aXNUb3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICFjYy5SZWRULmluR2FtZS5ub3RpY2Uubm9kZS5hY3RpdmUgJiYgIWNjLlJlZFQuaW5HYW1lLmxvYWRpbmcuYWN0aXZlO1xyXG5cdH0sXHJcblx0Y2xlYW46IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLnVzZXJuYW1lLnN0cmluZyA9IHRoaXMubmV3cGFzcy5zdHJpbmcgPSB0aGlzLnJlbmV3cGFzcy5zdHJpbmcgPSB0aGlzLm90cC5zdHJpbmcgPSB0aGlzLmNhcHRjaGEuc3RyaW5nID0gJyc7XHJcblx0fSxcclxuXHRvbkZvckdvdENsaWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICh0aGlzLnVzZXJuYW1lLnN0cmluZy5sZW5ndGggPCAzIHx8IHRoaXMudXNlcm5hbWUuc3RyaW5nLmxlbmd0aCA+IDMyKSB7XHJcblx0XHRcdGNjLlJlZFQuaW5HYW1lLm5vdGljZS5zaG93KHt0aXRsZTpcIkzhu5ZJXCIsIHRleHQ6J1Z1aSBsw7JuZyBuaOG6rXAgY2jDrW5oIHjDoWMgdMOqbiB0w6BpIGtob+G6o24uLi4nfSk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMudXNlcm5hbWUuc3RyaW5nLm1hdGNoKG5ldyBSZWdFeHAoXCJeW2EtekEtWjAtOV0rJFwiKSkgPT09IG51bGwpe1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJM4buWSVwiLCB0ZXh0OidUw6puIHTDoGkga2hv4bqjbiBjaOG7iSBn4buTbSBDaOG7ryB2w6AgU+G7kSEnfSk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMubmV3cGFzcy5zdHJpbmcubGVuZ3RoIDwgNiB8fCB0aGlzLm5ld3Bhc3Muc3RyaW5nLmxlbmd0aCA+IDMyKSB7XHJcblx0XHRcdGNjLlJlZFQuaW5HYW1lLm5vdGljZS5zaG93KHt0aXRsZTpcIkzhu5ZJXCIsIHRleHQ6J8SQ4buZIGTDoGkgbeG6rXQga2jhuql1IHThu5FpIHRoaeG7g3UgNi0zMiBrw60gdOG7sS4uLid9KTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5uZXdwYXNzLnN0cmluZy5sZW5ndGggIT0gdGhpcy5yZW5ld3Bhc3Muc3RyaW5nLmxlbmd0aCkge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJM4buWSVwiLCB0ZXh0OidOaOG6rXAgbOG6oWkgbeG6rXQga2jhuql1IGtow7RuZyDEkcO6bmcuLi4nfSk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMub3RwLnN0cmluZy5sZW5ndGggIT0gNCl7XHJcblx0XHRcdGNjLlJlZFQuaW5HYW1lLm5vdGljZS5zaG93KHt0aXRsZTpcIkzhu5ZJXCIsIHRleHQ6J03DoyBPVFAga2jDtG5nIGjhu6NwIGzhu4cuLi4nfSk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY2FwdGNoYS5zdHJpbmcubGVuZ3RoICE9IDQpe1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJM4buWSVwiLCB0ZXh0OidDYXB0Y2hhIGtow7RuZyDEkcO6bmcuJ30pO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGNjLlJlZFQuc2VuZCh7Zm9yZ290cGFzczp7aWZvcmdvdDoge25hbWU6IHRoaXMudXNlcm5hbWUuc3RyaW5nLCBwYXNzOiB0aGlzLm5ld3Bhc3Muc3RyaW5nLCBvdHA6IHRoaXMub3RwLnN0cmluZywgY2FwdGNoYTogdGhpcy5jYXB0Y2hhLnN0cmluZ319fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRpbml0Q2FwdGNoYTogZnVuY3Rpb24odCkge1xyXG5cdFx0dmFyIGkgPSB0aGlzXHJcblx0XHQgICwgbyA9IG5ldyBJbWFnZTtcclxuXHRcdG8uc3JjID0gdCxcclxuXHRcdG8ud2lkdGggPSAxNTAsXHJcblx0XHRvLmhlaWdodCA9IDUwLFxyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHQgPSBuZXcgY2MuVGV4dHVyZTJEO1xyXG5cdFx0XHR0LmluaXRXaXRoRWxlbWVudChvKSxcclxuXHRcdFx0dC5oYW5kbGVMb2FkZWRUZXh0dXJlKCk7XHJcblx0XHRcdHZhciBlID0gbmV3IGNjLlNwcml0ZUZyYW1lKHQpO1xyXG5cdFx0XHRpLmNhcGNoYVNwcml0ZS5zcHJpdGVGcmFtZSA9IGVcclxuXHRcdH0sIDEwKVxyXG5cdH0sXHJcblx0cmVDYXB0Y2hhOiBmdW5jdGlvbigpe1xyXG5cdFx0Y2MuUmVkVC5zZW5kKHtjYXB0Y2hhOiAnZm9yZ290cGFzcyd9KTtcclxuXHR9LFxyXG5cdG9uQ2xpY2tPVFA6IGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgdXNlcm5hbWUgPSB0aGlzLnVzZXJuYW1lLnN0cmluZy50cmltKCk7XHJcblx0XHRpZiAodGhpcy51c2VybmFtZS5zdHJpbmcubGVuZ3RoIDwgMyB8fCB0aGlzLnVzZXJuYW1lLnN0cmluZy5sZW5ndGggPiAzMikge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJcIiwgdGV4dDonVnVpIGzDsm5nIG5o4bqtcCBjaMOtbmggeMOhYyB0w6puIHTDoGkga2hv4bqjbi4uLid9KTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRjYy5SZWRULnNlbmQoe2ZvcmdvdHBhc3M6e3NlbmRPVFA6IHRoaXMudXNlcm5hbWUuc3RyaW5nfX0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcbn0pO1xyXG4iXX0=