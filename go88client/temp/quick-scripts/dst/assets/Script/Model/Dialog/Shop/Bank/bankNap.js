
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Model/Dialog/Shop/Bank/bankNap.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '72fdbys1l5HW7J4wCB8Lxax', 'bankNap');
// Script/Model/Dialog/Shop/Bank/bankNap.js

'use strict';

var BrowserUtil = require('BrowserUtil');
var helper = require('Helper');

cc.Class({
	extends: cc.Component,

	properties: {
		labelBank: cc.Label,
		labelNumber: cc.Label,
		labelName: cc.Label,
		labelBranch: cc.Label,

		labelNickname: cc.Label,

		moreBank: cc.Node,
		scrollviewBank: {
			default: null,
			type: cc.ScrollView
		},
		prefab: cc.Prefab,
		isLoad: false,

		moreHinhThuc: cc.Node,
		bodyNap: cc.Node,
		labelHinhthuc: cc.Label,
		inputTien: cc.EditBox,
		inputName: cc.EditBox,
		inputKhop: cc.EditBox,
		inputSTK: cc.EditBox,
		inputNameGo: cc.EditBox,
		hinhThuc: ''
	},
	onLoad: function onLoad() {
		if (!this.isLoad) {
			cc.RedT.send({ shop: { bank: { list: true } } });
		}
		var self = this;
		this.editboxs = [this.inputTien, this.inputName];
		this.keyHandle = function (t) {
			return t.keyCode === cc.macro.KEY.tab ? (self.isTop() && self.changeNextFocusEditBox(), t.preventDefault && t.preventDefault(), !1) : t.keyCode === cc.macro.KEY.enter ? (BrowserUtil.focusGame(), self.onNapClick(), t.preventDefault && t.preventDefault(), !1) : void 0;
		};
	},

	onEnable: function onEnable() {
		this.labelNickname.string = cc.RedT.user.name;
		cc.sys.isBrowser && this.addEvent();
	},
	onDisable: function onDisable() {
		this.moreBank.active = this.moreHinhThuc.active = false;
		cc.sys.isBrowser && this.removeEvent();
		this.clean();
	},
	addEvent: function addEvent() {
		cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
		for (var t in this.editboxs) {
			BrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown", this.keyHandle, !1);
		}
	},
	removeEvent: function removeEvent() {
		for (var t in this.editboxs) {
			BrowserUtil.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown", this.keyHandle, !1);
		}
		cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
	},
	onKeyDown: function onKeyDown(event) {
		switch (event.keyCode) {
			case cc.macro.KEY.tab:
				this.isTop() && this.changeNextFocusEditBox();
				break;
			case cc.macro.KEY.enter:
				this.isTop() && this.onNapClick();
		}
	},
	changeNextFocusEditBox: function changeNextFocusEditBox() {
		for (var t = !1, e = 0, i = this.editboxs.length; e < i; e++) {
			if (BrowserUtil.checkEditBoxFocus(this.editboxs[e])) {
				BrowserUtil.focusEditBox(this.editboxs[e]);
				t = !0;
				break;
			}
		}
		!t && 0 < this.editboxs.length && BrowserUtil.focusEditBox(this.editboxs[0]);
	},
	isTop: function isTop() {
		return !cc.RedT.inGame.notice.node.active && !cc.RedT.inGame.loading.active;
	},
	clean: function clean() {
		this.inputTien.string = this.inputName.string = this.inputSTK.string = this.inputKhop.string = this.inputNameGo.string = '';
	},
	toggleMoreBank: function toggleMoreBank() {
		this.moreBank.active = !this.moreBank.active;
	},
	toggleHinhThuc: function toggleHinhThuc() {
		this.moreHinhThuc.active = !this.moreHinhThuc.active;
	},
	onData: function onData(data) {
		this.isLoad = true;
		if (data.length > 0) {
			this['i_arg'] = data.map(function (obj, index) {
				var item = cc.instantiate(this.prefab);
				var componentLeft = item.getComponent('NapRed_itemOne');
				componentLeft.init(this, 'i_arg', 'labelBank', 'toggleMoreBank');
				componentLeft.text.string = obj.bank;
				this.scrollviewBank.content.addChild(item);
				componentLeft.data = obj;
				return componentLeft;
			}.bind(this));
		}
	},
	backT: function backT(data) {
		this.labelNumber.string = data.number;
		this.labelName.string = data.name;
		this.labelBranch.string = data.branch;
	},
	hinhThucSelect: function hinhThucSelect(event, select) {
		this.hinhThuc = select;
		event.target.parent.children.forEach(function (obj) {
			if (obj.name === select) {
				obj.children[0].active = true;
				this.labelHinhthuc.string = obj.children[1].getComponent(cc.Label).string;
			} else {
				obj.children[0].active = false;
			}
			this.moreHinhThuc.active = false;
		}.bind(this));

		switch (select) {
			case '1':
				this.bodyNap.children[0].active = true;
				this.bodyNap.children[1].active = false;
				this.bodyNap.children[2].active = false;
				break;
			case '2':
				this.bodyNap.children[0].active = false;
				this.bodyNap.children[1].active = true;
				this.bodyNap.children[2].active = false;
				break;
			case '3':
				this.bodyNap.children[0].active = false;
				this.bodyNap.children[1].active = false;
				this.bodyNap.children[2].active = true;
				break;
		}
	},
	onChangerRed: function onChangerRed() {
		var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

		value = helper.numberWithCommas(helper.getOnlyNumberInString(value));
		this.inputTien.string = value == 0 ? "" : value;
	},
	onClickNap: function onClickNap() {
		if (!this.labelNumber.string.length) {
			cc.RedT.inGame.notice.show({ title: "", text: "Vui lòng chọn ngân hàng muốn nạp." });
		} else if (this.hinhThuc === '1' && this.inputKhop.string.length < 6) {
			cc.RedT.inGame.notice.show({ title: "", text: "Nhập mã giao dịch ngân hàng..." });
		} else if (this.hinhThuc === '2' && this.inputSTK.string.length < 6) {
			cc.RedT.inGame.notice.show({ title: "", text: "Vui lòng nhập chính xác số tài khoản của bạn." });
		} else if (this.hinhThuc === '3' && this.inputNameGo.string.length < 6) {
			cc.RedT.inGame.notice.show({ title: "", text: "Vui lòng nhập Họ Tên người đi chuyển tiền." });
		} else if (helper.getOnlyNumberInString(this.inputTien.string) >> 0 < 200000) {
			cc.RedT.inGame.notice.show({ title: "", text: "Nạp tối thiểu 200.000, tối đa 1.000.000.000" });
		} else if (this.inputName.string.length < 6) {
			cc.RedT.inGame.notice.show({ title: "NẠP RED", text: "Vui lòng nhập chính xác Họ Tên người gửi" });
		} else {
			var data = {
				'hinhthuc': this.hinhThuc,
				'bank': this.labelNumber.string,
				'money': helper.getOnlyNumberInString(this.inputTien.string),
				'name': this.inputName.string
			};
			if (this.hinhThuc === '1') {
				data.khop = this.inputKhop.string;
			}
			if (this.hinhThuc === '2') {
				data.stk = this.inputSTK.string;
			}
			if (this.hinhThuc === '3') {
				data.namego = this.inputNameGo.string;
			}
			data = { 'shop': { 'bank': { 'nap': data } } };
			cc.RedT.send(data);
		}
	},
	onCopyNumber: function onCopyNumber() {
		cc.RedT.CopyToClipboard(this.labelNumber.string);
		cc.RedT.inGame.noticeCopy();
	},
	onCopyName: function onCopyName() {
		cc.RedT.CopyToClipboard(this.labelName.string);
		cc.RedT.inGame.noticeCopy();
	},
	onCopyBranch: function onCopyBranch() {
		cc.RedT.CopyToClipboard(this.labelBranch.string);
		cc.RedT.inGame.noticeCopy();
	},
	onCopyNoiDung: function onCopyNoiDung() {
		cc.RedT.CopyToClipboard(this.labelNickname.string);
		cc.RedT.inGame.noticeCopy();
	}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcYXNzZXRzXFxTY3JpcHRcXE1vZGVsXFxEaWFsb2dcXFNob3BcXEJhbmsvLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcTW9kZWxcXERpYWxvZ1xcU2hvcFxcQmFuay9hc3NldHNcXFNjcmlwdFxcTW9kZWxcXERpYWxvZ1xcU2hvcFxcQmFua1xcYmFua05hcC5qcyJdLCJuYW1lcyI6WyJCcm93c2VyVXRpbCIsInJlcXVpcmUiLCJoZWxwZXIiLCJjYyIsIkNsYXNzIiwiZXh0ZW5kcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJsYWJlbEJhbmsiLCJMYWJlbCIsImxhYmVsTnVtYmVyIiwibGFiZWxOYW1lIiwibGFiZWxCcmFuY2giLCJsYWJlbE5pY2tuYW1lIiwibW9yZUJhbmsiLCJOb2RlIiwic2Nyb2xsdmlld0JhbmsiLCJkZWZhdWx0IiwidHlwZSIsIlNjcm9sbFZpZXciLCJwcmVmYWIiLCJQcmVmYWIiLCJpc0xvYWQiLCJtb3JlSGluaFRodWMiLCJib2R5TmFwIiwibGFiZWxIaW5odGh1YyIsImlucHV0VGllbiIsIkVkaXRCb3giLCJpbnB1dE5hbWUiLCJpbnB1dEtob3AiLCJpbnB1dFNUSyIsImlucHV0TmFtZUdvIiwiaGluaFRodWMiLCJvbkxvYWQiLCJSZWRUIiwic2VuZCIsInNob3AiLCJiYW5rIiwibGlzdCIsInNlbGYiLCJlZGl0Ym94cyIsImtleUhhbmRsZSIsInQiLCJrZXlDb2RlIiwibWFjcm8iLCJLRVkiLCJ0YWIiLCJpc1RvcCIsImNoYW5nZU5leHRGb2N1c0VkaXRCb3giLCJwcmV2ZW50RGVmYXVsdCIsImVudGVyIiwiZm9jdXNHYW1lIiwib25OYXBDbGljayIsIm9uRW5hYmxlIiwic3RyaW5nIiwidXNlciIsIm5hbWUiLCJzeXMiLCJpc0Jyb3dzZXIiLCJhZGRFdmVudCIsIm9uRGlzYWJsZSIsImFjdGl2ZSIsInJlbW92ZUV2ZW50IiwiY2xlYW4iLCJzeXN0ZW1FdmVudCIsIm9uIiwiU3lzdGVtRXZlbnQiLCJFdmVudFR5cGUiLCJLRVlfRE9XTiIsIm9uS2V5RG93biIsImdldEhUTUxFbGVtZW50QnlFZGl0Qm94IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvZmYiLCJldmVudCIsImUiLCJpIiwibGVuZ3RoIiwiY2hlY2tFZGl0Qm94Rm9jdXMiLCJmb2N1c0VkaXRCb3giLCJpbkdhbWUiLCJub3RpY2UiLCJub2RlIiwibG9hZGluZyIsInRvZ2dsZU1vcmVCYW5rIiwidG9nZ2xlSGluaFRodWMiLCJvbkRhdGEiLCJkYXRhIiwibWFwIiwib2JqIiwiaW5kZXgiLCJpdGVtIiwiaW5zdGFudGlhdGUiLCJjb21wb25lbnRMZWZ0IiwiZ2V0Q29tcG9uZW50IiwiaW5pdCIsInRleHQiLCJjb250ZW50IiwiYWRkQ2hpbGQiLCJiaW5kIiwiYmFja1QiLCJudW1iZXIiLCJicmFuY2giLCJoaW5oVGh1Y1NlbGVjdCIsInNlbGVjdCIsInRhcmdldCIsInBhcmVudCIsImNoaWxkcmVuIiwiZm9yRWFjaCIsIm9uQ2hhbmdlclJlZCIsInZhbHVlIiwibnVtYmVyV2l0aENvbW1hcyIsImdldE9ubHlOdW1iZXJJblN0cmluZyIsIm9uQ2xpY2tOYXAiLCJzaG93IiwidGl0bGUiLCJraG9wIiwic3RrIiwibmFtZWdvIiwib25Db3B5TnVtYmVyIiwiQ29weVRvQ2xpcGJvYXJkIiwibm90aWNlQ29weSIsIm9uQ29weU5hbWUiLCJvbkNvcHlCcmFuY2giLCJvbkNvcHlOb2lEdW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElBQUlBLGNBQWNDLFFBQVEsYUFBUixDQUFsQjtBQUNBLElBQUlDLFNBQWNELFFBQVEsUUFBUixDQUFsQjs7QUFFQUUsR0FBR0MsS0FBSCxDQUFTO0FBQ1JDLFVBQVNGLEdBQUdHLFNBREo7O0FBR1JDLGFBQVk7QUFDWEMsYUFBYUwsR0FBR00sS0FETDtBQUVYQyxlQUFhUCxHQUFHTSxL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Q0E7QUFDRCxFQXBMTztBQXFMUmdDLGVBQWMsd0JBQVU7QUFDdkJwSCxLQUFHK0IsSUFBSCxDQUFRc0YsZUFBUixDQUF3QixLQUFLOUcsV0FBTCxDQUFpQjRDLE1BQXpDO0FBQ0FuRCxLQUFHK0IsSUFBSCxDQUFROEMsTUFBUixDQUFleUMsVUFBZjtBQUNBLEVBeExPO0FBeUxSQyxhQUFZLHNCQUFVO0FBQ3JCdkgsS0FBRytCLElBQUgsQ0FBUXNGLGVBQVIsQ0FBd0IsS0FBSzdHLFNBQUwsQ0FBZTJDLE1BQXZDO0FBQ0FuRCxLQUFHK0IsSUFBSCxDQUFROEMsTUFBUixDQUFleUMsVUFBZjtBQUNBLEVBNUxPO0FBNkxSRSxlQUFjLHdCQUFVO0FBQ3ZCeEgsS0FBRytCLElBQUgsQ0FBUXNGLGVBQVIsQ0FBd0IsS0FBSzVHLFdBQUwsQ0FBaUIwQyxNQUF6QztBQUNBbkQsS0FBRytCLElBQUgsQ0FBUThDLE1BQVIsQ0FBZXlDLFVBQWY7QUFDQSxFQWhNTztBQWlNUkcsZ0JBQWUseUJBQVU7QUFDeEJ6SCxLQUFHK0IsSUFBSCxDQUFRc0YsZUFBUixDQUF3QixLQUFLM0csYUFBTCxDQUFtQnlDLE1BQTNDO0FBQ0FuRCxLQUFHK0IsSUFBSCxDQUFROEMsTUFBUixDQUFleUMsVUFBZjtBQUNBO0FBcE1PLENBQVQiLCJmaWxlIjoiYmFua05hcC5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXGFzc2V0c1xcU2NyaXB0XFxNb2RlbFxcRGlhbG9nXFxTaG9wXFxCYW5rIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBCcm93c2VyVXRpbCA9IHJlcXVpcmUoJ0Jyb3dzZXJVdGlsJyk7XHJcbnZhciBoZWxwZXIgICAgICA9IHJlcXVpcmUoJ0hlbHBlcicpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG5cdGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcblx0cHJvcGVydGllczoge1xyXG5cdFx0bGFiZWxCYW5rOiAgIGNjLkxhYmVsLFxyXG5cdFx0bGFiZWxOdW1iZXI6IGNjLkxhYmVsLFxyXG5cdFx0bGFiZWxOYW1lOiAgIGNjLkxhYmVsLFxyXG5cdFx0bGFiZWxCcmFuY2g6IGNjLkxhYmVsLFxyXG5cclxuXHRcdGxhYmVsTmlja25hbWU6ICAgY2MuTGFiZWwsXHJcblxyXG5cdFx0bW9yZUJhbms6IGNjLk5vZGUsXHJcblx0XHRzY3JvbGx2aWV3QmFuazoge1xyXG5cdFx0XHRkZWZhdWx0OiBudWxsLFxyXG5cdFx0XHR0eXBlOiBjYy5TY3JvbGxWaWV3LFxyXG5cdFx0fSxcclxuXHRcdHByZWZhYjogY2MuUHJlZmFiLFxyXG5cdFx0aXNMb2FkOiBmYWxzZSxcclxuXHJcblx0XHRtb3JlSGluaFRodWM6ICBjYy5Ob2RlLFxyXG5cdFx0Ym9keU5hcDogICAgICAgY2MuTm9kZSxcclxuXHRcdGxhYmVsSGluaHRodWM6IGNjLkxhYmVsLFxyXG5cdFx0aW5wdXRUaWVuOiAgICAgY2MuRWRpdEJveCxcclxuXHRcdGlucHV0TmFtZTogICAgIGNjLkVkaXRCb3gsXHJcblx0XHRpbnB1dEtob3A6ICAgICBjYy5FZGl0Qm94LFxyXG5cdFx0aW5wdXRTVEs6ICAgICAgY2MuRWRpdEJveCxcclxuXHRcdGlucHV0TmFtZUdvOiAgIGNjLkVkaXRCb3gsXHJcblx0XHRoaW5oVGh1YzogICAgICAnJyxcclxuXHR9LFxyXG5cdG9uTG9hZCAoKSB7XHJcblx0XHRpZighdGhpcy5pc0xvYWQpIHtcclxuXHRcdFx0Y2MuUmVkVC5zZW5kKHtzaG9wOntiYW5rOntsaXN0OnRydWV9fX0pO1xyXG5cdFx0fVxyXG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xyXG5cdFx0dGhpcy5lZGl0Ym94cyA9IFt0aGlzLmlucHV0VGllbiwgdGhpcy5pbnB1dE5hbWVdO1xyXG5cdFx0dGhpcy5rZXlIYW5kbGUgPSBmdW5jdGlvbih0KSB7XHJcblx0XHRcdHJldHVybiB0LmtleUNvZGUgPT09IGNjLm1hY3JvLktFWS50YWIgPyAoc2VsZi5pc1RvcCgpICYmIHNlbGYuY2hhbmdlTmV4dEZvY3VzRWRpdEJveCgpLFxyXG5cdFx0XHRcdHQucHJldmVudERlZmF1bHQgJiYgdC5wcmV2ZW50RGVmYXVsdCgpLFxyXG5cdFx0XHRcdCExKSA6IHQua2V5Q29kZSA9PT0gY2MubWFjcm8uS0VZLmVudGVyID8gKEJyb3dzZXJVdGlsLmZvY3VzR2FtZSgpLCBzZWxmLm9uTmFwQ2xpY2soKSxcclxuXHRcdFx0XHR0LnByZXZlbnREZWZhdWx0ICYmIHQucHJldmVudERlZmF1bHQoKSxcclxuXHRcdFx0XHQhMSkgOiB2b2lkIDBcclxuXHRcdH1cclxuXHR9LFxyXG4gICAgb25FbmFibGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxhYmVsTmlja25hbWUuc3RyaW5nID0gY2MuUmVkVC51c2VyLm5hbWU7XHJcblx0XHRjYy5zeXMuaXNCcm93c2VyICYmIHRoaXMuYWRkRXZlbnQoKTtcclxuXHR9LFxyXG5cdG9uRGlzYWJsZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0dGhpcy5tb3JlQmFuay5hY3RpdmUgPSB0aGlzLm1vcmVIaW5oVGh1Yy5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdGNjLnN5cy5pc0Jyb3dzZXIgJiYgdGhpcy5yZW1vdmVFdmVudCgpO1xyXG5cdFx0dGhpcy5jbGVhbigpO1xyXG5cdH0sXHJcblx0YWRkRXZlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Y2Muc3lzdGVtRXZlbnQub24oY2MuU3lzdGVtRXZlbnQuRXZlbnRUeXBlLktFWV9ET1dOLCB0aGlzLm9uS2V5RG93biwgdGhpcyk7XHJcblx0XHRmb3IgKHZhciB0IGluIHRoaXMuZWRpdGJveHMpIHtcclxuXHRcdFx0QnJvd3NlclV0aWwuZ2V0SFRNTEVsZW1lbnRCeUVkaXRCb3godGhpcy5lZGl0Ym94c1t0XSkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5rZXlIYW5kbGUsICExKVxyXG5cdFx0fVxyXG5cdH0sXHJcblx0cmVtb3ZlRXZlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Zm9yICh2YXIgdCBpbiB0aGlzLmVkaXRib3hzKSB7XHJcblx0XHRcdEJyb3dzZXJVdGlsLmdldEhUTUxFbGVtZW50QnlFZGl0Qm94KHRoaXMuZWRpdGJveHNbdF0pLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5SGFuZGxlLCAhMSlcclxuXHRcdH1cclxuXHRcdGNjLnN5c3RlbUV2ZW50Lm9mZihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIHRoaXMub25LZXlEb3duLCB0aGlzKTtcclxuXHR9LFxyXG5cdG9uS2V5RG93bjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xyXG5cdFx0XHRjYXNlIGNjLm1hY3JvLktFWS50YWI6XHJcblx0XHRcdFx0dGhpcy5pc1RvcCgpICYmIHRoaXMuY2hhbmdlTmV4dEZvY3VzRWRpdEJveCgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIGNjLm1hY3JvLktFWS5lbnRlcjpcclxuXHRcdFx0XHR0aGlzLmlzVG9wKCkgJiYgdGhpcy5vbk5hcENsaWNrKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRjaGFuZ2VOZXh0Rm9jdXNFZGl0Qm94OiBmdW5jdGlvbigpIHtcclxuXHRcdGZvciAodmFyIHQgPSAhMSwgZSA9IDAsIGkgPSB0aGlzLmVkaXRib3hzLmxlbmd0aDsgZSA8IGk7IGUrKyl7XHJcblx0XHRcdGlmIChCcm93c2VyVXRpbC5jaGVja0VkaXRCb3hGb2N1cyh0aGlzLmVkaXRib3hzW2VdKSkge1xyXG5cdFx0XHRcdEJyb3dzZXJVdGlsLmZvY3VzRWRpdEJveCh0aGlzLmVkaXRib3hzW2VdKTtcclxuXHRcdFx0XHR0ID0gITA7XHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0IXQgJiYgMCA8IHRoaXMuZWRpdGJveHMubGVuZ3RoICYmIEJyb3dzZXJVdGlsLmZvY3VzRWRpdEJveCh0aGlzLmVkaXRib3hzWzBdKTtcclxuXHR9LFxyXG5cdGlzVG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAhY2MuUmVkVC5pbkdhbWUubm90aWNlLm5vZGUuYWN0aXZlICYmICFjYy5SZWRULmluR2FtZS5sb2FkaW5nLmFjdGl2ZTtcclxuXHR9LFxyXG5cdGNsZWFuOiBmdW5jdGlvbigpe1xyXG5cdFx0dGhpcy5pbnB1dFRpZW4uc3RyaW5nID0gdGhpcy5pbnB1dE5hbWUuc3RyaW5nID0gdGhpcy5pbnB1dFNUSy5zdHJpbmcgPSB0aGlzLmlucHV0S2hvcC5zdHJpbmcgPSB0aGlzLmlucHV0TmFtZUdvLnN0cmluZyA9ICcnO1xyXG5cdH0sXHJcblx0dG9nZ2xlTW9yZUJhbms6IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLm1vcmVCYW5rLmFjdGl2ZSA9ICF0aGlzLm1vcmVCYW5rLmFjdGl2ZTtcclxuXHR9LFxyXG5cdHRvZ2dsZUhpbmhUaHVjOiBmdW5jdGlvbigpe1xyXG5cdFx0dGhpcy5tb3JlSGluaFRodWMuYWN0aXZlID0gIXRoaXMubW9yZUhpbmhUaHVjLmFjdGl2ZTtcclxuXHR9LFxyXG5cdG9uRGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcblx0XHR0aGlzLmlzTG9hZCA9IHRydWU7XHJcblx0XHRpZiAoZGF0YS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdHRoaXNbJ2lfYXJnJ10gPSBkYXRhLm1hcChmdW5jdGlvbihvYmosIGluZGV4KXtcclxuXHRcdFx0XHRsZXQgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiKTtcclxuXHRcdFx0XHRsZXQgY29tcG9uZW50TGVmdCA9IGl0ZW0uZ2V0Q29tcG9uZW50KCdOYXBSZWRfaXRlbU9uZScpO1xyXG5cdFx0XHRcdGNvbXBvbmVudExlZnQuaW5pdCh0aGlzLCAnaV9hcmcnLCAnbGFiZWxCYW5rJywndG9nZ2xlTW9yZUJhbmsnKVxyXG5cdFx0XHRcdGNvbXBvbmVudExlZnQudGV4dC5zdHJpbmcgPSBvYmouYmFuaztcclxuXHRcdFx0XHR0aGlzLnNjcm9sbHZpZXdCYW5rLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcblx0XHRcdFx0Y29tcG9uZW50TGVmdC5kYXRhID0gb2JqO1xyXG5cdFx0XHRcdHJldHVybiBjb21wb25lbnRMZWZ0O1xyXG5cdFx0XHR9LmJpbmQodGhpcykpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0YmFja1Q6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0dGhpcy5sYWJlbE51bWJlci5zdHJpbmcgPSBkYXRhLm51bWJlcjtcclxuXHRcdHRoaXMubGFiZWxOYW1lLnN0cmluZyAgID0gZGF0YS5uYW1lO1xyXG5cdFx0dGhpcy5sYWJlbEJyYW5jaC5zdHJpbmcgPSBkYXRhLmJyYW5jaDtcclxuXHR9LFxyXG5cdGhpbmhUaHVjU2VsZWN0OiBmdW5jdGlvbihldmVudCwgc2VsZWN0KXtcclxuXHRcdHRoaXMuaGluaFRodWMgPSBzZWxlY3Q7XHJcblx0XHRldmVudC50YXJnZXQucGFyZW50LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24ob2JqKXtcclxuXHRcdFx0aWYgKG9iai5uYW1lID09PSBzZWxlY3QpIHtcclxuXHRcdFx0XHRvYmouY2hpbGRyZW5bMF0uYWN0aXZlID0gdHJ1ZTtcclxuXHRcdFx0XHR0aGlzLmxhYmVsSGluaHRodWMuc3RyaW5nID0gb2JqLmNoaWxkcmVuWzFdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRvYmouY2hpbGRyZW5bMF0uYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5tb3JlSGluaFRodWMuYWN0aXZlID0gZmFsc2U7XHJcblx0XHR9LmJpbmQodGhpcykpO1xyXG5cclxuXHRcdHN3aXRjaChzZWxlY3QpIHtcclxuXHRcdFx0Y2FzZSAnMSc6XHJcblx0XHRcdFx0dGhpcy5ib2R5TmFwLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5ib2R5TmFwLmNoaWxkcmVuWzFdLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuYm9keU5hcC5jaGlsZHJlblsyXS5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnMic6XHJcblx0XHRcdFx0dGhpcy5ib2R5TmFwLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuYm9keU5hcC5jaGlsZHJlblsxXS5hY3RpdmUgPSB0cnVlO1xyXG5cdFx0XHRcdHRoaXMuYm9keU5hcC5jaGlsZHJlblsyXS5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnMyc6XHJcblx0XHRcdFx0dGhpcy5ib2R5TmFwLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuYm9keU5hcC5jaGlsZHJlblsxXS5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLmJvZHlOYXAuY2hpbGRyZW5bMl0uYWN0aXZlID0gdHJ1ZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9LFxyXG5cdG9uQ2hhbmdlclJlZDogZnVuY3Rpb24odmFsdWUgPSAwKXtcclxuXHRcdHZhbHVlID0gaGVscGVyLm51bWJlcldpdGhDb21tYXMoaGVscGVyLmdldE9ubHlOdW1iZXJJblN0cmluZyh2YWx1ZSkpO1xyXG5cdFx0dGhpcy5pbnB1dFRpZW4uc3RyaW5nID0gdmFsdWUgPT0gMCA/IFwiXCIgOiB2YWx1ZTtcclxuXHR9LFxyXG5cdG9uQ2xpY2tOYXA6IGZ1bmN0aW9uKCl7XHJcblx0XHRpZiAoIXRoaXMubGFiZWxOdW1iZXIuc3RyaW5nLmxlbmd0aCkge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJcIiwgdGV4dDogXCJWdWkgbMOybmcgY2jhu41uIG5nw6JuIGjDoG5nIG114buRbiBu4bqhcC5cIn0pO1xyXG5cdFx0fWVsc2UgaWYgKHRoaXMuaGluaFRodWMgPT09ICcxJyAmJiB0aGlzLmlucHV0S2hvcC5zdHJpbmcubGVuZ3RoIDwgNikge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJcIiwgdGV4dDogXCJOaOG6rXAgbcOjIGdpYW8gZOG7i2NoIG5nw6JuIGjDoG5nLi4uXCJ9KTtcclxuXHRcdH1lbHNlIGlmICh0aGlzLmhpbmhUaHVjID09PSAnMicgJiYgdGhpcy5pbnB1dFNUSy5zdHJpbmcubGVuZ3RoIDwgNikge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJcIiwgdGV4dDogXCJWdWkgbMOybmcgbmjhuq1wIGNow61uaCB4w6FjIHPhu5EgdMOgaSBraG/huqNuIGPhu6dhIGLhuqFuLlwifSk7XHJcblx0XHR9ZWxzZSBpZiAodGhpcy5oaW5oVGh1YyA9PT0gJzMnICYmIHRoaXMuaW5wdXROYW1lR28uc3RyaW5nLmxlbmd0aCA8IDYpIHtcclxuXHRcdFx0Y2MuUmVkVC5pbkdhbWUubm90aWNlLnNob3coe3RpdGxlOlwiXCIsIHRleHQ6IFwiVnVpIGzDsm5nIG5o4bqtcCBI4buNIFTDqm4gbmfGsOG7nWkgxJFpIGNodXnhu4NuIHRp4buBbi5cIn0pO1xyXG5cdFx0fWVsc2UgaWYgKGhlbHBlci5nZXRPbmx5TnVtYmVySW5TdHJpbmcodGhpcy5pbnB1dFRpZW4uc3RyaW5nKT4+MCA8IDIwMDAwMCkge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJcIiwgdGV4dDogXCJO4bqhcCB04buRaSB0aGnhu4N1IDIwMC4wMDAsIHThu5FpIMSRYSAxLjAwMC4wMDAuMDAwXCJ9KTtcclxuXHRcdH1lbHNlIGlmICh0aGlzLmlucHV0TmFtZS5zdHJpbmcubGVuZ3RoIDwgNikge1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5ub3RpY2Uuc2hvdyh7dGl0bGU6XCJO4bqgUCBSRURcIiwgdGV4dDogXCJWdWkgbMOybmcgbmjhuq1wIGNow61uaCB4w6FjIEjhu40gVMOqbiBuZ8aw4budaSBn4butaVwifSk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bGV0IGRhdGEgPSB7XHJcblx0XHRcdFx0J2hpbmh0aHVjJzogdGhpcy5oaW5oVGh1YyxcclxuXHRcdFx0XHQnYmFuayc6ICAgICB0aGlzLmxhYmVsTnVtYmVyLnN0cmluZyxcclxuXHRcdFx0XHQnbW9uZXknOiAgICBoZWxwZXIuZ2V0T25seU51bWJlckluU3RyaW5nKHRoaXMuaW5wdXRUaWVuLnN0cmluZyksXHJcblx0XHRcdFx0J25hbWUnOiAgICAgdGhpcy5pbnB1dE5hbWUuc3RyaW5nLFxyXG5cdFx0XHR9O1xyXG5cdFx0XHRpZiAodGhpcy5oaW5oVGh1YyA9PT0gJzEnKSB7XHJcblx0XHRcdFx0ZGF0YS5raG9wID0gdGhpcy5pbnB1dEtob3Auc3RyaW5nO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLmhpbmhUaHVjID09PSAnMicpIHtcclxuXHRcdFx0XHRkYXRhLnN0ayA9IHRoaXMuaW5wdXRTVEsuc3RyaW5nO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLmhpbmhUaHVjID09PSAnMycpIHtcclxuXHRcdFx0XHRkYXRhLm5hbWVnbyA9IHRoaXMuaW5wdXROYW1lR28uc3RyaW5nO1xyXG5cdFx0XHR9XHJcblx0XHRcdGRhdGEgPSB7J3Nob3AnOnsnYmFuayc6eyduYXAnOmRhdGF9fX07XHJcblx0XHRcdGNjLlJlZFQuc2VuZChkYXRhKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdG9uQ29weU51bWJlcjogZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuQ29weVRvQ2xpcGJvYXJkKHRoaXMubGFiZWxOdW1iZXIuc3RyaW5nKTtcclxuXHRcdGNjLlJlZFQuaW5HYW1lLm5vdGljZUNvcHkoKTtcclxuXHR9LFxyXG5cdG9uQ29weU5hbWU6IGZ1bmN0aW9uKCl7XHJcblx0XHRjYy5SZWRULkNvcHlUb0NsaXBib2FyZCh0aGlzLmxhYmVsTmFtZS5zdHJpbmcpO1xyXG5cdFx0Y2MuUmVkVC5pbkdhbWUubm90aWNlQ29weSgpO1xyXG5cdH0sXHJcblx0b25Db3B5QnJhbmNoOiBmdW5jdGlvbigpe1xyXG5cdFx0Y2MuUmVkVC5Db3B5VG9DbGlwYm9hcmQodGhpcy5sYWJlbEJyYW5jaC5zdHJpbmcpO1xyXG5cdFx0Y2MuUmVkVC5pbkdhbWUubm90aWNlQ29weSgpO1xyXG5cdH0sXHJcblx0b25Db3B5Tm9pRHVuZzogZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuQ29weVRvQ2xpcGJvYXJkKHRoaXMubGFiZWxOaWNrbmFtZS5zdHJpbmcpO1xyXG5cdFx0Y2MuUmVkVC5pbkdhbWUubm90aWNlQ29weSgpO1xyXG5cdH0sXHJcbn0pO1xyXG4iXX0=