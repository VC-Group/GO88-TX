
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Game/BanCa/dialog/Fish_nap.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7367dwn7GJNKp2JprdSku2f', 'Fish_nap');
// Script/Game/BanCa/dialog/Fish_nap.js

'use strict';

var Helper = require('Helper');

cc.Class({
	extends: cc.Component,

	properties: {
		touch: cc.Node,
		mask: cc.Node,
		toggle: cc.Toggle,
		labelBet: cc.Label,
		labelMin: cc.Label,
		labelMax: cc.Label,
		min: '',
		max: '',
		outGame: false
	},
	init: function init() {
		var room = cc.RedT.inGame.room[cc.RedT.inGame.regGame];
		this.betMin = room * this.min;
		this.betMax = room * this.max;
		this.h = this.betMin < 20000 ? 1000 : this.betMin < 200000 ? 10000 : 100000;

		this.labelMin.string = this.labelBet.string = Helper.numberWithCommas(this.betMin);
		this.labelMax.string = Helper.numberWithCommas(this.betMax);
		this.betMin = this.betMin / this.h;
		this.betMax = this.betMax / this.h;

		this.toggle.isChecked = true;
	},
	onEnable: function onEnable() {
		this.init();
		this.node.runAction(cc.RedT.inGame.dialog.actionShow);
		this.touch.on(cc.Node.EventType.TOUCH_START, this.eventStart, this);
		this.touch.on(cc.Node.EventType.TOUCH_MOVE, this.eventMove, this);
		this.touch.on(cc.Node.EventType.TOUCH_END, this.eventEnd, this);
		this.touch.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd, this);
	},
	onDisable: function onDisable() {
		cc.RedT.inGame.dialog.resetSizeDialog(this.node);
		this.touch.off(cc.Node.EventType.TOUCH_START, this.eventStart, this);
		this.touch.off(cc.Node.EventType.TOUCH_MOVE, this.eventMove, this);
		this.touch.off(cc.Node.EventType.TOUCH_END, this.eventEnd, this);
		this.touch.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd, this);

		this.outGame = false;
		this.mask.width = 0;
		this.touch.position = cc.v2(0, 0);
	},
	eventStart: function eventStart(e) {
		this.touch.runAction(cc.scaleTo(0.1, 0.7));
		this.offsetX = { localX: e.touch.getLocationX(), x: this.touch.position.x };
	},
	eventMove: function eventMove(e) {
		var x = e.touch.getLocationX() - this.offsetX.localX + this.offsetX.x;
		if (x < 0) {
			x = 0;
		} else if (x > 401) {
			x = 401;
		}
		this.mask.width = x;
		this.touch.position = cc.v2(x, 0);
		var bet = x / 401 * (this.betMax - this.betMin) + this.betMin >> 0;
		this.labelBet.string = Helper.numberWithCommas(bet * this.h);
	},
	eventEnd: function eventEnd() {
		this.touch.runAction(cc.scaleTo(0.1, 0.6));
	},
	onOkClick: function onOkClick() {
		cc.RedT.inGame.loading.active = true;
		if (this.outGame === true) {
			cc.RedT.send({ g: { fish: { nap: Helper.getOnlyNumberInString(this.labelBet.string) } } });
		} else {
			cc.RedT.send({ g: { fish: { reg: { room: cc.RedT.inGame.regGame, balans: Helper.getOnlyNumberInString(this.labelBet.string) } } } });
		}
	},
	onCancelClick: function onCancelClick() {
		if (this.outGame === true) {
			cc.RedT.inGame.Game.onClickOutGame();
		}
		cc.RedT.inGame.dialog.onClickBack();
	}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcR2FtZVxcQmFuQ2FcXGRpYWxvZy8uLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcYXNzZXRzXFxTY3JpcHRcXEdhbWVcXEJhbkNhXFxkaWFsb2cvYXNzZXRzXFxTY3JpcHRcXEdhbWVcXEJhbkNhXFxkaWFsb2dcXEZpc2hfbmFwLmpzIl0sIm5hbWVzIjpbIkhlbHBlciIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiZXh0ZW5kcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJ0b3VjaCIsIk5vZGUiLCJtYXNrIiwidG9nZ2xlIiwiVG9nZ2xlIiwibGFiZWxCZXQiLCJMYWJlbCIsImxhYmVsTWluIiwibGFiZWxNYXgiLCJtaW4iLCJtYXgiLCJvdXRHYW1lIiwiaW5pdCIsInJvb20iLCJSZWRUIiwiaW5HYW1lIiwicmVnR2FtZSIsImJldE1pbiIsImJldE1heCIsImgiLCJzdHJpbmciLCJudW1iZXJXaXRoQ29tbWFzIiwiaXNDaGVja2VkIiwib25FbmFibGUiLCJub2RlIiwicnVuQWN0aW9uIiwiZGlhbG9nIiwiYWN0aW9uU2hvdyIsIm9uIiwiRXZlbnRUeXBlIiwiVE9VQ0hfU1RBUlQiLCJldmVudFN0YXJ0IiwiVE9VQ0hfTU9WRSIsImV2ZW50TW92ZSIsIlRPVUNIX0VORCIsImV2ZW50RW5kIiwiVE9VQ0hfQ0FOQ0VMIiwib25EaXNhYmxlIiwicmVzZXRTaXplRGlhbG9nIiwib2ZmIiwid2lkdGgiLCJwb3NpdGlvbiIsInYyIiwiZSIsInNjYWxlVG8iLCJvZmZzZXRYIiwibG9jYWxYIiwiZ2V0TG9jYXRpb25YIiwieCIsImJldCIsIm9uT2tDbGljayIsImxvYWRpbmciLCJhY3RpdmUiLCJzZW5kIiwiZyIsImZpc2giLCJuYXAiLCJnZXRPbmx5TnVtYmVySW5TdHJpbmciLCJyZWciLCJiYWxhbnMiLCJvbkNhbmNlbENsaWNrIiwiR2FtZSIsIm9uQ2xpY2tPdXRHYW1lIiwib25DbGlja0JhY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUFBSUEsU0FBU0MsUUFBUSxRQUFSLENBQWI7O0FBRUFDLEdBQUdDLEtBQUgsQ0FBUztBQUNSQyxVQUFTRixHQUFHRyxTQURKOztBQUdSQyxhQUFZO0FBQ1hDLFNBQVVMLEdBQUdNLElBREY7QUFFWEMsUUFBVVAsR0FBR00sSUFGRjtBQUdYRSxVQUFVUixHQUFHUyxNQUhGO0FBSVhDLFlBQVVWLEdBQUdXLEtBSkY7QUFLWEMsWUFBVVosR0FBR1csS0FMRjtBQU1YRSxZQUFVYixHQUFHVyxLQU5GO0FBT1hHLE9BQUssRUFQTTtBQVFYQyxPQUFLLEVBUk07QUFTWEMsV0FBUztBQVRFLEVBSEo7QUFjUkMsT0FBTSxnQkFBVTtBQUNmLE1BQUlDLE9BQU9sQixHQUFHbUIsSUFBSCxDQUFRQyxNQUFSLENBQWVGLElBQWYsQ0FBb0JsQixHQUFHbUIsSUFBSCxDQUFRQyxNQUFSLENBQWVDLE9BQW5DLENBQVg7QUFDQSxPQUFLQyxNQUFMLEdBQWNKLE9BQUssS0FBS0osR0FBeEI7QUFDQSxPQUFLUyxNQUFMLEdBQWNMLE9BQUssS0FBS0gsR0FBeEI7QUFDQSxPQUFLUyxDQUFMLEdBQWMsS0FBS0YsTUFBTCxHQUFjLEtBQWQsR0FBc0IsSUFBdEIsR0FBOEIsS0FBS0EsTUFBTCxHQUFjLE1BQWQsR0FBdUIsS0FBdkIsR0FBK0IsTUFBM0U7O0FBRUEsT0FBS1YsUUFBTCxDQUFjYSxNQUFkLEdBQXVCLEtBQUtmLFFBQUwsQ0FBY2UsTUFBZCxHQUF1QjNCLE9BQU80QixnQkFBUCxDQUF3QixLQUFLSixNQUE3QixDQUE5QztBQUNBLE9BQUtULFFBQUwsQ0FBY1ksTUFBZCxHQUF1QjNCLE9BQU80QixnQkFBUCxDQUF3QixLQUFLSCxNQUE3QixDQUF2QjtBQUNBLE9BQUtELE1BQUwsR0FBYyxLQUFLQSxNQUFMLEdBQVksS0FBS0UsQ0FBL0I7QUFDQSxPQUFLRCxNQUFMLEdBQWMsS0FBS0EsTUFBTCxHQUFZLEtBQUtDLENBQS9COztBQUVBLE9BQUtoQixNQUFMLENBQVltQixTQUFaLEdBQXdCLElBQXhCO0FBQ0EsRUExQk87QUEyQlJDLFdBQVUsb0JBQVc7QUFDcEIsT0FBS1gsSUFBTDtBQUNBLE9BQUtZLElBQUwsQ0FBVUMsU0FBVixDQUFvQjlCLEdBQUdtQixJQUFILENBQVFDLE1BQVIsQ0FBZVcsTUFBZixDQUFzQkMsVUFBMUM7QUFDQSxPQUFLM0IsS0FBTCxDQUFXNEIsRUFBWCxDQUFjakMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQkMsV0FBaEMsRUFBOEMsS0FBS0MsVUFBbkQsRUFBK0QsSUFBL0Q7QUFDQSxPQUFLL0IsS0FBTCxDQUFXNEIsRUFBWCxDQUFjakMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQkcsVUFBaEMsRUFBOEMsS0FBS0MsU0FBbkQsRUFBK0QsSUFBL0Q7QUFDQSxPQUFLakMsS0FBTCxDQUFXNEIsRUFBWCxDQUFjakMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQkssU0FBaEMsRUFBOEMsS0FBS0MsUUFBbkQsRUFBK0QsSUFBL0Q7QUFDQSxPQUFLbkMsS0FBTCxDQUFXNEIsRUFBWCxDQUFjakMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQk8sWUFBaEMsRUFBOEMsS0FBS0QsUUFBbkQsRUFBK0QsSUFBL0Q7QUFDQSxFQWxDTztBQW1DUkUsWUFBVyxxQkFBVztBQUNyQjFDLEtBQUdtQixJQUFILENBQVFDLE1BQVIsQ0FBZVcsTUFBZixDQUFzQlksZUFBdEIsQ0FBc0MsS0FBS2QsSUFBM0M7QUFDQSxPQUFLeEIsS0FBTCxDQUFXdUMsR0FBWCxDQUFlNUMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQkMsV0FBakMsRUFBK0MsS0FBS0MsVUFBcEQsRUFBZ0UsSUFBaEU7QUFDQSxPQUFLL0IsS0FBTCxDQUFXdUMsR0FBWCxDQUFlNUMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQkcsVUFBakMsRUFBK0MsS0FBS0MsU0FBcEQsRUFBZ0UsSUFBaEU7QUFDQSxPQUFLakMsS0FBTCxDQUFXdUMsR0FBWCxDQUFlNUMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQkssU0FBakMsRUFBK0MsS0FBS0MsUUFBcEQsRUFBZ0UsSUFBaEU7QUFDQSxPQUFLbkMsS0FBTCxDQUFXdUMsR0FBWCxDQUFlNUMsR0FBR00sSUFBSCxDQUFRNEIsU0FBUixDQUFrQk8sWUFBakMsRUFBK0MsS0FBS0QsUUFBcEQsRUFBZ0UsSUFBaEU7O0FBRUEsT0FBS3hCLE9BQUwsR0FBZSxLQUFmO0FBQ0EsT0FBS1QsSUFBTCxDQUFVc0MsS0FBVixHQUFzQixDQUF0QjtBQUNBLE9BQUt4QyxLQUFMLENBQVd5QyxRQUFYLEdBQXNCOUMsR0FBRytDLEVBQUgsQ0FBTSxDQUFOLEVBQVMsQ0FBVCxDQUF0QjtBQUNBLEVBN0NPO0FBOENSWCxhQUFZLG9CQUFTWSxDQUFULEVBQVc7QUFDdEIsT0FBSzNDLEtBQUwsQ0FBV3lCLFNBQVgsQ0FBcUI5QixHQUFHaUQsT0FBSCxDQUFXLEdBQVgsRUFBZ0IsR0FBaEIsQ0FBckI7QUFDQSxPQUFLQyxPQUFMLEdBQWUsRUFBQ0MsUUFBUUgsRUFBRTNDLEtBQUYsQ0FBUStDLFlBQVIsRUFBVCxFQUFpQ0MsR0FBRyxLQUFLaEQsS0FBTCxDQUFXeUMsUUFBWCxDQUFvQk8sQ0FBeEQsRUFBZjtBQUNBLEVBakRPO0FBa0RSZixZQUFXLG1CQUFTVSxDQUFULEVBQVc7QUFDckIsTUFBSUssSUFBSUwsRUFBRTNDLEtBQUYsQ0FBUStDLFlBQVIsS0FBdUIsS0FBS0YsT0FBTCxDQUFhQyxNQUFwQyxHQUEyQyxLQUFLRCxPQUFMLENBQWFHLENBQWhFO0FBQ0EsTUFBSUEsSUFBSSxDQUFSLEVBQVc7QUFDVkEsT0FBSSxDQUFKO0FBQ0EsR0FGRCxNQUVNLElBQUdBLElBQUksR0FBUCxFQUFXO0FBQ2hCQSxPQUFJLEdBQUo7QUFDQTtBQUNELE9BQUs5QyxJQUFMLENBQVVzQyxLQUFWLEdBQWtCUSxDQUFsQjtBQUNBLE9BQUtoRCxLQUFMLENBQVd5QyxRQUFYLEdBQXNCOUMsR0FBRytDLEVBQUgsQ0FBTU0sQ0FBTixFQUFTLENBQVQsQ0FBdEI7QUFDQSxNQUFJQyxNQUFTRCxJQUFFLEdBQUgsSUFBUyxLQUFLOUIsTUFBTCxHQUFZLEtBQUtELE1BQTFCLENBQUQsR0FBb0MsS0FBS0EsTUFBMUMsSUFBbUQsQ0FBN0Q7QUFDQSxPQUFLWixRQUFMLENBQWNlLE1BQWQsR0FBdUIzQixPQUFPNEIsZ0JBQVAsQ0FBd0I0QixNQUFJLEtBQUs5QixDQUFqQyxDQUF2QjtBQUNBLEVBN0RPO0FBOERSZ0IsV0FBVSxvQkFBVTtBQUNuQixPQUFLbkMsS0FBTCxDQUFXeUIsU0FBWCxDQUFxQjlCLEdBQUdpRCxPQUFILENBQVcsR0FBWCxFQUFnQixHQUFoQixDQUFyQjtBQUNBLEVBaEVPO0FBaUVSTSxZQUFXLHFCQUFVO0FBQ3BCdkQsS0FBR21CLElBQUgsQ0FBUUMsTUFBUixDQUFlb0MsT0FBZixDQUF1QkMsTUFBdkIsR0FBZ0MsSUFBaEM7QUFDQSxNQUFHLEtBQUt6QyxPQUFMLEtBQWlCLElBQXBCLEVBQXlCO0FBQ3hCaEIsTUFBR21CLElBQUgsQ0FBUXVDLElBQVIsQ0FBYSxFQUFDQyxHQUFFLEVBQUNDLE1BQUssRUFBQ0MsS0FBSS9ELE9BQU9nRSxxQkFBUCxDQUE2QixLQUFLcEQsUUFBTCxDQUFjZSxNQUEzQyxDQUFMLEVBQU4sRUFBSCxFQUFiO0FBQ0EsR0FGRCxNQUVLO0FBQ0p6QixNQUFHbUIsSUFBSCxDQUFRdUMsSUFBUixDQUFhLEVBQUNDLEdBQUUsRUFBQ0MsTUFBSyxFQUFDRyxLQUFJLEVBQUM3QyxNQUFLbEIsR0FBR21CLElBQUgsQ0FBUUMsTUFBUixDQUFlQyxPQUFyQixFQUE4QjJDLFFBQU9sRSxPQUFPZ0UscUJBQVAsQ0FBNkIsS0FBS3BELFFBQUwsQ0FBY2UsTUFBM0MsQ0FBckMsRUFBTCxFQUFOLEVBQUgsRUFBYjtBQUNBO0FBQ0QsRUF4RU87QUF5RVJ3QyxnQkFBZSx5QkFBVTtBQUN4QixNQUFHLEtBQUtqRCxPQUFMLEtBQWlCLElBQXBCLEVBQXlCO0FBQ3hCaEIsTUFBR21CLElBQUgsQ0FBUUMsTUFBUixDQUFlOEMsSUFBZixDQUFvQkMsY0FBcEI7QUFDQTtBQUNEbkUsS0FBR21CLElBQUgsQ0FBUUMsTUFBUixDQUFlVyxNQUFmLENBQXNCcUMsV0FBdEI7QUFDQTtBQTlFTyxDQUFUIiwiZmlsZSI6IkZpc2hfbmFwLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcR2FtZVxcQmFuQ2FcXGRpYWxvZyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgSGVscGVyID0gcmVxdWlyZSgnSGVscGVyJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcblx0ZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuXHRwcm9wZXJ0aWVzOiB7XHJcblx0XHR0b3VjaDogICAgY2MuTm9kZSxcclxuXHRcdG1hc2s6ICAgICBjYy5Ob2RlLFxyXG5cdFx0dG9nZ2xlOiAgIGNjLlRvZ2dsZSxcclxuXHRcdGxhYmVsQmV0OiBjYy5MYWJlbCxcclxuXHRcdGxhYmVsTWluOiBjYy5MYWJlbCxcclxuXHRcdGxhYmVsTWF4OiBjYy5MYWJlbCxcclxuXHRcdG1pbjogJycsXHJcblx0XHRtYXg6ICcnLFxyXG5cdFx0b3V0R2FtZTogZmFsc2UsXHJcblx0fSxcclxuXHRpbml0OiBmdW5jdGlvbigpe1xyXG5cdFx0bGV0IHJvb20gPSBjYy5SZWRULmluR2FtZS5yb29tW2NjLlJlZFQuaW5HYW1lLnJlZ0dhbWVdO1xyXG5cdFx0dGhpcy5iZXRNaW4gPSByb29tKnRoaXMubWluO1xyXG5cdFx0dGhpcy5iZXRNYXggPSByb29tKnRoaXMubWF4O1xyXG5cdFx0dGhpcy5oICAgICAgPSB0aGlzLmJldE1pbiA8IDIwMDAwID8gMTAwMCA6ICh0aGlzLmJldE1pbiA8IDIwMDAwMCA/IDEwMDAwIDogMTAwMDAwKTtcclxuXHJcblx0XHR0aGlzLmxhYmVsTWluLnN0cmluZyA9IHRoaXMubGFiZWxCZXQuc3RyaW5nID0gSGVscGVyLm51bWJlcldpdGhDb21tYXModGhpcy5iZXRNaW4pO1xyXG5cdFx0dGhpcy5sYWJlbE1heC5zdHJpbmcgPSBIZWxwZXIubnVtYmVyV2l0aENvbW1hcyh0aGlzLmJldE1heCk7XHJcblx0XHR0aGlzLmJldE1pbiA9IHRoaXMuYmV0TWluL3RoaXMuaDtcclxuXHRcdHRoaXMuYmV0TWF4ID0gdGhpcy5iZXRNYXgvdGhpcy5oO1xyXG5cclxuXHRcdHRoaXMudG9nZ2xlLmlzQ2hlY2tlZCA9IHRydWU7XHJcblx0fSxcclxuXHRvbkVuYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHRcdHRoaXMubm9kZS5ydW5BY3Rpb24oY2MuUmVkVC5pbkdhbWUuZGlhbG9nLmFjdGlvblNob3cpO1xyXG5cdFx0dGhpcy50b3VjaC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgIHRoaXMuZXZlbnRTdGFydCwgdGhpcyk7XHJcblx0XHR0aGlzLnRvdWNoLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX01PVkUsICAgdGhpcy5ldmVudE1vdmUsICB0aGlzKTtcclxuXHRcdHRoaXMudG91Y2gub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCAgICB0aGlzLmV2ZW50RW5kLCAgIHRoaXMpO1xyXG5cdFx0dGhpcy50b3VjaC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9DQU5DRUwsIHRoaXMuZXZlbnRFbmQsICAgdGhpcyk7XHJcblx0fSxcclxuXHRvbkRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Y2MuUmVkVC5pbkdhbWUuZGlhbG9nLnJlc2V0U2l6ZURpYWxvZyh0aGlzLm5vZGUpO1xyXG5cdFx0dGhpcy50b3VjaC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsICB0aGlzLmV2ZW50U3RhcnQsIHRoaXMpO1xyXG5cdFx0dGhpcy50b3VjaC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfTU9WRSwgICB0aGlzLmV2ZW50TW92ZSwgIHRoaXMpO1xyXG5cdFx0dGhpcy50b3VjaC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCAgICB0aGlzLmV2ZW50RW5kLCAgIHRoaXMpO1xyXG5cdFx0dGhpcy50b3VjaC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLCB0aGlzLmV2ZW50RW5kLCAgIHRoaXMpO1xyXG5cclxuXHRcdHRoaXMub3V0R2FtZSA9IGZhbHNlO1xyXG5cdFx0dGhpcy5tYXNrLndpZHRoICAgICA9IDA7XHJcblx0XHR0aGlzLnRvdWNoLnBvc2l0aW9uID0gY2MudjIoMCwgMCk7XHJcblx0fSxcclxuXHRldmVudFN0YXJ0OiBmdW5jdGlvbihlKXtcclxuXHRcdHRoaXMudG91Y2gucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC4xLCAwLjcpKTtcclxuXHRcdHRoaXMub2Zmc2V0WCA9IHtsb2NhbFg6IGUudG91Y2guZ2V0TG9jYXRpb25YKCksIHg6IHRoaXMudG91Y2gucG9zaXRpb24ueH07XHJcblx0fSxcclxuXHRldmVudE1vdmU6IGZ1bmN0aW9uKGUpe1xyXG5cdFx0bGV0IHggPSBlLnRvdWNoLmdldExvY2F0aW9uWCgpLXRoaXMub2Zmc2V0WC5sb2NhbFgrdGhpcy5vZmZzZXRYLng7XHJcblx0XHRpZiAoeCA8IDApIHtcclxuXHRcdFx0eCA9IDA7XHJcblx0XHR9ZWxzZSBpZih4ID4gNDAxKXtcclxuXHRcdFx0eCA9IDQwMTtcclxuXHRcdH1cclxuXHRcdHRoaXMubWFzay53aWR0aCA9IHg7XHJcblx0XHR0aGlzLnRvdWNoLnBvc2l0aW9uID0gY2MudjIoeCwgMCk7XHJcblx0XHRsZXQgYmV0ID0gKCgoeC80MDEpKih0aGlzLmJldE1heC10aGlzLmJldE1pbikpK3RoaXMuYmV0TWluKT4+MDtcclxuXHRcdHRoaXMubGFiZWxCZXQuc3RyaW5nID0gSGVscGVyLm51bWJlcldpdGhDb21tYXMoYmV0KnRoaXMuaCk7XHJcblx0fSxcclxuXHRldmVudEVuZDogZnVuY3Rpb24oKXtcclxuXHRcdHRoaXMudG91Y2gucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC4xLCAwLjYpKTtcclxuXHR9LFxyXG5cdG9uT2tDbGljazogZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuaW5HYW1lLmxvYWRpbmcuYWN0aXZlID0gdHJ1ZTtcclxuXHRcdGlmKHRoaXMub3V0R2FtZSA9PT0gdHJ1ZSl7XHJcblx0XHRcdGNjLlJlZFQuc2VuZCh7Zzp7ZmlzaDp7bmFwOkhlbHBlci5nZXRPbmx5TnVtYmVySW5TdHJpbmcodGhpcy5sYWJlbEJldC5zdHJpbmcpfX19KTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRjYy5SZWRULnNlbmQoe2c6e2Zpc2g6e3JlZzp7cm9vbTpjYy5SZWRULmluR2FtZS5yZWdHYW1lLCBiYWxhbnM6SGVscGVyLmdldE9ubHlOdW1iZXJJblN0cmluZyh0aGlzLmxhYmVsQmV0LnN0cmluZyl9fX19KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdG9uQ2FuY2VsQ2xpY2s6IGZ1bmN0aW9uKCl7XHJcblx0XHRpZih0aGlzLm91dEdhbWUgPT09IHRydWUpe1xyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5HYW1lLm9uQ2xpY2tPdXRHYW1lKCk7XHJcblx0XHR9XHJcblx0XHRjYy5SZWRULmluR2FtZS5kaWFsb2cub25DbGlja0JhY2soKTtcclxuXHR9LFxyXG59KTtcclxuIl19