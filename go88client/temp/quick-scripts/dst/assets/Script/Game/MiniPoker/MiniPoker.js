
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Game/MiniPoker/MiniPoker.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ef909PNu9FNDqFtdNzEnAw5', 'MiniPoker');
// Script/Game/MiniPoker/MiniPoker.js

'use strict';

var helper = require('Helper');
var MiniPoker_reel = require('MiniPoker_reel');

cc.Class({
	extends: cc.Component,

	properties: {
		background: cc.Node,
		buttonSpin: cc.Node,
		buttonAuto: cc.Node,
		buttonSpeed: cc.Node,
		buttonStop: cc.Node,
		reels: {
			default: [],
			type: MiniPoker_reel
		},
		font: cc.BitmapFont,
		bet: cc.Node,
		notice: cc.Node,
		card: cc.Prefab,
		cardf: cc.Prefab,
		phien: cc.Label,
		hu: cc.Label,
		cuoc: "",
		isAuto: false,
		isSpeed: false,
		isSpin: false
	},
	init: function init(obj) {
		this.RedT = obj;
		this.Top = obj.Dialog.MiniPoker_Top;
		this.LichSu = obj.Dialog.MiniPoker_LichSu;
		cc.RedT.setting.minipoker = cc.RedT.setting.minipoker || { scale: 1, bet: this.cuoc };

		this.node.runScale = false;

		this.card.data.getComponent('Card').config();

		var check = localStorage.getItem('minipoker');
		if (check == "true") {
			this.node.active = true;
		}

		if (void 0 === cc.RedT.util.fontEffect) {
			cc.RedT.util.fontEffect = this.font;
		}
		if (void 0 !== cc.RedT.setting.minipoker.position) {
			this.node.position = cc.RedT.setting.minipoker.position;
		}

		if (void 0 !== cc.RedT.setting.minipoker.bet && cc.RedT.setting.minipoker.bet != this.cuoc) {
			this.intChangerBet();
		}
		if (void 0 !== cc.RedT.setting.minipoker.isSpeed && this.isSpeed != cc.RedT.setting.minipoker.isSpeed) {
			this.onClickSpeed();
		}
		if (void 0 !== cc.RedT.setting.minipoker.isAuto && this.isAuto != cc.RedT.setting.minipoker.isAuto) {
			this.onClickAuto();
		}
	},
	onLoad: function onLoad() {
		var self = this;
		this.data = null;
		this.ttOffset = null;

		this.reels.forEach(function (reel) {
			reel.init(self);
		});
	},

	onEnable: function onEnable() {
		this.onGetHu();
		this.background.on(cc.Node.EventType.TOUCH_START, this.eventStart, this);
		this.background.on(cc.Node.EventType.TOUCH_MOVE, this.eventMove, this);
		this.background.on(cc.Node.EventType.TOUCH_END, this.eventEnd, this);
		this.background.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd, this);
		// this.background.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);
	},
	onDisable: function onDisable() {
		this.background.off(cc.Node.EventType.TOUCH_START, this.eventStart, this);
		this.background.off(cc.Node.EventType.TOUCH_MOVE, this.eventMove, this);
		this.background.off(cc.Node.EventType.TOUCH_END, this.eventEnd, this);
		this.background.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd, this);
		// this.background.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);
		this.onCloseGame();
	},
	eventStart: function eventStart(e) {
		this.setTop();
		this.ttOffset = cc.v2(e.touch.getLocationX() - this.node.position.x, e.touch.getLocationY() - this.node.position.y);
	},
	eventMove: function eventMove(e) {
		this.node.position = cc.v2(e.touch.getLocationX() - this.ttOffset.x, e.touch.getLocationY() - this.ttOffset.y);
	},
	eventEnd: function eventEnd() {
		cc.RedT.setting.minipoker.position = this.node.position;
	},
	openGame: function openGame() {
		cc.RedT.audio.playClick();
		if (cc.RedT.IS_LOGIN) {
			this.node.active = !0;
			localStorage.setItem('minipoker', true);
			this.setTop();
		} else cc.RedT.inGame.dialog.showSignIn();
	},
	closeGame: function closeGame() {
		cc.RedT.audio.playUnClick();
		this.node.active = !1;
		localStorage.setItem('minipoker', false);
	},
	random: function random() {
		var newG = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

		this.reels.forEach(function (reel) {
			reel.random(newG);
		});
	},
	autoSpin: function autoSpin() {
		this.random();
		this.reels.forEach(function (reel, index) {
			reel.spin(index);
		});
	},
	onSpin: function onSpin() {
		this.buttonSpin.pauseSystemEvents();
		this.bet.children.forEach(function (bet) {
			bet.pauseSystemEvents();
		});
	},
	offSpin: function offSpin() {
		this.isSpin = false;
		this.buttonStop.active = this.isSpin ? this.isAuto ? true : false : false;
		this.buttonSpin.resumeSystemEvents();
		this.bet.children.forEach(function (bet) {
			if (bet.children[0].active) {
				bet.resumeSystemEvents();
			}
		});
	},
	spin: function spin(event) {
		if (!this.isSpin) {
			this.isSpin = true;
			this.onSpin();
			this.onGetSpin();
		}
	},
	onClickSpeed: function onClickSpeed() {
		this.isSpeed = cc.RedT.setting.minipoker.isSpeed = !this.isSpeed;
		this.buttonSpeed.color = this.isSpeed ? cc.Color.WHITE : cc.color(136, 136, 136);
	},
	onClickAuto: function onClickAuto() {
		this.isAuto = cc.RedT.setting.minipoker.isAuto = !this.isAuto;
		this.buttonAuto.color = this.isAuto ? cc.Color.WHITE : cc.color(136, 136, 136);
		this.buttonStop.active = this.isSpin ? this.isAuto ? true : false : false;
	},
	onClickStop: function onClickStop() {
		this.onClickAuto();
		this.buttonStop.active = false;
	},
	intChangerBet: function intChangerBet() {
		this.bet.children.forEach(function (obj) {
			if (obj.name === cc.RedT.setting.minipoker.bet) {
				this.cuoc = obj.name;
				obj.children[0].active = false;
				obj.children[1].active = true;
				obj.pauseSystemEvents();
			} else {
				obj.children[0].active = true;
				obj.children[1].active = false;
				obj.resumeSystemEvents();
			}
		}.bind(this));
	},
	changerBet: function changerBet(event, bet) {
		this.cuoc = cc.RedT.setting.minipoker.bet = event.target.name;
		this.bet.children.forEach(function (obj) {
			if (obj.name === this.cuoc) {
				obj.children[0].active = false;
				obj.children[1].active = true;
				obj.pauseSystemEvents();
			} else {
				obj.children[0].active = true;
				obj.children[1].active = false;
				obj.resumeSystemEvents();
			}
		}.bind(this));
		this.onGetHu();
	},
	speed: function speed() {
		return this.isSpeed ? 1.2 : 2.5;
	},
	onData: function onData(data) {
		var self = this;
		if (void 0 !== data.status) {
			if (data.status === 1) {
				this.buttonStop.active = this.isAuto ? true : false;
				this.win = data.win;
				this.winT = data.text;
				this.winC = data.code;
				data.card.forEach(function (card, index) {
					self.reels[index].card[0].spriteFrame = cc.RedT.util.card.getCard(card.card, card.type);
				});
				this.autoSpin();
			} else {
				this.offSpin();
			}
		}
		if (void 0 !== data.phien) {
			this.phien.string = "#" + data.phien;
		}
		if (void 0 !== data.log) {
			this.LichSu.onData(data.log);
		}
		if (void 0 !== data.top) {
			this.Top.onData(data.top);
		}
		if (void 0 !== data.notice) {
			this.addNotice(data.notice);
		}
	},
	addNotice: function addNotice(text) {
		var notice = cc.instantiate(this.RedT.prefabMiniNotice);
		var noticeComponent = notice.getComponent('mini_warning');
		noticeComponent.text.string = text;
		this.notice.addChild(notice);
	},
	setTop: function setTop() {
		cc.RedT.setting.minipoker.scale = 1;
		this.node.parent.insertChild(this.node);
		this.RedT.setTop(this.node);
	},
	hieuUng: function hieuUng() {
		if (this.win > 0) {
			if (this.winC === 2) {
				// Nổ Hũ
				if (this.isAuto == true) {
					this.onClickStop();
				}

				var nohu = cc.instantiate(this.RedT.PrefabNoHu);
				nohu = nohu.getComponent(cc.Animation);
				var text = nohu.node.children[6].getComponent(cc.Label);

				var Play = function Play() {
					var huong = cc.callFunc(function () {
						cc.RedT.audio.playEf('winHu');
						helper.numberTo(text, 0, this.win, 1000, true);
					}, this);
					nohu.node.runAction(cc.sequence(cc.delayTime(0.25), huong));
				};

				var Finish = function Finish() {
					nohu.node.destroy();
					this.hieuUng();
				};
				this.RedT.nodeEfect.addChild(nohu.node);
				nohu.on('play', Play, this);
				nohu.on('finished', Finish, this);
				nohu.play();
			} else if (this.winC === 1) {
				// Thắng lớn
				var BigWin = cc.instantiate(this.RedT.prefabBigWin);
				BigWin = BigWin.getComponent(cc.Animation);
				var BigWinFinish = function BigWinFinish() {
					BigWin.node.destroy();
					this.hieuUng();
				};
				BigWin.on('finished', BigWinFinish, this);
				BigWin.node.bet = this.win;
				BigWin.node.position = cc.v2(0, 80);
				this.notice.addChild(BigWin.node);
				this.win = 0;
			} else {
				var temp = new cc.Node();
				temp.addComponent(cc.Label);
				temp = temp.getComponent(cc.Label);
				temp.string = '+' + helper.numberWithCommas(this.win);
				temp.font = cc.RedT.util.fontCong;
				temp.lineHeight = 130;
				temp.fontSize = 20;
				this.notice.addChild(temp.node);
				temp.node.runAction(cc.sequence(cc.moveTo(this.isSpeed ? 2 : 3.5, cc.v2(0, 140)), cc.callFunc(function () {
					temp.node.destroy();
					this.hieuUng();
				}, this)));
				this.addNotice(this.winT);
				this.win = 0;
			}
			this.winC = 0;
		} else {
			if (this.isAuto) {
				this.timeOut = setTimeout(function () {
					this.onGetSpin();
				}.bind(this), this.isSpeed ? 250 : 1000);
			} else {
				this.offSpin();
			}
		}
	},
	onGetHu: function onGetHu() {
		if (this.node.active && void 0 !== cc.RedT.setting.topHu.data) {
			var result = cc.RedT.setting.topHu.data['mini_poker'].filter(function (temp) {
				return temp.type == this.cuoc;
			}.bind(this));
			var s = helper.getOnlyNumberInString(this.hu.string);
			var bet = result[0].bet;
			if (s - bet != 0) {
				helper.numberTo(this.hu, s, bet, 2000, true);
			}
		}
	},
	onGetSpin: function onGetSpin() {
		cc.RedT.send({ g: { mini_poker: { spin: { cuoc: this.cuoc } } } });
	},
	onCloseGame: function onCloseGame() {
		this.isSpin = false;
		this.reels.forEach(function (reel) {
			reel.stop();
		});
		this.offSpin();
		void 0 !== this.timeOut && clearTimeout(this.timeOut);
	}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXGFzc2V0c1xcU2NyaXB0XFxHYW1lXFxNaW5pUG9rZXIvLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcYXNzZXRzXFxTY3JpcHRcXEdhbWVcXE1pbmlQb2tlci9hc3NldHNcXFNjcmlwdFxcR2FtZVxcTWluaVBva2VyXFxNaW5pUG9rZXIuanMiXSwibmFtZXMiOlsiaGVscGVyIiwicmVxdWlyZSIsIk1pbmlQb2tlcl9yZWVsIiwiY2MiLCJDbGFzcyIsImV4dGVuZHMiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiYmFja2dyb3VuZCIsIk5vZGUiLCJidXR0b25TcGluIiwiYnV0dG9uQXV0byIsImJ1dHRvblNwZWVkIiwiYnV0dG9uU3RvcCIsInJlZWxzIiwiZGVmYXVsdCIsInR5cGUiLCJmb250IiwiQml0bWFwRm9udCIsImJldCIsIm5vdGljZSIsImNhcmQiLCJQcmVmYWIiLCJjYXJkZiIsInBoaWVuIiwiTGFiZWwiLCJodSIsImN1b2MiLCJpc0F1dG8iLCJpc1NwZWVkIiwiaXNTcGluIiwiaW5pdCIsIm9iaiIsIlJlZFQiLCJUb3AiLCJEaWFsb2ciLCJNaW5pUG9rZXJfVG9wIiwiTGljaFN1IiwiTWluaVBva2VyX0xpY2hTdSIsInNldHRpbmciLCJtaW5pcG9rZXIiLCJzY2FsZSIsIm5vZGUiLCJydW5TY2FsZSIsImRhdGEiLCJnZXRDb21wb25lbnQiLCJjb25maWciLCJjaGVjayIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhY3RpdmUiLCJ1dGlsIiwiZm9udEVmZmVjdCIsInBvc2l0aW9uIiwiaW50Q2hhbmdlckJldCIsIm9uQ2xpY2tTcGVlZCIsIm9uQ2xpY2tBdXRvIiwib25Mb2FkIiwic2VsZiIsInR0T2Zmc2V0IiwiZm9yRWFjaCIsInJlZWwiLCJvbkVuYWJsZSIsIm9uR2V0SHUiLCJvbiIsIkV2ZW50VHlwZSIsIlRPVUNIX1NUQVJUIiwiZXZlbnRTdGFydCIsIlRPVUNIX01PVkUiLCJldmVudE1vdmUiLCJUT1VDSF9FTkQiLCJldmVudEVuZCIsIlRPVUNIX0NBTkNFTCIsIm9uRGlzYWJsZSIsIm9mZiIsIm9uQ2xvc2VHYW1lIiwiZSIsInNldFRvcCIsInYyIiwidG91Y2giLCJnZXRMb2NhdGlvblgiLCJ4IiwiZ2V0TG9jYXRpb25ZIiwieSIsIm9wZW5HYW1lIiwiYXVkaW8iLCJwbGF5Q2xpY2siLCJJU19MT0dJTiIsInNldEl0ZW0iLCJpbkdhbWUiLCJkaWFsb2ciLCJzaG93U2lnbkluIiwiY2xvc2VHYW1lIiwicGxheVVuQ2xpY2siLCJyYW5kb20iLCJuZXdHIiwiYXV0b1NwaW4iLCJpbmRleCIsInNwaW4iLCJvblNwaW4iLCJwYXVzZVN5c3RlbUV2ZW50cyIsImNoaWxkcmVuIiwib2ZmU3BpbiIsInJlc3VtZVN5c3RlbUV2ZW50cyIsImV2ZW50Iiwib25HZXRTcGluIiwiY29sb3IiLCJDb2xvciIsIldISVRFIiwib25DbGlja1N0b3AiLCJuYW1lIiwiYmluZCIsImNoYW5nZXJCZXQiLCJ0YXJnZXQiLCJzcGVlZCIsIm9uRGF0YSIsInN0YXR1cyIsIndpbiIsIndpblQiLCJ0ZXh0Iiwid2luQyIsImNvZGUiLCJzcHJpdGVGcmFtZSIsImdldENhcmQiLCJzdHJpbmciLCJsb2ciLCJ0b3AiLCJhZGROb3RpY2UiLCJpbnN0YW50aWF0ZSIsInByZWZhYk1pbmlOb3RpY2UiLCJub3RpY2VDb21wb25lbnQiLCJhZGRDaGlsZCIsInBhcmVudCIsImluc2VydENoaWxkIiwiaGlldVVuZyIsIm5vaHUiLCJQcmVmYWJOb0h1IiwiQW5pbWF0aW9uIiwiUGxheSIsImh1b25nIiwiY2FsbEZ1bmMiLCJwbGF5RWYiLCJudW1iZXJUbyIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwiZGVsYXlUaW1lIiwiRmluaXNoIiwiZGVzdHJveSIsIm5vZGVFZmVjdCIsInBsYXkiLCJCaWdXaW4iLCJwcmVmYWJCaWdXaW4iLCJCaWdXaW5GaW5pc2giLCJ0ZW1wIiwiYWRkQ29tcG9uZW50IiwibnVtYmVyV2l0aENvbW1hcyIsImZvbnRDb25nIiwibGluZUhlaWdodCIsImZvbnRTaXplIiwibW92ZVRvIiwidGltZU91dCIsInNldFRpbWVvdXQiLCJ0b3BIdSIsInJlc3VsdCIsImZpbHRlciIsInMiLCJnZXRPbmx5TnVtYmVySW5TdHJpbmciLCJzZW5kIiwiZyIsIm1pbmlfcG9rZXIiLCJzdG9wIiwiY2xlYXJUaW1lb3V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElBQUlBLFNBQWlCQyxRQUFRLFFBQVIsQ0FBckI7QUFDQSxJQUFJQyxpQkFBaUJELFFBQVEsZ0JBQVIsQ0FBckI7O0FBRUFFLEdBQUdDLEtBQUgsQ0FBUztBQUNSQyxVQUFTRixHQUFHRyxTQURKOztBQUdSQyxhQUFZO0FBQ1hDLGNBQWdCTCxHQUFHTSxJQURSO0FBRVhDLGNBQWdCUCxHQUFHTSxJQUZSO0FBR1hFLGNBQWdCUixHQUFHTSxJQUhSO0FBSVhHLGVBQWdCVCxHQUFHTSxJQUpSO0FBS1hJLGNBQWdCVixHQUFHTSxJQUxSO0FBTVhLLFNBQU87QUFDTkMsWUFBUyxFQURIO0FBRU5DLFNBQU1kO0FBRkEsR0FOSTtBQVVYZSxRQUFNZCxHQUFHZSxVQVZFO0FBV1hDLE9BQUtoQixHQUFHTSxJQVhHO0FBWVhXLFVBQVFqQixHQUFHTSxJQVpBO0FBYVhZLFFBQU9sQixHQUFHbUIsTUFiQztBQWNYQyxTQUFPcEIsR0FBR21CLE1BZEM7QUFlWEUsU0FBT3JCLEdBQUdzQixLQWZDO0FBZ0JYQyxNQUFPdkIsR0FBR3NCLEtBaEJDO0FBaUJYRSxRQUFPLEVBakJJO0FBa0JYQyxVQUFTLEtBbEJFO0FBbUJYQyxXQUFTLEtBbkJFO0FBb0JYQyxVQUFTO0FBcEJFLEVBSEo7QUF5QlJDLEtBekJRLGdCQXlCSEMsR0F6QkcsRUF5QkM7QUFDUixPQUFLQyxJQUFMLEdBQVlELEdBQVo7QUFDQSxPQUFLRSxHQUFMLEdBQWNGLElBQUlHLE1BQUosQ0FBV0MsYUFBekI7QUFDQSxPQUFLQyxNQUFMLEdBQWNMLElBQUlHLE1BQUosQ0FBV0csZ0JBQXpCO0FBQ0FuQyxLQUFH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QUF5QjJJLENBQXpCLEVBQTRCbEosR0FBNUIsRUFBaUMsSUFBakMsRUFBdUMsSUFBdkM7QUFDQTtBQUNEO0FBQ0QsRUFsVE87QUFtVFJzRixZQUFXLHFCQUFVO0FBQ3BCdEcsS0FBRzhCLElBQUgsQ0FBUXNJLElBQVIsQ0FBYSxFQUFDQyxHQUFFLEVBQUNDLFlBQVcsRUFBQ3ZFLE1BQUssRUFBQ3ZFLE1BQUssS0FBS0EsSUFBWCxFQUFOLEVBQVosRUFBSCxFQUFiO0FBQ0EsRUFyVE87QUFzVFJnRCxjQUFhLHVCQUFVO0FBQ25CLE9BQUs3QyxNQUFMLEdBQWMsS0FBZDtBQUNBLE9BQUtoQixLQUFMLENBQVc4QyxPQUFYLENBQW1CLFVBQVNDLElBQVQsRUFBZTtBQUNwQ0EsUUFBSzZHLElBQUw7QUFDQSxHQUZFO0FBR0gsT0FBS3BFLE9BQUw7QUFDQSxPQUFLLENBQUwsS0FBVyxLQUFLMEQsT0FBaEIsSUFBMkJXLGFBQWEsS0FBS1gsT0FBbEIsQ0FBM0I7QUFDRztBQTdUSSxDQUFUIiwiZmlsZSI6Ik1pbmlQb2tlci5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcR2FtZVxcTWluaVBva2VyIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBoZWxwZXIgICAgICAgICA9IHJlcXVpcmUoJ0hlbHBlcicpO1xyXG52YXIgTWluaVBva2VyX3JlZWwgPSByZXF1aXJlKCdNaW5pUG9rZXJfcmVlbCcpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG5cdGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcblx0cHJvcGVydGllczoge1xyXG5cdFx0YmFja2dyb3VuZDogICAgIGNjLk5vZGUsXHJcblx0XHRidXR0b25TcGluOiAgICAgY2MuTm9kZSxcclxuXHRcdGJ1dHRvbkF1dG86ICAgICBjYy5Ob2RlLFxyXG5cdFx0YnV0dG9uU3BlZWQ6ICAgIGNjLk5vZGUsXHJcblx0XHRidXR0b25TdG9wOiAgICAgY2MuTm9kZSxcclxuXHRcdHJlZWxzOiB7XHJcblx0XHRcdGRlZmF1bHQ6IFtdLFxyXG5cdFx0XHR0eXBlOiBNaW5pUG9rZXJfcmVlbCxcclxuXHRcdH0sXHJcblx0XHRmb250OiBjYy5CaXRtYXBGb250LFxyXG5cdFx0YmV0OiBjYy5Ob2RlLFxyXG5cdFx0bm90aWNlOiBjYy5Ob2RlLFxyXG5cdFx0Y2FyZDogIGNjLlByZWZhYixcclxuXHRcdGNhcmRmOiBjYy5QcmVmYWIsXHJcblx0XHRwaGllbjogY2MuTGFiZWwsXHJcblx0XHRodTogICAgY2MuTGFiZWwsXHJcblx0XHRjdW9jOiAgXCJcIixcclxuXHRcdGlzQXV0bzogIGZhbHNlLFxyXG5cdFx0aXNTcGVlZDogZmFsc2UsXHJcblx0XHRpc1NwaW46ICBmYWxzZSxcclxuXHR9LFxyXG5cdGluaXQob2JqKXtcclxuXHRcdHRoaXMuUmVkVCA9IG9iajtcclxuXHRcdHRoaXMuVG9wICAgID0gb2JqLkRpYWxvZy5NaW5pUG9rZXJfVG9wO1xyXG5cdFx0dGhpcy5MaWNoU3UgPSBvYmouRGlhbG9nLk1pbmlQb2tlcl9MaWNoU3U7XHJcblx0XHRjYy5SZWRULnNldHRpbmcubWluaXBva2VyID0gY2MuUmVkVC5zZXR0aW5nLm1pbmlwb2tlciB8fCB7c2NhbGU6MSwgYmV0OiB0aGlzLmN1b2N9O1xyXG5cclxuXHRcdHRoaXMubm9kZS5ydW5TY2FsZSA9IGZhbHNlO1xyXG5cclxuXHRcdHRoaXMuY2FyZC5kYXRhLmdldENvbXBvbmVudCgnQ2FyZCcpXHJcblx0XHQuY29uZmlnKCk7XHJcblxyXG5cdFx0dmFyIGNoZWNrID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21pbmlwb2tlcicpO1xyXG5cdFx0aWYgKGNoZWNrID09IFwidHJ1ZVwiKSB7XHJcblx0XHRcdHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2b2lkIDAgPT09IGNjLlJlZFQudXRpbC5mb250RWZmZWN0KSB7XHJcblx0XHRcdGNjLlJlZFQudXRpbC5mb250RWZmZWN0ID0gdGhpcy5mb250O1xyXG5cdFx0fVxyXG5cdFx0aWYgKHZvaWQgMCAhPT0gY2MuUmVkVC5zZXR0aW5nLm1pbmlwb2tlci5wb3NpdGlvbikge1xyXG5cdFx0XHR0aGlzLm5vZGUucG9zaXRpb24gPSBjYy5SZWRULnNldHRpbmcubWluaXBva2VyLnBvc2l0aW9uO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2b2lkIDAgIT09IGNjLlJlZFQuc2V0dGluZy5taW5pcG9rZXIuYmV0ICYmIGNjLlJlZFQuc2V0dGluZy5taW5pcG9rZXIuYmV0ICE9IHRoaXMuY3VvYykge1xyXG5cdFx0XHR0aGlzLmludENoYW5nZXJCZXQoKTtcclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGNjLlJlZFQuc2V0dGluZy5taW5pcG9rZXIuaXNTcGVlZCAmJiB0aGlzLmlzU3BlZWQgIT0gY2MuUmVkVC5zZXR0aW5nLm1pbmlwb2tlci5pc1NwZWVkKSB7XHJcblx0XHRcdHRoaXMub25DbGlja1NwZWVkKCk7XHJcblx0XHR9XHJcblx0XHRpZiAodm9pZCAwICE9PSBjYy5SZWRULnNldHRpbmcubWluaXBva2VyLmlzQXV0byAmJiB0aGlzLmlzQXV0byAhPSBjYy5SZWRULnNldHRpbmcubWluaXBva2VyLmlzQXV0bykge1xyXG5cdFx0XHR0aGlzLm9uQ2xpY2tBdXRvKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRvbkxvYWQgKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0dGhpcy5kYXRhICAgICA9IG51bGw7XHJcblx0XHR0aGlzLnR0T2Zmc2V0ID0gbnVsbDtcclxuXHJcblx0XHR0aGlzLnJlZWxzLmZvckVhY2goZnVuY3Rpb24ocmVlbCl7XHJcblx0XHRcdHJlZWwuaW5pdChzZWxmKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0b25FbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5vbkdldEh1KCk7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsICB0aGlzLmV2ZW50U3RhcnQsIHRoaXMpO1xyXG5cdFx0dGhpcy5iYWNrZ3JvdW5kLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX01PVkUsICAgdGhpcy5ldmVudE1vdmUsICB0aGlzKTtcclxuXHRcdHRoaXMuYmFja2dyb3VuZC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsICAgIHRoaXMuZXZlbnRFbmQsICAgdGhpcyk7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLCB0aGlzLmV2ZW50RW5kLCAgIHRoaXMpO1xyXG5cdFx0Ly8gdGhpcy5iYWNrZ3JvdW5kLm9uKGNjLk5vZGUuRXZlbnRUeXBlLk1PVVNFX0VOVEVSLCAgdGhpcy5zZXRUb3AsICAgICB0aGlzKTtcclxuXHR9LFxyXG5cdG9uRGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCAgdGhpcy5ldmVudFN0YXJ0LCB0aGlzKTtcclxuXHRcdHRoaXMuYmFja2dyb3VuZC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfTU9WRSwgICB0aGlzLmV2ZW50TW92ZSwgIHRoaXMpO1xyXG5cdFx0dGhpcy5iYWNrZ3JvdW5kLm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsICAgIHRoaXMuZXZlbnRFbmQsICAgdGhpcyk7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgdGhpcy5ldmVudEVuZCwgICB0aGlzKTtcclxuXHRcdC8vIHRoaXMuYmFja2dyb3VuZC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuTU9VU0VfRU5URVIsICB0aGlzLnNldFRvcCwgICAgIHRoaXMpO1xyXG5cdFx0dGhpcy5vbkNsb3NlR2FtZSgpO1xyXG5cdH0sXHJcblx0ZXZlbnRTdGFydDogZnVuY3Rpb24oZSl7XHJcblx0XHR0aGlzLnNldFRvcCgpO1xyXG5cdFx0dGhpcy50dE9mZnNldCAgPSBjYy52MihlLnRvdWNoLmdldExvY2F0aW9uWCgpIC0gdGhpcy5ub2RlLnBvc2l0aW9uLngsIGUudG91Y2guZ2V0TG9jYXRpb25ZKCkgLSB0aGlzLm5vZGUucG9zaXRpb24ueSlcclxuXHR9LFxyXG5cdGV2ZW50TW92ZTogZnVuY3Rpb24oZSl7XHJcblx0XHR0aGlzLm5vZGUucG9zaXRpb24gPSBjYy52MihlLnRvdWNoLmdldExvY2F0aW9uWCgpIC0gdGhpcy50dE9mZnNldC54LCBlLnRvdWNoLmdldExvY2F0aW9uWSgpIC0gdGhpcy50dE9mZnNldC55KVxyXG5cdH0sXHJcblx0ZXZlbnRFbmQ6IGZ1bmN0aW9uKCl7XHJcblx0XHRjYy5SZWRULnNldHRpbmcubWluaXBva2VyLnBvc2l0aW9uID0gdGhpcy5ub2RlLnBvc2l0aW9uO1xyXG5cdH0sXHJcblx0b3BlbkdhbWU6ZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuYXVkaW8ucGxheUNsaWNrKCk7XHJcblx0XHRpZiAoY2MuUmVkVC5JU19MT0dJTil7XHJcblx0XHRcdHRoaXMubm9kZS5hY3RpdmUgPSAhMDtcclxuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21pbmlwb2tlcicsIHRydWUpO1xyXG5cdFx0XHR0aGlzLnNldFRvcCgpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRjYy5SZWRULmluR2FtZS5kaWFsb2cuc2hvd1NpZ25JbigpO1xyXG5cdH0sXHJcblx0Y2xvc2VHYW1lOmZ1bmN0aW9uKCl7XHJcblx0XHRjYy5SZWRULmF1ZGlvLnBsYXlVbkNsaWNrKCk7XHJcblx0XHR0aGlzLm5vZGUuYWN0aXZlID0gITE7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbWluaXBva2VyJywgZmFsc2UpO1xyXG5cdH0sXHJcblx0cmFuZG9tOiBmdW5jdGlvbihuZXdHID0gZmFsc2Upe1xyXG5cdFx0dGhpcy5yZWVscy5mb3JFYWNoKGZ1bmN0aW9uKHJlZWwpIHtcclxuXHRcdFx0cmVlbC5yYW5kb20obmV3Ryk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdGF1dG9TcGluOiBmdW5jdGlvbigpe1xyXG5cdFx0dGhpcy5yYW5kb20oKTtcclxuXHRcdHRoaXMucmVlbHMuZm9yRWFjaChmdW5jdGlvbihyZWVsLCBpbmRleCkge1xyXG5cdFx0XHRyZWVsLnNwaW4oaW5kZXgpO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHRvblNwaW46IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmJ1dHRvblNwaW4ucGF1c2VTeXN0ZW1FdmVudHMoKTtcclxuXHRcdHRoaXMuYmV0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oYmV0KXtcclxuXHQgICAgXHRiZXQucGF1c2VTeXN0ZW1FdmVudHMoKTtcclxuXHQgICAgfSk7XHJcblx0fSxcclxuXHRvZmZTcGluOiBmdW5jdGlvbigpe1xyXG5cdFx0dGhpcy5pc1NwaW4gPSBmYWxzZTtcclxuXHRcdHRoaXMuYnV0dG9uU3RvcC5hY3RpdmUgPSB0aGlzLmlzU3BpbiA/ICh0aGlzLmlzQXV0byA/IHRydWUgOiBmYWxzZSkgOiBmYWxzZTtcclxuXHRcdHRoaXMuYnV0dG9uU3Bpbi5yZXN1bWVTeXN0ZW1FdmVudHMoKTtcclxuXHRcdHRoaXMuYmV0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oYmV0KXtcclxuXHRcdFx0aWYoYmV0LmNoaWxkcmVuWzBdLmFjdGl2ZSl7XHJcblx0XHRcdFx0YmV0LnJlc3VtZVN5c3RlbUV2ZW50cygpO1xyXG5cdFx0XHR9XHJcbiAgICBcdH0pO1xyXG5cdH0sXHJcblx0c3BpbjogZnVuY3Rpb24oZXZlbnQpe1xyXG5cdFx0aWYgKCF0aGlzLmlzU3Bpbikge1xyXG5cdFx0XHR0aGlzLmlzU3BpbiA9IHRydWU7XHJcblx0XHRcdHRoaXMub25TcGluKCk7XHJcblx0XHRcdHRoaXMub25HZXRTcGluKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRvbkNsaWNrU3BlZWQ6IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmlzU3BlZWQgICAgICAgICAgICAgICA9IGNjLlJlZFQuc2V0dGluZy5taW5pcG9rZXIuaXNTcGVlZCA9ICF0aGlzLmlzU3BlZWQ7XHJcblx0XHR0aGlzLmJ1dHRvblNwZWVkLmNvbG9yICAgICA9IHRoaXMuaXNTcGVlZCA/IGNjLkNvbG9yLldISVRFIDogY2MuY29sb3IoMTM2LDEzNiwxMzYpO1xyXG5cdH0sXHJcblx0b25DbGlja0F1dG86IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmlzQXV0byAgICAgICAgICAgICAgID0gY2MuUmVkVC5zZXR0aW5nLm1pbmlwb2tlci5pc0F1dG8gPSAhdGhpcy5pc0F1dG87XHJcblx0XHR0aGlzLmJ1dHRvbkF1dG8uY29sb3IgICAgID0gdGhpcy5pc0F1dG8gPyBjYy5Db2xvci5XSElURSA6IGNjLmNvbG9yKDEzNiwxMzYsMTM2KTtcclxuXHRcdHRoaXMuYnV0dG9uU3RvcC5hY3RpdmUgICAgPSB0aGlzLmlzU3BpbiA/ICh0aGlzLmlzQXV0byA/IHRydWUgOiBmYWxzZSkgOiBmYWxzZTtcclxuXHR9LFxyXG5cdG9uQ2xpY2tTdG9wOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMub25DbGlja0F1dG8oKTtcclxuICAgICAgICB0aGlzLmJ1dHRvblN0b3AuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cdGludENoYW5nZXJCZXQ6IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmJldC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKG9iail7XHJcblx0XHRcdGlmIChvYmoubmFtZSA9PT0gY2MuUmVkVC5zZXR0aW5nLm1pbmlwb2tlci5iZXQpIHtcclxuXHRcdFx0XHR0aGlzLmN1b2MgPSBvYmoubmFtZTtcclxuXHRcdFx0XHRvYmouY2hpbGRyZW5bMF0uYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdFx0b2JqLmNoaWxkcmVuWzFdLmFjdGl2ZSA9IHRydWU7XHJcblx0XHRcdFx0b2JqLnBhdXNlU3lzdGVtRXZlbnRzKCk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdG9iai5jaGlsZHJlblswXS5hY3RpdmUgPSB0cnVlO1xyXG5cdFx0XHRcdG9iai5jaGlsZHJlblsxXS5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHRvYmoucmVzdW1lU3lzdGVtRXZlbnRzKCk7XHJcblx0XHRcdH1cclxuXHRcdH0uYmluZCh0aGlzKSk7XHJcblx0fSxcclxuXHRjaGFuZ2VyQmV0OiBmdW5jdGlvbihldmVudCwgYmV0KXtcclxuXHRcdHRoaXMuY3VvYyA9IGNjLlJlZFQuc2V0dGluZy5taW5pcG9rZXIuYmV0ID0gZXZlbnQudGFyZ2V0Lm5hbWU7XHJcblx0XHR0aGlzLmJldC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKG9iail7XHJcblx0XHRcdGlmIChvYmoubmFtZSA9PT0gdGhpcy5jdW9jKSB7XHJcblx0XHRcdFx0b2JqLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdG9iai5jaGlsZHJlblsxXS5hY3RpdmUgPSB0cnVlO1xyXG5cdFx0XHRcdG9iai5wYXVzZVN5c3RlbUV2ZW50cygpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRvYmouY2hpbGRyZW5bMF0uYWN0aXZlID0gdHJ1ZTtcclxuXHRcdFx0XHRvYmouY2hpbGRyZW5bMV0uYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdFx0b2JqLnJlc3VtZVN5c3RlbUV2ZW50cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy5vbkdldEh1KCk7XHJcblx0fSxcclxuXHRzcGVlZDogZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB0aGlzLmlzU3BlZWQgPyAxLjIgOiAyLjU7XHJcblx0fSxcclxuXHRvbkRhdGE6IGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0aWYgKHZvaWQgMCAhPT0gZGF0YS5zdGF0dXMpIHtcclxuXHRcdFx0aWYgKGRhdGEuc3RhdHVzID09PSAxKSB7XHJcblx0XHRcdFx0dGhpcy5idXR0b25TdG9wLmFjdGl2ZSA9IHRoaXMuaXNBdXRvID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMud2luICAgPSBkYXRhLndpbjtcclxuXHRcdFx0XHR0aGlzLndpblQgID0gZGF0YS50ZXh0O1xyXG5cdFx0XHRcdHRoaXMud2luQyAgPSBkYXRhLmNvZGU7XHJcblx0XHRcdFx0ZGF0YS5jYXJkLmZvckVhY2goZnVuY3Rpb24oY2FyZCwgaW5kZXgpe1xyXG5cdFx0XHRcdFx0c2VsZi5yZWVsc1tpbmRleF0uY2FyZFswXS5zcHJpdGVGcmFtZSA9IGNjLlJlZFQudXRpbC5jYXJkLmdldENhcmQoY2FyZC5jYXJkLCBjYXJkLnR5cGUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRoaXMuYXV0b1NwaW4oKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dGhpcy5vZmZTcGluKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGRhdGEucGhpZW4pIHtcclxuXHRcdFx0dGhpcy5waGllbi5zdHJpbmcgPSBcIiNcIiArIGRhdGEucGhpZW47XHJcblx0XHR9XHJcblx0XHRpZiAodm9pZCAwICE9PSBkYXRhLmxvZykge1xyXG5cdFx0XHR0aGlzLkxpY2hTdS5vbkRhdGEoZGF0YS5sb2cpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHZvaWQgMCAhPT0gZGF0YS50b3ApIHtcclxuXHRcdFx0dGhpcy5Ub3Aub25EYXRhKGRhdGEudG9wKTtcclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGRhdGEubm90aWNlKSB7XHJcblx0XHRcdHRoaXMuYWRkTm90aWNlKGRhdGEubm90aWNlKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdGFkZE5vdGljZTpmdW5jdGlvbih0ZXh0KXtcclxuXHRcdGxldCBub3RpY2UgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlJlZFQucHJlZmFiTWluaU5vdGljZSk7XHJcblx0XHRsZXQgbm90aWNlQ29tcG9uZW50ID0gbm90aWNlLmdldENvbXBvbmVudCgnbWluaV93YXJuaW5nJyk7XHJcblx0XHRub3RpY2VDb21wb25lbnQudGV4dC5zdHJpbmcgPSB0ZXh0O1xyXG5cdFx0dGhpcy5ub3RpY2UuYWRkQ2hpbGQobm90aWNlKTtcclxuXHR9LFxyXG5cdHNldFRvcDpmdW5jdGlvbigpe1xyXG5cdFx0Y2MuUmVkVC5zZXR0aW5nLm1pbmlwb2tlci5zY2FsZSA9IDE7XHJcblx0XHR0aGlzLm5vZGUucGFyZW50Lmluc2VydENoaWxkKHRoaXMubm9kZSk7XHJcblx0XHR0aGlzLlJlZFQuc2V0VG9wKHRoaXMubm9kZSk7XHJcblx0fSxcclxuXHRoaWV1VW5nOiBmdW5jdGlvbigpe1xyXG4gICAgXHRpZiAodGhpcy53aW4gPiAwKSB7XHJcbiAgICBcdFx0aWYgKHRoaXMud2luQyA9PT0gMikge1xyXG4gICAgXHRcdFx0Ly8gTuG7lSBIxalcclxuICAgIFx0XHRcdGlmICh0aGlzLmlzQXV0byA9PSB0cnVlKSB7XHJcbiAgICBcdFx0XHRcdHRoaXMub25DbGlja1N0b3AoKTtcclxuICAgIFx0XHRcdH1cclxuXHJcbiAgICBcdFx0XHR2YXIgbm9odSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUmVkVC5QcmVmYWJOb0h1KTtcclxuXHRcdFx0XHRub2h1ID0gbm9odS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuXHRcdFx0XHR2YXIgdGV4dCA9IG5vaHUubm9kZS5jaGlsZHJlbls2XS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG5cclxuXHRcdFx0XHR2YXIgUGxheSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHR2YXIgaHVvbmcgPSBjYy5jYWxsRnVuYyhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRjYy5SZWRULmF1ZGlvLnBsYXlFZignd2luSHUnKTtcclxuXHRcdFx0XHRcdFx0aGVscGVyLm51bWJlclRvKHRleHQsIDAsIHRoaXMud2luLCAxMDAwLCB0cnVlKTtcclxuXHRcdFx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0XHRcdFx0bm9odS5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoMC4yNSksIGh1b25nKSk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0dmFyIEZpbmlzaCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRub2h1Lm5vZGUuZGVzdHJveSgpO1xyXG5cdFx0XHRcdFx0dGhpcy5oaWV1VW5nKCk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHR0aGlzLlJlZFQubm9kZUVmZWN0LmFkZENoaWxkKG5vaHUubm9kZSk7XHJcblx0XHRcdFx0bm9odS5vbigncGxheScsICAgICBQbGF5LCAgIHRoaXMpO1xyXG4gICAgXHRcdFx0bm9odS5vbignZmluaXNoZWQnLCBGaW5pc2gsIHRoaXMpO1xyXG4gICAgXHRcdFx0bm9odS5wbGF5KCk7XHJcbiAgICBcdFx0fWVsc2UgaWYgKHRoaXMud2luQyA9PT0gMSkge1xyXG4gICAgXHRcdFx0Ly8gVGjhuq9uZyBs4bubblxyXG5cdFx0XHRcdHZhciBCaWdXaW4gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlJlZFQucHJlZmFiQmlnV2luKTtcclxuXHRcdFx0XHRCaWdXaW4gICAgID0gQmlnV2luLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG5cdFx0XHRcdHZhciBCaWdXaW5GaW5pc2ggPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0QmlnV2luLm5vZGUuZGVzdHJveSgpO1xyXG5cdFx0XHRcdFx0dGhpcy5oaWV1VW5nKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdEJpZ1dpbi5vbignZmluaXNoZWQnLCBCaWdXaW5GaW5pc2gsIHRoaXMpO1xyXG5cdFx0XHRcdEJpZ1dpbi5ub2RlLmJldCA9IHRoaXMud2luO1xyXG5cdFx0XHRcdEJpZ1dpbi5ub2RlLnBvc2l0aW9uID0gY2MudjIoMCwgODApO1xyXG5cdFx0XHRcdHRoaXMubm90aWNlLmFkZENoaWxkKEJpZ1dpbi5ub2RlKTtcclxuXHRcdFx0XHR0aGlzLndpbiA9IDA7XHJcbiAgICBcdFx0fWVsc2V7XHJcbiAgICBcdFx0XHR2YXIgdGVtcCA9IG5ldyBjYy5Ob2RlO1xyXG5cdFx0XHRcdHRlbXAuYWRkQ29tcG9uZW50KGNjLkxhYmVsKTtcclxuXHRcdFx0XHR0ZW1wID0gdGVtcC5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG5cdFx0XHRcdHRlbXAuc3RyaW5nID0gJysnKyBoZWxwZXIubnVtYmVyV2l0aENvbW1hcyh0aGlzLndpbik7XHJcblx0XHRcdFx0dGVtcC5mb250ID0gY2MuUmVkVC51dGlsLmZvbnRDb25nO1xyXG5cdFx0XHRcdHRlbXAubGluZUhlaWdodCA9IDEzMDtcclxuXHRcdFx0XHR0ZW1wLmZvbnRTaXplICAgPSAyMDtcclxuXHRcdFx0XHR0aGlzLm5vdGljZS5hZGRDaGlsZCh0ZW1wLm5vZGUpO1xyXG5cdFx0XHRcdHRlbXAubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MubW92ZVRvKHRoaXMuaXNTcGVlZCA/IDIgOiAzLjUsIGNjLnYyKDAsIDE0MCkpLCBjYy5jYWxsRnVuYyhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0dGVtcC5ub2RlLmRlc3Ryb3koKTtcclxuXHRcdFx0XHRcdHRoaXMuaGlldVVuZygpO1xyXG5cdFx0XHRcdH0sIHRoaXMpKSk7XHJcbiAgICBcdFx0XHR0aGlzLmFkZE5vdGljZSh0aGlzLndpblQpO1xyXG4gICAgXHRcdFx0dGhpcy53aW4gPSAwO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHR0aGlzLndpbkMgPSAwO1xyXG4gICAgXHR9ZWxzZXtcclxuICAgIFx0XHRpZiAodGhpcy5pc0F1dG8pIHtcclxuICAgIFx0XHRcdHRoaXMudGltZU91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHRoaXMub25HZXRTcGluKCk7XHJcblx0XHRcdFx0fS5iaW5kKHRoaXMpLCB0aGlzLmlzU3BlZWQgPyAyNTAgOiAxMDAwKTtcclxuICAgIFx0XHR9ZWxzZXtcclxuICAgIFx0XHRcdHRoaXMub2ZmU3BpbigpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0fVxyXG4gICAgfSxcclxuXHRvbkdldEh1OiBmdW5jdGlvbigpe1xyXG5cdFx0aWYgKHRoaXMubm9kZS5hY3RpdmUgJiYgdm9pZCAwICE9PSBjYy5SZWRULnNldHRpbmcudG9wSHUuZGF0YSkge1xyXG5cdFx0XHRsZXQgcmVzdWx0ID0gY2MuUmVkVC5zZXR0aW5nLnRvcEh1LmRhdGFbJ21pbmlfcG9rZXInXS5maWx0ZXIoZnVuY3Rpb24odGVtcCl7XHJcblx0XHRcdFx0cmV0dXJuIHRlbXAudHlwZSA9PSB0aGlzLmN1b2M7XHJcblx0XHRcdH0uYmluZCh0aGlzKSk7XHJcblx0XHRcdGxldCBzID0gaGVscGVyLmdldE9ubHlOdW1iZXJJblN0cmluZyh0aGlzLmh1LnN0cmluZyk7XHJcblx0XHRcdGxldCBiZXQgPSByZXN1bHRbMF0uYmV0O1xyXG5cdFx0XHRpZiAocy1iZXQgIT0gMCl7XHJcblx0XHRcdFx0aGVscGVyLm51bWJlclRvKHRoaXMuaHUsIHMsIGJldCwgMjAwMCwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cdG9uR2V0U3BpbjogZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuc2VuZCh7Zzp7bWluaV9wb2tlcjp7c3Bpbjp7Y3VvYzp0aGlzLmN1b2N9fX19KTtcclxuXHR9LFxyXG5cdG9uQ2xvc2VHYW1lOiBmdW5jdGlvbigpe1xyXG4gICAgXHR0aGlzLmlzU3BpbiA9IGZhbHNlO1xyXG4gICAgXHR0aGlzLnJlZWxzLmZvckVhY2goZnVuY3Rpb24ocmVlbCkge1xyXG5cdFx0XHRyZWVsLnN0b3AoKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5vZmZTcGluKCk7XHJcblx0XHR2b2lkIDAgIT09IHRoaXMudGltZU91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50aW1lT3V0KTtcclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=