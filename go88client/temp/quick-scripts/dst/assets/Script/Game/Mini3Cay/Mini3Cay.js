
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/Game/Mini3Cay/Mini3Cay.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '13a60eyHkJAyIXkNqrmxLrv', 'Mini3Cay');
// Script/Game/Mini3Cay/Mini3Cay.js

'use strict';

var helper = require('Helper');
var Mini3Cay_reel = require('Mini3Cay_reel');

cc.Class({
	extends: cc.Component,

	properties: {
		background: cc.Node,
		buttonSpin: cc.Node,
		buttonAuto: cc.Node,
		buttonSpeed: cc.Node,
		buttonStop: cc.Node,
		buttonAutoDot: cc.Node,
		buttonSpeedDot: cc.Node,
		reels: {
			default: [],
			type: Mini3Cay_reel
		},

		bet: cc.Node,
		notice: cc.Node,
		prefabNotice: cc.Prefab,
		cardf: cc.Prefab,
		cuoc: "",
		hu: cc.Label,
		isAuto: false,
		isSpeed: false,
		isSpin: false
	},
	init: function init(obj) {
		this.RedT = obj;
		this.LichSu = obj.Dialog.Mini3Cay_history;
		this.Top = obj.Dialog.Mini3Cay_top;
		cc.RedT.setting.mini3cay = cc.RedT.setting.mini3cay || { scale: 1 };

		var check = localStorage.getItem('mini3cay');
		if (check == "true") {
			this.node.active = true;
		}
		if (void 0 !== cc.RedT.setting.mini3cay.position) {
			this.node.position = cc.RedT.setting.mini3cay.position;
		}
		if (void 0 !== cc.RedT.setting.mini3cay.bet && cc.RedT.setting.mini3cay.bet != this.cuoc) {
			this.intChangerBet();
		}
		if (void 0 !== cc.RedT.setting.mini3cay.isSpeed && this.isSpeed != cc.RedT.setting.mini3cay.isSpeed) {
			this.onClickSpeed();
		}
		if (void 0 !== cc.RedT.setting.mini3cay.isAuto && this.isAuto != cc.RedT.setting.mini3cay.isAuto) {
			this.onClickAuto();
		}
	},
	onLoad: function onLoad() {
		this.ttOffset = null;
		var self = this;
		this.reels.forEach(function (reel) {
			reel.init(self);
		});
	},

	onEnable: function onEnable() {
		this.onGetHu();
		this.background.on(cc.Node.EventType.TOUCH_START, this.eventStart, this);
		this.background.on(cc.Node.EventType.TOUCH_MOVE, this.eventMove, this);
		this.background.on(cc.Node.EventType.TOUCH_END, this.eventEnd, this);
		this.background.on(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd, this);
		// this.background.on(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);
	},
	onDisable: function onDisable() {
		this.background.off(cc.Node.EventType.TOUCH_START, this.eventStart, this);
		this.background.off(cc.Node.EventType.TOUCH_MOVE, this.eventMove, this);
		this.background.off(cc.Node.EventType.TOUCH_END, this.eventEnd, this);
		this.background.off(cc.Node.EventType.TOUCH_CANCEL, this.eventEnd, this);
		// this.background.off(cc.Node.EventType.MOUSE_ENTER,  this.setTop,     this);
		this.onCloseGame();
	},
	eventStart: function eventStart(e) {
		this.setTop();
		this.ttOffset = cc.v2(e.touch.getLocationX() - this.node.position.x, e.touch.getLocationY() - this.node.position.y);
	},
	eventMove: function eventMove(e) {
		this.node.position = cc.v2(e.touch.getLocationX() - this.ttOffset.x, e.touch.getLocationY() - this.ttOffset.y);
	},
	eventEnd: function eventEnd() {
		cc.RedT.setting.mini3cay.position = this.node.position;
	},
	openGame: function openGame() {
		this.playClick();
		if (cc.RedT.IS_LOGIN) {
			this.node.active = !0;
			localStorage.setItem('mini3cay', true);
			this.setTop();
		} else cc.RedT.inGame.dialog.showSignIn();
	},
	closeGame: function closeGame() {
		cc.RedT.audio.playUnClick();
		this.node.active = !1;
		localStorage.setItem('mini3cay', false);
	},
	setTop: function setTop() {
		cc.RedT.setting.mini3cay.scale = 1;
		this.node.parent.insertChild(this.node);
		this.RedT.setTop(this.node);
	},
	intChangerBet: function intChangerBet() {
		var self = this;
		this.bet.children.forEach(function (obj) {
			if (obj.name == cc.RedT.setting.mini3cay.bet) {
				self.cuoc = obj.name;
				obj.children[0].active = true;
				obj.pauseSystemEvents();
			} else {
				obj.children[0].active = false;
				obj.resumeSystemEvents();
			}
		});
	},
	changerBet: function changerBet(event, bet) {
		this.cuoc = cc.RedT.setting.mini3cay.bet = bet;
		var target = event.target;
		this.bet.children.forEach(function (obj) {
			if (obj == target) {
				obj.children[0].active = true;
				obj.pauseSystemEvents();
			} else {
				obj.children[0].active = false;
				obj.resumeSystemEvents();
			}
		});
		this.onGetHu();
	},
	playClick: function playClick() {
		cc.RedT.audio.playClick();
	},
	onClickSpeed: function onClickSpeed() {
		this.isSpeed = cc.RedT.setting.mini3cay.isSpeed = !this.isSpeed;
		this.buttonSpeedDot.active = !this.buttonSpeedDot.active;
		this.buttonSpeed.color = this.isSpeed ? cc.Color.WHITE : this.buttonSpeed.color.fromHEX('#A0A0A0');
	},
	onClickAuto: function onClickAuto() {
		this.isAuto = cc.RedT.setting.mini3cay.isAuto = !this.isAuto;
		this.buttonAutoDot.active = !this.buttonAutoDot.active;
		this.buttonAuto.color = this.isAuto ? cc.Color.WHITE : this.buttonAuto.color.fromHEX('#A0A0A0');
		this.buttonStop.active = this.isSpin ? this.isAuto ? true : false : false;
	},
	onClickStop: function onClickStop() {
		this.onClickAuto();
		this.buttonStop.active = false;
	},
	onClickSpin: function onClickSpin() {
		if (!this.isSpin) {
			this.isSpin = true;
			this.onSpin();
			this.sendSpin();
		}
	},
	sendSpin: function sendSpin() {
		cc.RedT.send({ g: { mini3cay: { spin: { cuoc: this.cuoc } } } });
	},
	random: function random() {
		var newG = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

		this.reels.forEach(function (reel) {
			reel.random(newG);
		});
	},
	autoSpin: function autoSpin() {
		this.random();
		this.reels.forEach(function (reel, index) {
			reel.spin(index);
		});
	},
	onSpin: function onSpin() {
		this.buttonSpin.pauseSystemEvents();
		this.bet.children.forEach(function (bet) {
			bet.pauseSystemEvents();
		});
	},
	offSpin: function offSpin() {
		this.isSpin = this.buttonStop.active = false;
		this.buttonSpin.resumeSystemEvents();
		this.bet.children.forEach(function (bet) {
			if (!bet.children[0].active) bet.resumeSystemEvents();
		});
	},
	addNotice: function addNotice(text) {
		var notice = cc.instantiate(this.prefabNotice);
		var noticeComponent = notice.getComponent('mini_warning');
		noticeComponent.text.string = text;
		this.notice.addChild(notice);
	},
	onCloseGame: function onCloseGame() {
		this.isSpin = false;
		this.reels.forEach(function (reel) {
			reel.stop();
		});
		this.offSpin();
		void 0 !== this.timeOut && clearTimeout(this.timeOut);
	},
	onData: function onData(data) {
		var self = this;
		if (void 0 !== data.status) {
			if (data.status === 1) {
				this.buttonStop.active = this.isAuto ? true : false;
				if (void 0 !== data.win && data.win > 0) {
					this.win = data.win;
					this.winC = data.code;
					this.winT = data.text;
				} else {
					this.win = 0;
				}
				data.card.forEach(function (card, index) {
					self.reels[index].card[0].spriteFrame = cc.RedT.util.card.getCard(card.card, card.type);
				});
				this.autoSpin();
			} else {
				this.offSpin();
			}
		}
		if (void 0 !== data.logs) {
			this.LichSu.onData(data.logs);
		}
		if (void 0 !== data.tops) {
			this.Top.onData(data.tops);
		}
		if (void 0 !== data.notice) {
			this.addNotice(data.notice);
		}
	},
	hieuUng: function hieuUng() {
		if (void 0 !== this.win && this.win > 0) {
			if (this.winC == 6) {
				// Nổ Hũ
				this.winC = 0;
				if (this.isAuto == true) {
					this.onClickStop();
				}

				var nohu = cc.instantiate(this.RedT.PrefabNoHu);
				nohu = nohu.getComponent(cc.Animation);
				var text = nohu.node.children[6].getComponent(cc.Label);

				var Play = function Play() {
					var huong = cc.callFunc(function () {
						cc.RedT.audio.playEf('winHu');
						helper.numberTo(text, 0, this.win, 1000, true);
						this.win = 0;
					}, this);
					nohu.node.runAction(cc.sequence(cc.delayTime(0.25), huong));
				};

				var Finish = function Finish() {
					nohu.node.destroy();
					this.hieuUng();
				};
				this.RedT.nodeEfect.addChild(nohu.node);
				nohu.on('play', Play, this);
				nohu.on('finished', Finish, this);
				nohu.play();
			} else if (this.winC == 5 || this.winC == 4) {
				// Thắng lớn
				var BigWin = cc.instantiate(this.RedT.prefabBigWin);
				BigWin = BigWin.getComponent(cc.Animation);
				var BigWinFinish = function BigWinFinish() {
					BigWin.node.destroy();
					this.hieuUng();
				};
				BigWin.on('finished', BigWinFinish, this);
				BigWin.node.bet = this.win;
				BigWin.node.position = cc.v2(0, 70);
				this.notice.addChild(BigWin.node);
				this.win = this.winC == 0;
			} else {
				var temp = new cc.Node();
				temp.addComponent(cc.Label);
				temp = temp.getComponent(cc.Label);
				temp.string = '+' + helper.numberWithCommas(this.win);
				temp.font = cc.RedT.util.fontCong;
				temp.lineHeight = 130;
				temp.fontSize = 23;
				temp.node.position = cc.v2(0, 37);
				this.notice.addChild(temp.node);
				temp.node.runAction(cc.sequence(cc.moveTo(this.isSpeed ? 2 : 3.5, cc.v2(0, 100)), cc.callFunc(function () {
					temp.node.destroy();
					this.hieuUng();
				}, this)));
				this.addNotice(this.winT);
				this.win = 0;
			}
		} else {
			if (this.isAuto) {
				this.timeOut = setTimeout(function () {
					this.sendSpin();
				}.bind(this), this.isSpeed ? 250 : 1000);
			} else {
				this.offSpin();
			}
		}
	},
	onGetHu: function onGetHu() {
		if (this.node.active && void 0 !== cc.RedT.setting.topHu.data) {
			var result = cc.RedT.setting.topHu.data['mini3cay'].filter(function (temp) {
				return temp.type == this.cuoc;
			}.bind(this));
			var s = helper.getOnlyNumberInString(this.hu.string);
			var bet = result[0].bet;
			if (s - bet != 0) {
				helper.numberTo(this.hu, s, bet, 2000, true);
			}
		}
	},
	speed: function speed() {
		return this.isSpeed ? 1.2 : 2.5;
	}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXGFzc2V0c1xcU2NyaXB0XFxHYW1lXFxNaW5pM0NheS8uLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcR2FtZVxcTWluaTNDYXkvYXNzZXRzXFxTY3JpcHRcXEdhbWVcXE1pbmkzQ2F5XFxNaW5pM0NheS5qcyJdLCJuYW1lcyI6WyJoZWxwZXIiLCJyZXF1aXJlIiwiTWluaTNDYXlfcmVlbCIsImNjIiwiQ2xhc3MiLCJleHRlbmRzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImJhY2tncm91bmQiLCJOb2RlIiwiYnV0dG9uU3BpbiIsImJ1dHRvbkF1dG8iLCJidXR0b25TcGVlZCIsImJ1dHRvblN0b3AiLCJidXR0b25BdXRvRG90IiwiYnV0dG9uU3BlZWREb3QiLCJyZWVscyIsImRlZmF1bHQiLCJ0eXBlIiwiYmV0Iiwibm90aWNlIiwicHJlZmFiTm90aWNlIiwiUHJlZmFiIiwiY2FyZGYiLCJjdW9jIiwiaHUiLCJMYWJlbCIsImlzQXV0byIsImlzU3BlZWQiLCJpc1NwaW4iLCJpbml0Iiwib2JqIiwiUmVkVCIsIkxpY2hTdSIsIkRpYWxvZyIsIk1pbmkzQ2F5X2hpc3RvcnkiLCJUb3AiLCJNaW5pM0NheV90b3AiLCJzZXR0aW5nIiwibWluaTNjYXkiLCJzY2FsZSIsImNoZWNrIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm5vZGUiLCJhY3RpdmUiLCJwb3NpdGlvbiIsImludENoYW5nZXJCZXQiLCJvbkNsaWNrU3BlZWQiLCJvbkNsaWNrQXV0byIsIm9uTG9hZCIsInR0T2Zmc2V0Iiwic2VsZiIsImZvckVhY2giLCJyZWVsIiwib25FbmFibGUiLCJvbkdldEh1Iiwib24iLCJFdmVudFR5cGUiLCJUT1VDSF9TVEFSVCIsImV2ZW50U3RhcnQiLCJUT1VDSF9NT1ZFIiwiZXZlbnRNb3ZlIiwiVE9VQ0hfRU5EIiwiZXZlbnRFbmQiLCJUT1VDSF9DQU5DRUwiLCJvbkRpc2FibGUiLCJvZmYiLCJvbkNsb3NlR2FtZSIsImUiLCJzZXRUb3AiLCJ2MiIsInRvdWNoIiwiZ2V0TG9jYXRpb25YIiwieCIsImdldExvY2F0aW9uWSIsInkiLCJvcGVuR2FtZSIsInBsYXlDbGljayIsIklTX0xPR0lOIiwic2V0SXRlbSIsImluR2FtZSIsImRpYWxvZyIsInNob3dTaWduSW4iLCJjbG9zZUdhbWUiLCJhdWRpbyIsInBsYXlVbkNsaWNrIiwicGFyZW50IiwiaW5zZXJ0Q2hpbGQiLCJjaGlsZHJlbiIsIm5hbWUiLCJwYXVzZVN5c3RlbUV2ZW50cyIsInJlc3VtZVN5c3RlbUV2ZW50cyIsImNoYW5nZXJCZXQiLCJldmVudCIsInRhcmdldCIsImNvbG9yIiwiQ29sb3IiLCJXSElURSIsImZyb21IRVgiLCJvbkNsaWNrU3RvcCIsIm9uQ2xpY2tTcGluIiwib25TcGluIiwic2VuZFNwaW4iLCJzZW5kIiwiZyIsInNwaW4iLCJyYW5kb20iLCJuZXdHIiwiYXV0b1NwaW4iLCJpbmRleCIsIm9mZlNwaW4iLCJhZGROb3RpY2UiLCJ0ZXh0IiwiaW5zdGFudGlhdGUiLCJub3RpY2VDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJzdHJpbmciLCJhZGRDaGlsZCIsInN0b3AiLCJ0aW1lT3V0IiwiY2xlYXJUaW1lb3V0Iiwib25EYXRhIiwiZGF0YSIsInN0YXR1cyIsIndpbiIsIndpbkMiLCJjb2RlIiwid2luVCIsImNhcmQiLCJzcHJpdGVGcmFtZSIsInV0aWwiLCJnZXRDYXJkIiwibG9ncyIsInRvcHMiLCJoaWV1VW5nIiwibm9odSIsIlByZWZhYk5vSHUiLCJBbmltYXRpb24iLCJQbGF5IiwiaHVvbmciLCJjYWxsRnVuYyIsInBsYXlFZiIsIm51bWJlclRvIiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJGaW5pc2giLCJkZXN0cm95Iiwibm9kZUVmZWN0IiwicGxheSIsIkJpZ1dpbiIsInByZWZhYkJpZ1dpbiIsIkJpZ1dpbkZpbmlzaCIsInRlbXAiLCJhZGRDb21wb25lbnQiLCJudW1iZXJXaXRoQ29tbWFzIiwiZm9udCIsImZvbnRDb25nIiwibGluZUhlaWdodCIsImZvbnRTaXplIiwibW92ZVRvIiwic2V0VGltZW91dCIsImJpbmQiLCJ0b3BIdSIsInJlc3VsdCIsImZpbHRlciIsInMiLCJnZXRPbmx5TnVtYmVySW5TdHJpbmciLCJzcGVlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQUFJQSxTQUFnQkMsUUFBUSxRQUFSLENBQXBCO0FBQ0EsSUFBSUMsZ0JBQWdCRCxRQUFRLGVBQVIsQ0FBcEI7O0FBRUFFLEdBQUdDLEtBQUgsQ0FBUztBQUNMQyxVQUFTRixHQUFHRyxTQURQOztBQUdMQyxhQUFZO0FBQ1hDLGNBQWdCTCxHQUFHTSxJQURSO0FBRVhDLGNBQWdCUCxHQUFHTSxJQUZSO0FBR2RFLGNBQWdCUixHQUFHTSxJQUhMO0FBSWRHLGVBQWdCVCxHQUFHTSxJQUpMO0FBS2RJLGNBQWdCVixHQUFHTSxJQUxMO0FBTWRLLGlCQUFnQlgsR0FBR00sSUFOTDtBQU9kTSxrQkFBZ0JaLEdBQUdNLElBUEw7QUFRZE8sU0FBTztBQUNOQyxZQUFTLEVBREg7QUFFTkMsU0FBTWhCO0FBRkEsR0FSTzs7QUFhWGlCLE9BQVNoQixHQUFHTSxJQWJEO0FBY2RXLFVBQVNqQixHQUFHTSxJQWRFO0FBZWRZLGdCQUFjbEIsR0FBR21CLE1BZkg7QUFnQmRDLFNBQVNwQixHQUFHbUIsTUFoQkU7QUFpQlJFLFFBQU8sRUFqQkM7QUFrQmRDLE1BQVN0QixHQUFHdUIsS0FsQkU7QUFtQmRDLFVBQVMsS0FuQks7QUFvQmRDLFdBQVMsS0FwQks7QUFxQmRDLFVBQVM7QUFyQkssRUFIUDtBQTBCTEMsS0ExQkssZ0JBMEJBQyxHQTFCQSxFQTBCSTtBQUNSLE9BQUtDLElBQUwsR0FBWUQsR0FBWjtBQUNBLE9BQUtFLE1BQUwsR0FBY0YsSUFBSUcsTUFBSixDQUFXQyxnQkFBekI7QUFDQSxPQUFLQyxHQUFMLEdBQWNMLElBQUlHLE1BQUosQ0FBV0csWUFBekI7QUFDQWxDLEtBQUc2QixJQUFILENBQVFN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NUIsRUFBaUMsSUFBakMsRUFBdUMsSUFBdkM7QUFDQTtBQUNEO0FBQ0QsRUFyVE87QUFzVExzSixRQUFPLGlCQUFVO0FBQ2hCLFNBQU8sS0FBSzdJLE9BQUwsR0FBZSxHQUFmLEdBQXFCLEdBQTVCO0FBQ0E7QUF4VEksQ0FBVCIsImZpbGUiOiJNaW5pM0NheS5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxhc3NldHNcXFNjcmlwdFxcR2FtZVxcTWluaTNDYXkiLCJzb3VyY2VzQ29udGVudCI6WyJcclxudmFyIGhlbHBlciAgICAgICAgPSByZXF1aXJlKCdIZWxwZXInKTtcclxudmFyIE1pbmkzQ2F5X3JlZWwgPSByZXF1aXJlKCdNaW5pM0NheV9yZWVsJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgXHRiYWNrZ3JvdW5kOiAgICAgY2MuTm9kZSxcclxuICAgIFx0YnV0dG9uU3BpbjogICAgIGNjLk5vZGUsXHJcblx0XHRidXR0b25BdXRvOiAgICAgY2MuTm9kZSxcclxuXHRcdGJ1dHRvblNwZWVkOiAgICBjYy5Ob2RlLFxyXG5cdFx0YnV0dG9uU3RvcDogICAgIGNjLk5vZGUsXHJcblx0XHRidXR0b25BdXRvRG90OiAgY2MuTm9kZSxcclxuXHRcdGJ1dHRvblNwZWVkRG90OiBjYy5Ob2RlLFxyXG5cdFx0cmVlbHM6IHtcclxuXHRcdFx0ZGVmYXVsdDogW10sXHJcblx0XHRcdHR5cGU6IE1pbmkzQ2F5X3JlZWwsXHJcblx0XHR9LFxyXG5cclxuICAgIFx0YmV0OiAgICAgY2MuTm9kZSxcclxuXHRcdG5vdGljZTogIGNjLk5vZGUsXHJcblx0XHRwcmVmYWJOb3RpY2U6IGNjLlByZWZhYixcclxuXHRcdGNhcmRmOiAgIGNjLlByZWZhYixcclxuICAgICAgICBjdW9jOiAgXCJcIixcclxuXHRcdGh1OiAgICAgIGNjLkxhYmVsLFxyXG5cdFx0aXNBdXRvOiAgZmFsc2UsXHJcblx0XHRpc1NwZWVkOiBmYWxzZSxcclxuXHRcdGlzU3BpbjogIGZhbHNlLFxyXG4gICAgfSxcclxuICAgIGluaXQob2JqKXtcclxuICAgIFx0dGhpcy5SZWRUID0gb2JqO1xyXG4gICAgXHR0aGlzLkxpY2hTdSA9IG9iai5EaWFsb2cuTWluaTNDYXlfaGlzdG9yeTtcclxuICAgIFx0dGhpcy5Ub3AgICAgPSBvYmouRGlhbG9nLk1pbmkzQ2F5X3RvcDtcclxuICAgIFx0Y2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5ID0gY2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5IHx8IHtzY2FsZToxfTtcclxuXHJcbiAgICBcdHZhciBjaGVjayA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtaW5pM2NheScpO1xyXG5cdFx0aWYgKGNoZWNrID09IFwidHJ1ZVwiKSB7XHJcblx0XHRcdHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHZvaWQgMCAhPT0gY2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5LnBvc2l0aW9uKSB7XHJcblx0XHRcdHRoaXMubm9kZS5wb3NpdGlvbiA9IGNjLlJlZFQuc2V0dGluZy5taW5pM2NheS5wb3NpdGlvbjtcclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGNjLlJlZFQuc2V0dGluZy5taW5pM2NheS5iZXQgJiYgY2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5LmJldCAhPSB0aGlzLmN1b2MpIHtcclxuXHRcdFx0dGhpcy5pbnRDaGFuZ2VyQmV0KCk7XHJcblx0XHR9XHJcblx0XHRpZiAodm9pZCAwICE9PSBjYy5SZWRULnNldHRpbmcubWluaTNjYXkuaXNTcGVlZCAmJiB0aGlzLmlzU3BlZWQgIT0gY2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5LmlzU3BlZWQpIHtcclxuXHRcdFx0dGhpcy5vbkNsaWNrU3BlZWQoKTtcclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGNjLlJlZFQuc2V0dGluZy5taW5pM2NheS5pc0F1dG8gJiYgdGhpcy5pc0F1dG8gIT0gY2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5LmlzQXV0bykge1xyXG5cdFx0XHR0aGlzLm9uQ2xpY2tBdXRvKCk7XHJcblx0XHR9XHJcblx0XHRcclxuICAgIH0sXHJcbiAgICBvbkxvYWQgKCkge1xyXG5cdFx0dGhpcy50dE9mZnNldCA9IG51bGw7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHR0aGlzLnJlZWxzLmZvckVhY2goZnVuY3Rpb24ocmVlbCl7XHJcblx0XHRcdHJlZWwuaW5pdChzZWxmKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0b25FbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5vbkdldEh1KCk7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsICB0aGlzLmV2ZW50U3RhcnQsIHRoaXMpO1xyXG5cdFx0dGhpcy5iYWNrZ3JvdW5kLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX01PVkUsICAgdGhpcy5ldmVudE1vdmUsICB0aGlzKTtcclxuXHRcdHRoaXMuYmFja2dyb3VuZC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsICAgIHRoaXMuZXZlbnRFbmQsICAgdGhpcyk7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLCB0aGlzLmV2ZW50RW5kLCAgIHRoaXMpO1xyXG5cdFx0Ly8gdGhpcy5iYWNrZ3JvdW5kLm9uKGNjLk5vZGUuRXZlbnRUeXBlLk1PVVNFX0VOVEVSLCAgdGhpcy5zZXRUb3AsICAgICB0aGlzKTtcclxuXHR9LFxyXG5cdG9uRGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCAgdGhpcy5ldmVudFN0YXJ0LCB0aGlzKTtcclxuXHRcdHRoaXMuYmFja2dyb3VuZC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfTU9WRSwgICB0aGlzLmV2ZW50TW92ZSwgIHRoaXMpO1xyXG5cdFx0dGhpcy5iYWNrZ3JvdW5kLm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsICAgIHRoaXMuZXZlbnRFbmQsICAgdGhpcyk7XHJcblx0XHR0aGlzLmJhY2tncm91bmQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgdGhpcy5ldmVudEVuZCwgICB0aGlzKTtcclxuXHRcdC8vIHRoaXMuYmFja2dyb3VuZC5vZmYoY2MuTm9kZS5FdmVudFR5cGUuTU9VU0VfRU5URVIsICB0aGlzLnNldFRvcCwgICAgIHRoaXMpO1xyXG5cdFx0dGhpcy5vbkNsb3NlR2FtZSgpO1xyXG5cdH0sXHJcblx0ZXZlbnRTdGFydDogZnVuY3Rpb24oZSl7XHJcblx0XHR0aGlzLnNldFRvcCgpO1xyXG5cdFx0dGhpcy50dE9mZnNldCA9IGNjLnYyKGUudG91Y2guZ2V0TG9jYXRpb25YKCkgLSB0aGlzLm5vZGUucG9zaXRpb24ueCwgZS50b3VjaC5nZXRMb2NhdGlvblkoKSAtIHRoaXMubm9kZS5wb3NpdGlvbi55KVxyXG5cdH0sXHJcblx0ZXZlbnRNb3ZlOiBmdW5jdGlvbihlKXtcclxuXHRcdHRoaXMubm9kZS5wb3NpdGlvbiA9IGNjLnYyKGUudG91Y2guZ2V0TG9jYXRpb25YKCkgLSB0aGlzLnR0T2Zmc2V0LngsIGUudG91Y2guZ2V0TG9jYXRpb25ZKCkgLSB0aGlzLnR0T2Zmc2V0LnkpXHJcblx0fSxcclxuXHRldmVudEVuZDogZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuc2V0dGluZy5taW5pM2NheS5wb3NpdGlvbiA9IHRoaXMubm9kZS5wb3NpdGlvbjtcclxuXHR9LFxyXG4gICAgb3BlbkdhbWU6ZnVuY3Rpb24oKXtcclxuXHRcdHRoaXMucGxheUNsaWNrKCk7XHJcblx0XHRpZiAoY2MuUmVkVC5JU19MT0dJTil7XHJcblx0XHRcdHRoaXMubm9kZS5hY3RpdmUgPSAhMDtcclxuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21pbmkzY2F5JywgdHJ1ZSk7XHJcblx0XHRcdHRoaXMuc2V0VG9wKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHRcdGNjLlJlZFQuaW5HYW1lLmRpYWxvZy5zaG93U2lnbkluKCk7XHJcblx0fSxcclxuXHRjbG9zZUdhbWU6ZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuYXVkaW8ucGxheVVuQ2xpY2soKTtcclxuXHRcdHRoaXMubm9kZS5hY3RpdmUgPSAhMTtcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtaW5pM2NheScsIGZhbHNlKTtcclxuXHR9LFxyXG5cdHNldFRvcDpmdW5jdGlvbigpe1xyXG5cdFx0Y2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5LnNjYWxlID0gMTtcclxuXHRcdHRoaXMubm9kZS5wYXJlbnQuaW5zZXJ0Q2hpbGQodGhpcy5ub2RlKTtcclxuXHRcdHRoaXMuUmVkVC5zZXRUb3AodGhpcy5ub2RlKTtcclxuXHR9LFxyXG5cdGludENoYW5nZXJCZXQ6IGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHR0aGlzLmJldC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKG9iail7XHJcblx0XHRcdGlmIChvYmoubmFtZSA9PSBjYy5SZWRULnNldHRpbmcubWluaTNjYXkuYmV0KSB7XHJcblx0XHRcdFx0c2VsZi5jdW9jID0gb2JqLm5hbWU7XHJcblx0XHRcdFx0b2JqLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IHRydWU7XHJcblx0XHRcdFx0b2JqLnBhdXNlU3lzdGVtRXZlbnRzKCk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdG9iai5jaGlsZHJlblswXS5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHRvYmoucmVzdW1lU3lzdGVtRXZlbnRzKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0Y2hhbmdlckJldDogZnVuY3Rpb24oZXZlbnQsIGJldCl7XHJcblx0XHR0aGlzLmN1b2MgPSBjYy5SZWRULnNldHRpbmcubWluaTNjYXkuYmV0ID0gYmV0O1xyXG5cdFx0dmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuXHRcdHRoaXMuYmV0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24ob2JqKXtcclxuXHRcdFx0aWYgKG9iaiA9PSB0YXJnZXQpIHtcclxuXHRcdFx0XHRvYmouY2hpbGRyZW5bMF0uYWN0aXZlID0gdHJ1ZTtcclxuXHRcdFx0XHRvYmoucGF1c2VTeXN0ZW1FdmVudHMoKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0b2JqLmNoaWxkcmVuWzBdLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdG9iai5yZXN1bWVTeXN0ZW1FdmVudHMoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLm9uR2V0SHUoKTtcclxuXHR9LFxyXG5cdHBsYXlDbGljazogZnVuY3Rpb24oKXtcclxuXHRcdGNjLlJlZFQuYXVkaW8ucGxheUNsaWNrKCk7XHJcblx0fSxcclxuXHRvbkNsaWNrU3BlZWQ6IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmlzU3BlZWQgICAgICAgICAgICAgICA9IGNjLlJlZFQuc2V0dGluZy5taW5pM2NheS5pc1NwZWVkID0gIXRoaXMuaXNTcGVlZDtcclxuXHRcdHRoaXMuYnV0dG9uU3BlZWREb3QuYWN0aXZlID0gIXRoaXMuYnV0dG9uU3BlZWREb3QuYWN0aXZlO1xyXG5cdFx0dGhpcy5idXR0b25TcGVlZC5jb2xvciAgICAgPSB0aGlzLmlzU3BlZWQgPyBjYy5Db2xvci5XSElURSA6IHRoaXMuYnV0dG9uU3BlZWQuY29sb3IuZnJvbUhFWCgnI0EwQTBBMCcpO1xyXG5cdH0sXHJcblx0b25DbGlja0F1dG86IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmlzQXV0byAgICAgICAgICAgICAgID0gY2MuUmVkVC5zZXR0aW5nLm1pbmkzY2F5LmlzQXV0byA9ICF0aGlzLmlzQXV0bztcclxuXHRcdHRoaXMuYnV0dG9uQXV0b0RvdC5hY3RpdmUgPSAhdGhpcy5idXR0b25BdXRvRG90LmFjdGl2ZTtcclxuXHRcdHRoaXMuYnV0dG9uQXV0by5jb2xvciAgICAgPSB0aGlzLmlzQXV0byA/IGNjLkNvbG9yLldISVRFIDogdGhpcy5idXR0b25BdXRvLmNvbG9yLmZyb21IRVgoJyNBMEEwQTAnKTtcclxuXHRcdHRoaXMuYnV0dG9uU3RvcC5hY3RpdmUgICAgPSB0aGlzLmlzU3BpbiA/ICh0aGlzLmlzQXV0byA/IHRydWUgOiBmYWxzZSkgOiBmYWxzZTtcclxuXHR9LFxyXG5cdG9uQ2xpY2tTdG9wOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMub25DbGlja0F1dG8oKTtcclxuICAgICAgICB0aGlzLmJ1dHRvblN0b3AuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgb25DbGlja1NwaW46IGZ1bmN0aW9uKCl7XHJcbiAgICBcdGlmICghdGhpcy5pc1NwaW4pIHtcclxuXHRcdFx0dGhpcy5pc1NwaW4gPSB0cnVlO1xyXG5cdFx0XHR0aGlzLm9uU3BpbigpO1xyXG5cdFx0XHR0aGlzLnNlbmRTcGluKCk7XHJcblx0XHR9XHJcbiAgICB9LFxyXG4gICAgc2VuZFNwaW46IGZ1bmN0aW9uKCl7XHJcblx0XHRjYy5SZWRULnNlbmQoe2c6e21pbmkzY2F5OntzcGluOntjdW9jOnRoaXMuY3VvY319fX0pO1xyXG5cdH0sXHJcbiAgICByYW5kb206IGZ1bmN0aW9uKG5ld0cgPSBmYWxzZSl7XHJcblx0XHR0aGlzLnJlZWxzLmZvckVhY2goZnVuY3Rpb24ocmVlbCkge1xyXG5cdFx0XHRyZWVsLnJhbmRvbShuZXdHKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0YXV0b1NwaW46IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLnJhbmRvbSgpO1xyXG5cdFx0dGhpcy5yZWVscy5mb3JFYWNoKGZ1bmN0aW9uKHJlZWwsIGluZGV4KSB7XHJcblx0XHRcdHJlZWwuc3BpbihpbmRleCk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdG9uU3BpbjogZnVuY3Rpb24oKXtcclxuXHRcdHRoaXMuYnV0dG9uU3Bpbi5wYXVzZVN5c3RlbUV2ZW50cygpO1xyXG5cdFx0dGhpcy5iZXQuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihiZXQpe1xyXG5cdCAgICBcdGJldC5wYXVzZVN5c3RlbUV2ZW50cygpO1xyXG5cdCAgICB9KTtcclxuXHR9LFxyXG5cdG9mZlNwaW46IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLmlzU3BpbiA9IHRoaXMuYnV0dG9uU3RvcC5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdHRoaXMuYnV0dG9uU3Bpbi5yZXN1bWVTeXN0ZW1FdmVudHMoKTtcclxuXHRcdHRoaXMuYmV0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oYmV0KXtcclxuXHRcdFx0aWYoIWJldC5jaGlsZHJlblswXS5hY3RpdmUpXHJcblx0XHRcdFx0YmV0LnJlc3VtZVN5c3RlbUV2ZW50cygpO1xyXG4gICAgXHR9KTtcclxuXHR9LFxyXG4gICAgYWRkTm90aWNlOmZ1bmN0aW9uKHRleHQpe1xyXG5cdFx0dmFyIG5vdGljZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiTm90aWNlKVxyXG5cdFx0dmFyIG5vdGljZUNvbXBvbmVudCA9IG5vdGljZS5nZXRDb21wb25lbnQoJ21pbmlfd2FybmluZycpXHJcblx0XHRub3RpY2VDb21wb25lbnQudGV4dC5zdHJpbmcgPSB0ZXh0XHJcblx0XHR0aGlzLm5vdGljZS5hZGRDaGlsZChub3RpY2UpXHJcblx0fSxcclxuICAgIG9uQ2xvc2VHYW1lOiBmdW5jdGlvbigpe1xyXG4gICAgXHR0aGlzLmlzU3BpbiA9IGZhbHNlO1xyXG4gICAgXHR0aGlzLnJlZWxzLmZvckVhY2goZnVuY3Rpb24ocmVlbCkge1xyXG5cdFx0XHRyZWVsLnN0b3AoKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5vZmZTcGluKCk7XHJcblx0XHR2b2lkIDAgIT09IHRoaXMudGltZU91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50aW1lT3V0KTtcclxuICAgIH0sXHJcbiAgICBvbkRhdGE6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgXHR2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBcdGlmICh2b2lkIDAgIT09IGRhdGEuc3RhdHVzKSB7XHJcblx0XHRcdGlmIChkYXRhLnN0YXR1cyA9PT0gMSkge1xyXG5cdFx0XHRcdHRoaXMuYnV0dG9uU3RvcC5hY3RpdmUgPSB0aGlzLmlzQXV0byA/IHRydWUgOiBmYWxzZTtcclxuXHRcdFx0XHRpZih2b2lkIDAgIT09IGRhdGEud2luICYmIGRhdGEud2luID4gMCl7XHJcblx0XHRcdFx0XHR0aGlzLndpbiAgPSBkYXRhLndpbjtcclxuXHRcdFx0XHRcdHRoaXMud2luQyA9IGRhdGEuY29kZTtcclxuXHRcdFx0XHRcdHRoaXMud2luVCA9IGRhdGEudGV4dDtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHRoaXMud2luID0gMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZGF0YS5jYXJkLmZvckVhY2goZnVuY3Rpb24oY2FyZCwgaW5kZXgpe1xyXG5cdFx0XHRcdFx0c2VsZi5yZWVsc1tpbmRleF0uY2FyZFswXS5zcHJpdGVGcmFtZSA9IGNjLlJlZFQudXRpbC5jYXJkLmdldENhcmQoY2FyZC5jYXJkLCBjYXJkLnR5cGUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRoaXMuYXV0b1NwaW4oKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0dGhpcy5vZmZTcGluKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGRhdGEubG9ncykge1xyXG5cdFx0XHR0aGlzLkxpY2hTdS5vbkRhdGEoZGF0YS5sb2dzKTtcclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGRhdGEudG9wcykge1xyXG5cdFx0XHR0aGlzLlRvcC5vbkRhdGEoZGF0YS50b3BzKTtcclxuXHRcdH1cclxuXHRcdGlmICh2b2lkIDAgIT09IGRhdGEubm90aWNlKSB7XHJcblx0XHRcdHRoaXMuYWRkTm90aWNlKGRhdGEubm90aWNlKTtcclxuXHRcdH1cclxuICAgIH0sXHJcbiAgICBoaWV1VW5nOiBmdW5jdGlvbigpe1xyXG4gICAgXHRpZiAodm9pZCAwICE9PSB0aGlzLndpbiAmJiB0aGlzLndpbiA+IDApIHtcclxuICAgIFx0XHRpZiAodGhpcy53aW5DID09IDYpIHtcclxuICAgIFx0XHRcdC8vIE7hu5UgSMWpXHJcbiAgICBcdFx0XHR0aGlzLndpbkMgICA9IDA7XHJcbiAgICBcdFx0XHRpZiAodGhpcy5pc0F1dG8gPT0gdHJ1ZSkge1xyXG4gICAgXHRcdFx0XHR0aGlzLm9uQ2xpY2tTdG9wKCk7XHJcbiAgICBcdFx0XHR9XHJcblxyXG4gICAgXHRcdFx0dmFyIG5vaHUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlJlZFQuUHJlZmFiTm9IdSk7XHJcblx0XHRcdFx0bm9odSA9IG5vaHUuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcblx0XHRcdFx0dmFyIHRleHQgPSBub2h1Lm5vZGUuY2hpbGRyZW5bNl0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuXHJcblx0XHRcdFx0dmFyIFBsYXkgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0dmFyIGh1b25nID0gY2MuY2FsbEZ1bmMoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0Y2MuUmVkVC5hdWRpby5wbGF5RWYoJ3dpbkh1Jyk7XHJcblx0XHRcdFx0XHRcdGhlbHBlci5udW1iZXJUbyh0ZXh0LCAwLCB0aGlzLndpbiwgMTAwMCwgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdHRoaXMud2luID0gMDtcclxuXHRcdFx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0XHRcdFx0bm9odS5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoMC4yNSksIGh1b25nKSk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0dmFyIEZpbmlzaCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRub2h1Lm5vZGUuZGVzdHJveSgpO1xyXG5cdFx0XHRcdFx0dGhpcy5oaWV1VW5nKCk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHR0aGlzLlJlZFQubm9kZUVmZWN0LmFkZENoaWxkKG5vaHUubm9kZSk7XHJcblx0XHRcdFx0bm9odS5vbigncGxheScsICAgICBQbGF5LCAgIHRoaXMpO1xyXG4gICAgXHRcdFx0bm9odS5vbignZmluaXNoZWQnLCBGaW5pc2gsIHRoaXMpO1xyXG4gICAgXHRcdFx0bm9odS5wbGF5KCk7XHJcbiAgICBcdFx0fWVsc2UgaWYgKHRoaXMud2luQyA9PSA1IHx8IHRoaXMud2luQyA9PSA0KSB7XHJcbiAgICBcdFx0XHQvLyBUaOG6r25nIGzhu5tuXHJcblx0XHRcdFx0dmFyIEJpZ1dpbiA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUmVkVC5wcmVmYWJCaWdXaW4pO1xyXG5cdFx0XHRcdEJpZ1dpbiAgICAgPSBCaWdXaW4uZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcblx0XHRcdFx0dmFyIEJpZ1dpbkZpbmlzaCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRCaWdXaW4ubm9kZS5kZXN0cm95KCk7XHJcblx0XHRcdFx0XHR0aGlzLmhpZXVVbmcoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0QmlnV2luLm9uKCdmaW5pc2hlZCcsIEJpZ1dpbkZpbmlzaCwgdGhpcyk7XHJcblx0XHRcdFx0QmlnV2luLm5vZGUuYmV0ID0gdGhpcy53aW47XHJcblx0XHRcdFx0QmlnV2luLm5vZGUucG9zaXRpb24gPSBjYy52MigwLCA3MCk7XHJcblx0XHRcdFx0dGhpcy5ub3RpY2UuYWRkQ2hpbGQoQmlnV2luLm5vZGUpO1xyXG5cdFx0XHRcdHRoaXMud2luID0gdGhpcy53aW5DID09IDA7XHJcbiAgICBcdFx0fWVsc2V7XHJcbiAgICBcdFx0XHR2YXIgdGVtcCA9IG5ldyBjYy5Ob2RlO1xyXG5cdFx0XHRcdHRlbXAuYWRkQ29tcG9uZW50KGNjLkxhYmVsKTtcclxuXHRcdFx0XHR0ZW1wID0gdGVtcC5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG5cdFx0XHRcdHRlbXAuc3RyaW5nID0gJysnKyBoZWxwZXIubnVtYmVyV2l0aENvbW1hcyh0aGlzLndpbik7XHJcblx0XHRcdFx0dGVtcC5mb250ID0gY2MuUmVkVC51dGlsLmZvbnRDb25nO1xyXG5cdFx0XHRcdHRlbXAubGluZUhlaWdodCA9IDEzMDtcclxuXHRcdFx0XHR0ZW1wLmZvbnRTaXplICAgPSAyMztcclxuXHRcdFx0XHR0ZW1wLm5vZGUucG9zaXRpb24gPSBjYy52MigwLCAzNyk7XHJcblx0XHRcdFx0dGhpcy5ub3RpY2UuYWRkQ2hpbGQodGVtcC5ub2RlKTtcclxuXHRcdFx0XHR0ZW1wLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLm1vdmVUbyh0aGlzLmlzU3BlZWQgPyAyIDogMy41LCBjYy52MigwLCAxMDApKSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHRlbXAubm9kZS5kZXN0cm95KCk7XHJcblx0XHRcdFx0XHR0aGlzLmhpZXVVbmcoKTtcclxuXHRcdFx0XHR9LCB0aGlzKSkpO1xyXG4gICAgXHRcdFx0dGhpcy5hZGROb3RpY2UodGhpcy53aW5UKTtcclxuICAgIFx0XHRcdHRoaXMud2luID0gMDtcclxuICAgIFx0XHR9XHJcbiAgICBcdH1lbHNle1xyXG4gICAgXHRcdGlmICh0aGlzLmlzQXV0bykge1xyXG4gICAgXHRcdFx0dGhpcy50aW1lT3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0dGhpcy5zZW5kU3BpbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQuYmluZCh0aGlzKSwgdGhpcy5pc1NwZWVkID8gMjUwIDogMTAwMCk7XHJcbiAgICBcdFx0fWVsc2V7XHJcbiAgICBcdFx0XHR0aGlzLm9mZlNwaW4oKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdH1cclxuICAgIH0sXHJcbiAgICBvbkdldEh1OiBmdW5jdGlvbigpe1xyXG5cdFx0aWYgKHRoaXMubm9kZS5hY3RpdmUgJiYgdm9pZCAwICE9PSBjYy5SZWRULnNldHRpbmcudG9wSHUuZGF0YSkge1xyXG5cdFx0XHRsZXQgcmVzdWx0ID0gY2MuUmVkVC5zZXR0aW5nLnRvcEh1LmRhdGFbJ21pbmkzY2F5J10uZmlsdGVyKGZ1bmN0aW9uKHRlbXApe1xyXG5cdFx0XHRcdHJldHVybiB0ZW1wLnR5cGUgPT0gdGhpcy5jdW9jO1xyXG5cdFx0XHR9LmJpbmQodGhpcykpO1xyXG5cdFx0XHRsZXQgcyA9IGhlbHBlci5nZXRPbmx5TnVtYmVySW5TdHJpbmcodGhpcy5odS5zdHJpbmcpO1xyXG5cdFx0XHRsZXQgYmV0ID0gcmVzdWx0WzBdLmJldDtcclxuXHRcdFx0aWYgKHMtYmV0ICE9IDApe1xyXG5cdFx0XHRcdGhlbHBlci5udW1iZXJUbyh0aGlzLmh1LCBzLCBiZXQsIDIwMDAsIHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuICAgIHNwZWVkOiBmdW5jdGlvbigpe1xyXG4gICAgXHRyZXR1cm4gdGhpcy5pc1NwZWVkID8gMS4yIDogMi41O1xyXG4gICAgfSxcclxufSk7XHJcbiJdfQ==